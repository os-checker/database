{
  "repo": {
    "user": "drivercraft",
    "repo": "phytium-mci"
  },
  "data": [
    {
      "user": "drivercraft",
      "repo": "phytium-mci",
      "pkg": "phytium-mci",
      "count": 882,
      "raw_reports": [
        {
          "file": "src/mci_host/sd/mod.rs",
          "features": "",
          "count": 289,
          "kinds": {
            "Clippy(Warn)": [
              "warning: this `else { if .. }` block can be collapsed\n  --> src/mci_host/sd/mod.rs:94:16\n   |\n94 |           } else {\n   |  ________________^\n95 | |             if sd_card.sdmmc_config().is_err() {\n96 | |                 panic!(\"Config fail!\");\n97 | |             }\n98 | |         }\n   | |_________^\n   |\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#collapsible_else_if\n   = note: `#[warn(clippy::collapsible_else_if)]` on by default\nhelp: collapse nested if block\n   |\n94 ~         } else if sd_card.sdmmc_config().is_err() {\n95 +             panic!(\"Config fail!\");\n96 +         }\n   |\n\n",
              "warning: this `else { if .. }` block can be collapsed\n   --> src/mci_host/sd/mod.rs:497:15\n    |\n497 |           }else {\n    |  _______________^\n498 | |             if self.usr_param.power_off_delay_ms == 0 {\n499 | |                 SD_POWER_OFF_DELAY_MS\n500 | |             } else {\n...   |\n503 | |         };\n    | |_________^\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#collapsible_else_if\nhelp: collapse nested if block\n    |\n497 ~         }else if self.usr_param.power_off_delay_ms == 0 {\n498 +             SD_POWER_OFF_DELAY_MS\n499 +         } else {\n500 +             self.usr_param.power_off_delay_ms\n501 ~         };\n    |\n\n",
              "warning: operator precedence might not be obvious\n   --> src/mci_host/sd/mod.rs:752:16\n    |\n752 |             (((current_func_status >> (group as u32)*4) & 0xf) != (func as u32)) {\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: consider parenthesizing your expression: `current_func_status >> ((group as u32)*4)`\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#precedence\n    = note: `#[warn(clippy::precedence)]` on by default\n\n",
              "warning: operator precedence might not be obvious\n   --> src/mci_host/sd/mod.rs:774:14\n    |\n774 |         if ((current_func_status >> (group as u32)*4) & 0xf) != (func as u32) {\n    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: consider parenthesizing your expression: `current_func_status >> ((group as u32)*4)`\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#precedence\n\n",
              "warning: consider removing unnecessary double parentheses\n    --> src/mci_host/sd/mod.rs:1909:40\n     |\n1909 |         self.stat.erase_timeout     = ((((status[3] & 0x00FF0000) >> 16)) as u8 & 0xFC) >> 2;                       /* 407-402 */\n     |                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n     |\n     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#double_parens\n\n",
              "warning: consider removing unnecessary double parentheses\n    --> src/mci_host/sd/mod.rs:1910:39\n     |\n1910 |         self.stat.erase_offset      = (((status[3] & 0x00FF0000) >> 16)) as u8 & 0x3;                               /* 401-400 */\n     |                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n     |\n     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#double_parens\n\n",
              "warning: consider removing unnecessary double parentheses\n    --> src/mci_host/sd/mod.rs:1911:40\n     |\n1911 |         self.stat.uhs_speed_grade   = ((((status[3] & 0x0000FF00) >> 8)) as u8 & 0xF0) >> 4;                        /* 399-396 */\n     |                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n     |\n     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#double_parens\n\n",
              "warning: consider removing unnecessary double parentheses\n    --> src/mci_host/sd/mod.rs:1912:39\n     |\n1912 |         self.stat.uhs_au_size       = (((status[3] & 0x0000FF00) >> 8)) as u8 & 0xF;                                /* 395-392 */\n     |                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n     |\n     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#double_parens\n\n",
              "warning: unneeded `return` statement\n   --> src/mci_host/sd/mod.rs:224:9\n    |\n224 |         return status;\n    |         ^^^^^^^^^^^^^\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_return\nhelp: remove `return`\n    |\n224 -         return status;\n224 +         status\n    |\n\n",
              "warning: equality checks against false can be replaced by a negation\n   --> src/mci_host/sd/mod.rs:531:16\n    |\n531 |             if self.base.is_host_ready == false {\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try simplifying it as shown: `!self.base.is_host_ready`\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#bool_comparison\n\n",
              "warning: writing `&mut Vec` instead of `&mut [_]` involves a new object where a slice will do\n   --> src/mci_host/sd/mod.rs:824:44\n    |\n824 |     pub fn write_blocks(&mut self, buffer: &mut Vec<u32>, start_block: u32, block_count: u32) -> MCIHostStatus {\n    |                                            ^^^^^^^^^^^^^ help: change this to: `&mut [u32]`\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#ptr_arg\n\n",
              "warning: manual implementation of an assign operation\n   --> src/mci_host/sd/mod.rs:869:13\n    |\n869 |             erase_block_start = erase_block_start * MCI_HOST_DEFAULT_BLOCK_SIZE;\n    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: replace it with: `erase_block_start *= MCI_HOST_DEFAULT_BLOCK_SIZE`\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#assign_op_pattern\n    = note: `#[warn(clippy::assign_op_pattern)]` on by default\n\n",
              "warning: manual implementation of an assign operation\n   --> src/mci_host/sd/mod.rs:870:13\n    |\n870 |             erase_block_end = erase_block_end * MCI_HOST_DEFAULT_BLOCK_SIZE;\n    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: replace it with: `erase_block_end *= MCI_HOST_DEFAULT_BLOCK_SIZE`\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#assign_op_pattern\n\n",
              "warning: this block may be rewritten with the `?` operator\n    --> src/mci_host/sd/mod.rs:1353:9\n     |\n1353 | /         if let Err(err) = self.transfer(&mut context, 3) {\n1354 | |             return Err(err);\n1355 | |         }\n     | |_________^ help: replace it with: `self.transfer(&mut context, 3)?;`\n     |\n     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#question_mark\n     = note: `#[warn(clippy::question_mark)]` on by default\n\n",
              "warning: writing `&mut Vec` instead of `&mut [_]` involves a new object where a slice will do\n    --> src/mci_host/sd/mod.rs:1383:17\n     |\n1383 |         buffer: &mut Vec<u32>, \n     |                 ^^^^^^^^^^^^^ help: change this to: `&mut [u32]`\n     |\n     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#ptr_arg\n\n",
              "warning: usage of `size_of::<T>()` to obtain the size of `T` in bits\n    --> src/mci_host/sd/mod.rs:1684:13\n     |\n1684 |             8 * size_of::<u32>(), \n     |             ^^^^^^^^^^^^^^^^^^^^ help: consider using: `u32::BITS as usize`\n     |\n     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#manual_bits\n     = note: `#[warn(clippy::manual_bits)]` on by default\n\n",
              "warning: this expression creates a reference which is immediately dereferenced by the compiler\n    --> src/mci_host/sd/mod.rs:1713:25\n     |\n1713 |         self.decode_scr(&raw_src);\n     |                         ^^^^^^^^ help: change this to: `raw_src`\n     |\n     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_borrow\n\n",
              "warning: manual implementation of an assign operation\n    --> src/mci_host/sd/mod.rs:1791:17\n     |\n1791 |                 self.block_count = self.block_count * self.base.block_size;\n     |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: replace it with: `self.block_count *= self.base.block_size`\n     |\n     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#assign_op_pattern\n\n",
              "warning: manual implementation of an assign operation\n    --> src/mci_host/sd/mod.rs:1793:17\n     |\n1793 |                 self.block_count = self.block_count / self.base.block_size;\n     |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: replace it with: `self.block_count /= self.base.block_size`\n     |\n     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#assign_op_pattern\n\n",
              "warning: writing `&Vec` instead of `&[_]` involves a new object where a slice will do\n    --> src/mci_host/sd/mod.rs:1850:38\n     |\n1850 |     fn decode_scr(&mut self, rawscr: &Vec<u32>) {\n     |                                      ^^^^^^^^^ help: change this to: `&[u32]`\n     |\n     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#ptr_arg\n\n",
              "warning: writing `&Vec` instead of `&[_]` involves a new object where a slice will do\n    --> src/mci_host/sd/mod.rs:1900:41\n     |\n1900 |     fn decode_status(&mut self, status: &Vec<u32>) {\n     |                                         ^^^^^^^^^ help: change this to: `&[u32]`\n     |\n     = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#ptr_arg\n\n"
            ],
            "Clippy(Error)": [
              "error: this loop never actually loops\n   --> src/mci_host/sd/mod.rs:625:13\n    |\n625 | /             loop {\n626 | |\n627 | |                 if self.current_timing == SdTimingMode::SDR12DefaultMode {\n628 | |                     /* if timing not specified, probe card capability from SDR104 mode */\n...   |\n687 | |                 break;\n688 | |             }\n    | |_____________^\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#never_loop\n    = note: `#[deny(clippy::never_loop)]` on by default\n\n"
            ],
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 2 to 4)\n-mod usr_param;\n-pub(crate) mod consts;\n-mod io_voltage;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 6 to 6)\n+pub(crate) mod consts;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 7 to 7)\n+mod io_voltage;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 9 to 9)\n+mod usr_param;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 10 to 12)\n-use core::cmp::max;\n-use core::ptr::NonNull;\n-use core::str;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 15 to 15)\n-use alloc::vec::Vec;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 17 to 17)\n-use io_voltage::SdIoVoltage;\n+use alloc::vec::Vec;\n+use core::cmp::max;\n+use core::ptr::NonNull;\n+use core::str;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 19 to 19)\n+use io_voltage::SdIoVoltage;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 23 to 23)\n-use crate::osa::pool_buffer::PoolBuffer;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 25 to 25)\n-use crate::{sleep, IoPad};\n+use crate::osa::pool_buffer::PoolBuffer;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 27 to 27)\n+use crate::{sleep, IoPad};\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 28 to 28)\n+use super::constants::*;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 30 to 30)\n-use super::constants::*;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 37 to 37)\n+use csd::{CsdFlags, SdCardCmdClass, SdCsd};\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 40 to 40)\n-use csd::{CsdFlags, SdCardCmdClass, SdCsd};\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 43 to 43)\n-pub static mut REG_BASE: NonNull<u8> = unsafe { NonNull::new_unchecked(\"uninit\".as_ptr() as *mut u8) };\n+pub static mut REG_BASE: NonNull<u8> =\n+    unsafe { NonNull::new_unchecked(\"uninit\".as_ptr() as *mut u8) };\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 45 to 45)\n-pub struct SdCard{\n+pub struct SdCard {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 62 to 62)\n-    pub fn new(addr: NonNull<u8>,iopad:IoPad) -> Self {\n+    pub fn new(addr: NonNull<u8>, iopad: IoPad) -> Self {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 64 to 64)\n-        unsafe { REG_BASE = addr; }\n+        unsafe {\n+            REG_BASE = addr;\n+        }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 71 to 71)\n-            mci_host_config.def_block_size\n+            mci_host_config.def_block_size,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 77 to 78)\n-        info!(\"Internal buffer@0x{:p}, length = 0x{}\",base.internal_buffer.addr().as_ptr(), base.internal_buffer.size());\n-        \n+        info!(\n+            \"Internal buffer@0x{:p}, length = 0x{}\",\n+            base.internal_buffer.addr().as_ptr(),\n+            base.internal_buffer.size()\n+        );\n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 105 to 105)\n-        \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 115 to 124)\n-        \n-        let capability = \n-            MCIHostCapability::SUSPEND_RESUME | \n-            MCIHostCapability::BIT4_DATA_WIDTH | \n-            MCIHostCapability::BIT8_DATA_WIDTH | \n-            MCIHostCapability::DETECT_CARD_BY_DATA3 |\n-            MCIHostCapability::DETECT_CARD_BY_CD |\n-            MCIHostCapability::AUTO_CMD12 |\n-            MCIHostCapability::DRIVER_TYPE_C |\n-            MCIHostCapability::SET_CURRENT ;\n+\n+        let capability = MCIHostCapability::SUSPEND_RESUME\n+            | MCIHostCapability::BIT4_DATA_WIDTH\n+            | MCIHostCapability::BIT8_DATA_WIDTH\n+            | MCIHostCapability::DETECT_CARD_BY_DATA3\n+            | MCIHostCapability::DETECT_CARD_BY_CD\n+            | MCIHostCapability::AUTO_CMD12\n+            | MCIHostCapability::DRIVER_TYPE_C\n+            | MCIHostCapability::SET_CURRENT;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 141 to 148)\n-            let capability = \n-                MCIHostCapability::VOLTAGE_3V3 |\n-                MCIHostCapability::VOLTAGE_1V8 |\n-                MCIHostCapability::HIGH_SPEED |\n-                MCIHostCapability::SDR104 |\n-                MCIHostCapability::SDR50;\n-            \n-            host.capability=capability;\n+            let capability = MCIHostCapability::VOLTAGE_3V3\n+                | MCIHostCapability::VOLTAGE_1V8\n+                | MCIHostCapability::HIGH_SPEED\n+                | MCIHostCapability::SDR104\n+                | MCIHostCapability::SDR50;\n+\n+            host.capability = capability;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 151 to 151)\n-            \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 156 to 156)\n-            } \n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 158 to 158)\n-            host.capability=capability;\n+            host.capability = capability;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 165 to 165)\n-        host.max_block_count.set(host.config.max_trans_size as u32 /host.config.def_block_size as u32);\n+        host.max_block_count\n+            .set(host.config.max_trans_size as u32 / host.config.def_block_size as u32);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 197 to 198)\n-impl SdCard{\n-    pub fn init(&mut self,addr:NonNull<u8>) -> MCIHostStatus {\n+impl SdCard {\n+    pub fn init(&mut self, addr: NonNull<u8>) -> MCIHostStatus {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 200 to 200)\n-        \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 217 to 217)\n-                    warn!(\"SD card init failed !!! {:?}\",err);\n+                    warn!(\"SD card init failed !!! {:?}\", err);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 223 to 223)\n-        info!(\"SD init finished, error = {:?}\",status);\n+        info!(\"SD init finished, error = {:?}\", status);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 225 to 225)\n-\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 250 to 251)\n-        self.base.bus_clk_hz = host.dev.card_clock_set(MCI_HOST_CLOCK_400KHZ,host);\n-    \n+        self.base.bus_clk_hz = host.dev.card_clock_set(MCI_HOST_CLOCK_400KHZ, host);\n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 259 to 259)\n-        if self.all_cid_send().is_err() { /* CMD2 */\n+        if self.all_cid_send().is_err() {\n+            /* CMD2 */\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 264 to 267)\n-        * Request new relative card address. This moves the card from\n-        * identification mode to data transfer mode\n-        */\n-        if self.rca_send().is_err() { /* ACMD3 */\n+         * Request new relative card address. This moves the card from\n+         * identification mode to data transfer mode\n+         */\n+        if self.rca_send().is_err() {\n+            /* ACMD3 */\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 272 to 272)\n-        if self.csd_send().is_err() { /* CMD9 */\n+        if self.csd_send().is_err() {\n+            /* CMD9 */\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 277 to 277)\n-        if self.card_select(true).is_err() { /* CMD7 */\n+        if self.card_select(true).is_err() {\n+            /* CMD7 */\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 283 to 285)\n-        * With card in data transfer state, we can set SD clock to maximum\n-        * frequency for non high speed mode (25Mhz)\n-        */\n+         * With card in data transfer state, we can set SD clock to maximum\n+         * frequency for non high speed mode (25Mhz)\n+         */\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 287 to 287)\n-        self.base.bus_clk_hz = host.dev.card_clock_set(SD_CLOCK_25MHZ,host);\n+        self.base.bus_clk_hz = host.dev.card_clock_set(SD_CLOCK_25MHZ, host);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 290 to 292)\n-        * to get supported bus width\n-        */\n-        if self.scr_send().is_err() { /* ACMD51 */\n+         * to get supported bus width\n+         */\n+        if self.scr_send().is_err() {\n+            /* ACMD51 */\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 297 to 298)\n-        * Init UHS capable SD card. Follows figure 3-16 in physical layer specification.\n-        */\n+         * Init UHS capable SD card. Follows figure 3-16 in physical layer specification.\n+         */\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 303 to 303)\n-            if self.data_bus_width_set(MCIHostBusWdith::Bit4).is_err() { /* ACMD6 */\n+            if self.data_bus_width_set(MCIHostBusWdith::Bit4).is_err() {\n+                /* ACMD6 */\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 311 to 311)\n-        if self.status_read().is_err() { /* ACMD13 */\n+        if self.status_read().is_err() {\n+            /* ACMD13 */\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 314 to 314)\n-        \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 316 to 316)\n-        if self.block_size_set(self.base.block_size).is_err() { /* CMD16 */\n+        if self.block_size_set(self.base.block_size).is_err() {\n+            /* CMD16 */\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 333 to 335)\n-        let mut acmd41_argument = {\n-            MCIHostOCR::VDD_29_30 | MCIHostOCR::VDD_32_33 | MCIHostOCR::VDD_33_34\n-        };\n+        let mut acmd41_argument =\n+            { MCIHostOCR::VDD_29_30 | MCIHostOCR::VDD_32_33 | MCIHostOCR::VDD_33_34 };\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 338 to 341)\n-        * If card is high capacity (SDXC or SDHC), and supports 1.8V signaling,\n-        * switch to new signal voltage using \"signal voltage switch procedure\"\n-        * described in SD specification\n-        */\n+         * If card is high capacity (SDXC or SDHC), and supports 1.8V signaling,\n+         * switch to new signal voltage using \"signal voltage switch procedure\"\n+         * described in SD specification\n+         */\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 344 to 346)\n-                SdIoVoltageCtrlType::NotSupport => {\n-                    /* do nothing */\n-                },\n+                SdIoVoltageCtrlType::NotSupport => { /* do nothing */ }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 350 to 354)\n-                    if capability.contains(MCIHostCapability::VOLTAGE_1V8) && \n-                      (capability.contains(MCIHostCapability::SDR104) || \n-                        capability.contains(MCIHostCapability::SDR50) ||\n-                        capability.contains(MCIHostCapability::DDR_MODE)) {\n-\n+                    if capability.contains(MCIHostCapability::VOLTAGE_1V8)\n+                        && (capability.contains(MCIHostCapability::SDR104)\n+                            || capability.contains(MCIHostCapability::SDR50)\n+                            || capability.contains(MCIHostCapability::DDR_MODE))\n+                    {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 356 to 356)\n-                        \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 360 to 360)\n-                        if self.switch_io_voltage(MCIHostOperationVoltage::Voltage330V).is_ok() {\n+                        if self\n+                            .switch_io_voltage(MCIHostOperationVoltage::Voltage330V)\n+                            .is_ok()\n+                        {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 365 to 365)\n-\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 367 to 367)\n-                },\n+                }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 378 to 378)\n-            if self.go_idle().is_err() { /* CMD0 */\n+            if self.go_idle().is_err() {\n+                /* CMD0 */\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 382 to 382)\n-            if self.interface_condition_send().is_ok() { /* CMD8 */\n+            if self.interface_condition_send().is_ok() {\n+                /* CMD8 */\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 388 to 388)\n-                if self.go_idle().is_err() { /* make up for legacy card which do not support CMD8 */\n+                if self.go_idle().is_err() {\n+                    /* make up for legacy card which do not support CMD8 */\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 394 to 394)\n-            if self.application_opration_condition_send(acmd41_argument.bits()).is_err() { /* ACMD41 */\n+            if self\n+                .application_opration_condition_send(acmd41_argument.bits())\n+                .is_err()\n+            {\n+                /* ACMD41 */\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 400 to 400)\n-                \n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 410 to 410)\n-                    },\n+                    }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 416 to 416)\n-                    },\n+                    }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 421 to 421)\n-                    },\n+                    }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 426 to 426)\n-    \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 430 to 431)\n-    fn switch_io_voltage(&mut self,voltage:MCIHostOperationVoltage) -> MCIHostStatus {\n-        let io_voltage = self.usr_param.io_voltage.as_ref().ok_or(MCIHostError::Fail)?;\n+    fn switch_io_voltage(&mut self, voltage: MCIHostOperationVoltage) -> MCIHostStatus {\n+        let io_voltage = self\n+            .usr_param\n+            .io_voltage\n+            .as_ref()\n+            .ok_or(MCIHostError::Fail)?;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 445 to 445)\n-            let _ = host.dev.switch_to_voltage(voltage,host);\n+            let _ = host.dev.switch_to_voltage(voltage, host);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 452 to 453)\n-    \n-    fn host_init(&mut self,addr:NonNull<u8>) -> MCIHostStatus {\n+\n+    fn host_init(&mut self, addr: NonNull<u8>) -> MCIHostStatus {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 457 to 457)\n-            if let Err(err) = host.dev.init(addr,host) {\n+            if let Err(err) = host.dev.init(addr, host) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 463 to 464)\n-        let cd = self.usr_param.cd.as_ref().ok_or(MCIHostError::HostNotReady)?;\n-        if cd.typ == MCIHostDetectCardType::ByGpioCD || cd.typ == MCIHostDetectCardType::ByHostDATA3 {\n+        let cd = self\n+            .usr_param\n+            .cd\n+            .as_ref()\n+            .ok_or(MCIHostError::HostNotReady)?;\n+        if cd.typ == MCIHostDetectCardType::ByGpioCD || cd.typ == MCIHostDetectCardType::ByHostDATA3\n+        {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 482 to 482)\n-\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 491 to 492)\n-        let power_delay =  if enable {\n-            if self.usr_param.power_on_delay_ms == 0{\n+        let power_delay = if enable {\n+            if self.usr_param.power_on_delay_ms == 0 {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 497 to 497)\n-        }else {\n+        } else {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 509 to 510)\n-    fn polling_card_insert(&self,status:SDStatus) -> MCIHostStatus {\n-        let cd = self.usr_param.cd.as_ref().ok_or(MCIHostError::HostNotReady)?;\n+    fn polling_card_insert(&self, status: SDStatus) -> MCIHostStatus {\n+        let cd = self\n+            .usr_param\n+            .cd\n+            .as_ref()\n+            .ok_or(MCIHostError::HostNotReady)?;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 528 to 528)\n-\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 538 to 538)\n-            if host.dev.card_detect_status_polling(status, u32::MAX, host).is_err() {\n+            if host\n+                .dev\n+                .card_detect_status_polling(status, u32::MAX, host)\n+                .is_err()\n+            {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 546 to 546)\n-    fn polling_card_status_busy(&mut self,timeout_ms:u32) -> MCIHostStatus {\n+    fn polling_card_status_busy(&mut self, timeout_ms: u32) -> MCIHostStatus {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 565 to 565)\n-        if Err(MCIHostError::CardStatusIdle) != self.polling_card_status_busy(SD_CARD_ACCESS_WAIT_IDLE_TIMEOUT) {\n+        if Err(MCIHostError::CardStatusIdle)\n+            != self.polling_card_status_busy(SD_CARD_ACCESS_WAIT_IDLE_TIMEOUT)\n+        {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 569 to 569)\n-        if self.application_cmd_send(self.base.relative_address).is_err() {\n+        if self\n+            .application_cmd_send(self.base.relative_address)\n+            .is_err()\n+        {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 592 to 592)\n-            error!(\"\\r\\n\\r\\nError: send ACMD22 failed with host error {:?}, response {:x}\\r\\n\", result, response[0]);\n+            error!(\n+                \"\\r\\n\\r\\nError: send ACMD22 failed with host error {:?}, response {:x}\\r\\n\",\n+                result, response[0]\n+            );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 602 to 602)\n-        \n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 609 to 609)\n-                    * mode\". Return failed status. */\n+                     * mode\". Return failed status. */\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 611 to 611)\n-                    \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 613 to 614)\n-                    self.base.bus_clk_hz = host.dev.card_clock_set(max(self.usr_param.max_freq, SD_CLOCK_50MHZ),host);\n-                } ,\n+                    self.base.bus_clk_hz = host\n+                        .dev\n+                        .card_clock_set(max(self.usr_param.max_freq, SD_CLOCK_50MHZ), host);\n+                }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 622 to 622)\n-                },\n+                }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 624 to 624)\n-        } else { /* card is in UHS_I mode */\n+        } else {\n+            /* card is in UHS_I mode */\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 626 to 626)\n-\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 640 to 640)\n-                                let host = self.base.host.as_ref().ok_or(MCIHostError::HostNotReady)?;\n+                                let host =\n+                                    self.base.host.as_ref().ok_or(MCIHostError::HostNotReady)?;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 642 to 642)\n-                                self.base.bus_clk_hz = host.dev.card_clock_set(SD_CLOCK_208MHZ,host);\n+                                self.base.bus_clk_hz =\n+                                    host.dev.card_clock_set(SD_CLOCK_208MHZ, host);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 644 to 645)\n-                            },\n-                            _=> {\n+                            }\n+                            _ => {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 650 to 650)\n-                    } \n+                    }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 658 to 658)\n-                                let host = self.base.host.as_ref().ok_or(MCIHostError::HostNotReady)?;\n+                                let host =\n+                                    self.base.host.as_ref().ok_or(MCIHostError::HostNotReady)?;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 660 to 660)\n-                                self.base.bus_clk_hz = host.dev.card_clock_set(SD_CLOCK_100MHZ,host);\n+                                self.base.bus_clk_hz =\n+                                    host.dev.card_clock_set(SD_CLOCK_100MHZ, host);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 662 to 663)\n-                            },\n-                            _=> {\n+                            }\n+                            _ => {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 672 to 672)\n-                    match self.func_select(SdGroupNum::TimingMode, SdTimingFuncNum::SDR25HighSpeed) {\n+                    match self.func_select(SdGroupNum::TimingMode, SdTimingFuncNum::SDR25HighSpeed)\n+                    {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 676 to 676)\n-                            self.base.bus_clk_hz = host.dev.card_clock_set(SD_CLOCK_50MHZ,host);\n+                            self.base.bus_clk_hz = host.dev.card_clock_set(SD_CLOCK_50MHZ, host);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 678 to 679)\n-                        },\n-                        _=> {\n+                        }\n+                        _ => {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 698 to 698)\n-        if self.current_timing == SdTimingMode::SDR50Mode || self.current_timing == SdTimingMode::SDR104Mode {\n+        if self.current_timing == SdTimingMode::SDR50Mode\n+            || self.current_timing == SdTimingMode::SDR104Mode\n+        {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 701 to 701)\n-                info!(\"\\r\\nError: tuning failed for mode {}\\r\\n\",self.current_timing as u32);\n+                info!(\n+                    \"\\r\\nError: tuning failed for mode {}\\r\\n\",\n+                    self.current_timing as u32\n+                );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 709 to 710)\n-    fn func_select(&mut self,group:SdGroupNum,func:SdTimingFuncNum) -> MCIHostStatus {\n-\n+    fn func_select(&mut self, group: SdGroupNum, func: SdTimingFuncNum) -> MCIHostStatus {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 712 to 713)\n-        if (self.version as u32 <= SdSpecificationVersion::Version1_0 as u32) || \n-            (self.csd.card_command_classes & SdCardCmdClass::Switch.bits() == 0) {\n+        if (self.version as u32 <= SdSpecificationVersion::Version1_0 as u32)\n+            || (self.csd.card_command_classes & SdCardCmdClass::Switch.bits() == 0)\n+        {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 719 to 719)\n-        let mut func_status =  match self.func_swtich(SdSwitchMode::Check, group, func) {\n+        let mut func_status = match self.func_swtich(SdSwitchMode::Check, group, func) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 723 to 723)\n-        \n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 727 to 727)\n-        let _ = host.dev.convert_data_to_little_endian(&mut func_status, 5, MCIHostDataPacketFormat::MSBFirst,host);\n+        let _ = host.dev.convert_data_to_little_endian(\n+            &mut func_status,\n+            5,\n+            MCIHostDataPacketFormat::MSBFirst,\n+            host,\n+        );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 729 to 729)\n-        /*  \n+        /*\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 739 to 739)\n-        let mut func_group_info = [0u16;6];\n+        let mut func_group_info = [0u16; 6];\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 747 to 747)\n-        \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 751 to 753)\n-        if (func_group_info[group as usize] & (1 << (func as u16)) == 0) ||\n-            (((current_func_status >> (group as u32)*4) & 0xf) != (func as u32)) {\n-            info!(\"\\r\\nError: function {} in group {} not support\\r\\n\",func as u32,group as u32);\n+        if (func_group_info[group as usize] & (1 << (func as u16)) == 0)\n+            || (((current_func_status >> (group as u32) * 4) & 0xf) != (func as u32))\n+        {\n+            info!(\n+                \"\\r\\nError: function {} in group {} not support\\r\\n\",\n+                func as u32, group as u32\n+            );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 757 to 757)\n-        let func_status =  match self.func_swtich(SdSwitchMode::Set, group, func) {\n+        let func_status = match self.func_swtich(SdSwitchMode::Set, group, func) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 765 to 765)\n-        let _ = host.dev.convert_data_to_little_endian(&mut func_status_need_convert, 2, MCIHostDataPacketFormat::MSBFirst,host);\n+        let _ = host.dev.convert_data_to_little_endian(\n+            &mut func_status_need_convert,\n+            2,\n+            MCIHostDataPacketFormat::MSBFirst,\n+            host,\n+        );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 774 to 775)\n-        if ((current_func_status >> (group as u32)*4) & 0xf) != (func as u32) {\n-            info!(\"\\r\\nError: switch to function {} failed\\r\\n\",func as u32);\n+        if ((current_func_status >> (group as u32) * 4) & 0xf) != (func as u32) {\n+            info!(\"\\r\\nError: switch to function {} failed\\r\\n\", func as u32);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 782 to 782)\n-    fn execute_tuning(&mut self,) -> MCIHostStatus {\n+    fn execute_tuning(&mut self) -> MCIHostStatus {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 784 to 787)\n-        let mut buffer = vec![0u32;64];\n-        host.dev.execute_tuning(SdCmd::SendTuningBlock as u32, &mut buffer, 64)\n-    } \n-    \n+        let mut buffer = vec![0u32; 64];\n+        host.dev\n+            .execute_tuning(SdCmd::SendTuningBlock as u32, &mut buffer, 64)\n+    }\n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 789 to 789)\n-    pub fn read_blocks(&mut self,buffer:&mut Vec<u32>,start_block:u32,block_count:u32) -> MCIHostStatus {\n+    pub fn read_blocks(\n+        &mut self,\n+        buffer: &mut Vec<u32>,\n+        start_block: u32,\n+        block_count: u32,\n+    ) -> MCIHostStatus {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 792 to 792)\n-        let mut block_count_one_time:u32;\n+        let mut block_count_one_time: u32;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 811 to 814)\n-            if self.read(&mut once_buffer, \n-                        start_block, \n-                        MCI_HOST_DEFAULT_BLOCK_SIZE,\n-                        block_count_one_time).is_err() {\n+            if self\n+                .read(\n+                    &mut once_buffer,\n+                    start_block,\n+                    MCI_HOST_DEFAULT_BLOCK_SIZE,\n+                    block_count_one_time,\n+                )\n+                .is_err()\n+            {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 820 to 820)\n-        \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 824 to 824)\n-    pub fn write_blocks(&mut self, buffer: &mut Vec<u32>, start_block: u32, block_count: u32) -> MCIHostStatus {\n+    pub fn write_blocks(\n+        &mut self,\n+        buffer: &mut Vec<u32>,\n+        start_block: u32,\n+        block_count: u32,\n+    ) -> MCIHostStatus {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 841 to 841)\n-            debug!(\"write block(s) one time, relative addr(u32) from {} - {}, block count {}\", start_addr, end_addr, block_count_one_time);\n+            debug!(\n+                \"write block(s) one time, relative addr(u32) from {} - {}, block count {}\",\n+                start_addr, end_addr, block_count_one_time\n+            );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 843 to 848)\n-            if self.write(&mut once_buffer, \n-                start_block + block_count - block_left, \n-                MCI_HOST_DEFAULT_BLOCK_SIZE, \n-                block_count_one_time, \n-                &mut block_written_one_time\n-            ).is_err() {\n+            if self\n+                .write(\n+                    &mut once_buffer,\n+                    start_block + block_count - block_left,\n+                    MCI_HOST_DEFAULT_BLOCK_SIZE,\n+                    block_count_one_time,\n+                    &mut block_written_one_time,\n+                )\n+                .is_err()\n+            {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 860 to 860)\n-        let mut erase_block_start =  start_block;\n+        let mut erase_block_start = start_block;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 863 to 863)\n-        if Err(MCIHostError::CardStatusIdle) != self.polling_card_status_busy(SD_CARD_ACCESS_WAIT_IDLE_TIMEOUT) {\n+        if Err(MCIHostError::CardStatusIdle)\n+            != self.polling_card_status_busy(SD_CARD_ACCESS_WAIT_IDLE_TIMEOUT)\n+        {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 914 to 914)\n-    fn transfer(&mut self,content:&mut MCIHostTransfer,retry: u32) -> MCIHostStatus {\n+    fn transfer(&mut self, content: &mut MCIHostTransfer, retry: u32) -> MCIHostStatus {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 919 to 919)\n-            let status = host.dev.transfer_function(content,host);\n+            let status = host.dev.transfer_function(content, host);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 921 to 922)\n-               break;\n-            } \n+                break;\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 928 to 929)\n-                * retry transfer will fail again */\n-                if Err(MCIHostError::CardStatusIdle) != self.polling_card_status_busy(SD_CARD_ACCESS_WAIT_IDLE_TIMEOUT) {\n+                 * retry transfer will fail again */\n+                if Err(MCIHostError::CardStatusIdle)\n+                    != self.polling_card_status_busy(SD_CARD_ACCESS_WAIT_IDLE_TIMEOUT)\n+                {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 935 to 935)\n-                if self.current_timing == SdTimingMode::SDR104Mode || self.current_timing == SdTimingMode::SDR50Mode {\n+                if self.current_timing == SdTimingMode::SDR104Mode\n+                    || self.current_timing == SdTimingMode::SDR50Mode\n+                {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 940 to 942)\n-                    /* Perform retuning, CMD19 sends a tuning block to the host to determine sampling point. \n-                        UHS50 and UHS104 cards support CMD19 in 1.8V signaling. Sampling\n-                        clock tuning is required for UHS104 host and optional for UHS50 host. */\n+                    /* Perform retuning, CMD19 sends a tuning block to the host to determine sampling point.\n+                    UHS50 and UHS104 cards support CMD19 in 1.8V signaling. Sampling\n+                    clock tuning is required for UHS104 host and optional for UHS50 host. */\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 963 to 963)\n-\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 968 to 968)\n-    /// CMD 0 \n+    /// CMD 0\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 974 to 974)\n-    /// CMD 2 \n+    /// CMD 2\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 977 to 977)\n-        \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 987 to 987)\n-        host.dev.transfer_function(&mut content,host)?;\n+        host.dev.transfer_function(&mut content, host)?;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1003 to 1004)\n-    /// CMD 6 \n-    fn func_swtich(&mut self,mode: SdSwitchMode,group: SdGroupNum,num: SdTimingFuncNum) -> Option<Vec<u32>> {\n+    /// CMD 6\n+    fn func_swtich(\n+        &mut self,\n+        mode: SdSwitchMode,\n+        group: SdGroupNum,\n+        num: SdTimingFuncNum,\n+    ) -> Option<Vec<u32>> {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1012 to 1013)\n-            arg &=  !(0xf << ((group as u32)*4));\n-            arg |= (num as u32) << ((group as u32)*4);\n+            arg &= !(0xf << ((group as u32) * 4));\n+            arg |= (num as u32) << ((group as u32) * 4);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1023 to 1026)\n-        let rx_buf = match PoolBuffer::new(\n-            64 * size_of::<u32>(), \n-            size_of::<u32>()\n-        ) {\n+        let rx_buf = match PoolBuffer::new(64 * size_of::<u32>(), size_of::<u32>()) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1029 to 1029)\n-                warn!(\"CMD6: alloc rx_buf at {:p}, size {}\", buf.addr().as_ptr(), buf.size());\n+                warn!(\n+                    \"CMD6: alloc rx_buf at {:p}, size {}\",\n+                    buf.addr().as_ptr(),\n+                    buf.size()\n+                );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1031 to 1031)\n-            },\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1040 to 1040)\n-        if let Err(err) = host.dev.transfer_function(&mut content,host) {\n+        if let Err(err) = host.dev.transfer_function(&mut content, host) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1044 to 1047)\n-            info!(\"\\r\\nError: send CMD6 failed with host error {:?}, response 0x{:x}\\r\\n\"\n-                ,err\n-                ,response);\n-            \n+            info!(\n+                \"\\r\\nError: send CMD6 failed with host error {:?}, response 0x{:x}\\r\\n\",\n+                err, response\n+            );\n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1055 to 1055)\n-            info!(\"\\r\\nError: CMD6 response error, response 0x{:x}\\r\\n\", response);\n+            info!(\n+                \"\\r\\nError: CMD6 response error, response 0x{:x}\\r\\n\",\n+                response\n+            );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1063 to 1064)\n-    /// CMD 7 \n-    fn card_select(&mut self,is_selected:bool) -> MCIHostStatus {\n+    /// CMD 7\n+    fn card_select(&mut self, is_selected: bool) -> MCIHostStatus {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1069 to 1069)\n-    /// CMD 8 \n+    /// CMD 8\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1072 to 1072)\n-        \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1084 to 1085)\n-            if let Err(err) = host.dev.transfer_function(&mut content,host) {\n-                info!(\"\\r\\nError: send CMD8 failed with host error {:?}, response {}\\r\\n\",\n+            if let Err(err) = host.dev.transfer_function(&mut content, host) {\n+                info!(\n+                    \"\\r\\nError: send CMD8 failed with host error {:?}, response {}\\r\\n\",\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1091 to 1091)\n-                    });\n+                    }\n+                );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1099 to 1099)\n-                    info!(\"\\r\\nError: CMD8 response error, response 0x{:x}\\r\\n\", response[0]);\n+                    info!(\n+                        \"\\r\\nError: CMD8 response error, response 0x{:x}\\r\\n\",\n+                        response[0]\n+                    );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1108 to 1108)\n-        \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1112 to 1112)\n-    /// CMD 9 \n+    /// CMD 9\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1115 to 1115)\n-        \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1125 to 1125)\n-        if let Err(err) = host.dev.transfer_function(&mut content,host) {\n+        if let Err(err) = host.dev.transfer_function(&mut content, host) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1128 to 1131)\n-            \n-            info!(\"Error: send CMD9 failed with host error {:?}, response 0x{:x}\\r\\n\",\n-                err,\n-                response[0]);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1133 to 1133)\n+            info!(\n+                \"Error: send CMD9 failed with host error {:?}, response 0x{:x}\\r\\n\",\n+                err, response[0]\n+            );\n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1149 to 1149)\n-        }\n+    }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1152 to 1152)\n-    fn voltage_switch(&mut self,voltage: MCIHostOperationVoltage) -> MCIHostStatus {\n+    fn voltage_switch(&mut self, voltage: MCIHostOperationVoltage) -> MCIHostStatus {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1154 to 1154)\n-        \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1164 to 1164)\n-        if host.dev.transfer_function(&mut content,host).is_err() {\n+        if host.dev.transfer_function(&mut content, host).is_err() {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1169 to 1172)\n-        * Card should drive CMD and DAT[3:0] signals low at the next clock\n-        * cycle. Some cards will only drive these\n-        * lines low briefly, so we should check as soon as possible\n-        */\n+         * Card should drive CMD and DAT[3:0] signals low at the next clock\n+         * cycle. Some cards will only drive these\n+         * lines low briefly, so we should check as soon as possible\n+         */\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1184 to 1187)\n-        * Per SD spec (section \"Timing to Switch Signal Voltage\"),\n-        * host must gate clock at least 5ms.\n-        */\n-        host.dev.card_clock_set(0,host);\n+         * Per SD spec (section \"Timing to Switch Signal Voltage\"),\n+         * host must gate clock at least 5ms.\n+         */\n+        host.dev.card_clock_set(0, host);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1202 to 1202)\n-        host.dev.card_clock_set(self.base.bus_clk_hz,host);\n+        host.dev.card_clock_set(self.base.bus_clk_hz, host);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1205 to 1207)\n-        * If SD does not drive at least one of\n-        * DAT[3:0] high within 1ms, switch failed\n-        */\n+         * If SD does not drive at least one of\n+         * DAT[3:0] high within 1ms, switch failed\n+         */\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1219 to 1219)\n-    /// CMD 12 \n+    /// CMD 12\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1222 to 1222)\n-        \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1233 to 1233)\n-        if let Err(err) = host.dev.transfer_function(&mut content,host) {\n+        if let Err(err) = host.dev.transfer_function(&mut content, host) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1236 to 1236)\n-            info!(\"\\r\\nError: send CMD12 failed with host error {:?}, reponse 0x{:x}\\r\\n\",err,response[0]);\n+            info!(\n+                \"\\r\\nError: send CMD12 failed with host error {:?}, reponse 0x{:x}\\r\\n\",\n+                err, response[0]\n+            );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1243 to 1243)\n-    /// CMD 13 \n+    /// CMD 13\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1246 to 1246)\n-        \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1258 to 1258)\n-            if let Err(err) = host.dev.transfer_function(&mut content,host) {\n+            if let Err(err) = host.dev.transfer_function(&mut content, host) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1261 to 1265)\n-                \n-                info!(\"\\r\\nError: send CMD13 failed with host error {:?}, response 0x{:x}\\r\\n\",\n-                    err,\n-                    response[0]);\n-    \n+\n+                info!(\n+                    \"\\r\\nError: send CMD13 failed with host error {:?}, response 0x{:x}\\r\\n\",\n+                    err, response[0]\n+                );\n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1272 to 1273)\n-                if (response[0] & MCIHostCardStatusFlag::READY_FOR_DATA.bits() != 0) &&\n-                   (MCIHostCurrentState::current_state(response[0]) != MCIHostCurrentState::Programming) {\n+                if (response[0] & MCIHostCardStatusFlag::READY_FOR_DATA.bits() != 0)\n+                    && (MCIHostCurrentState::current_state(response[0])\n+                        != MCIHostCurrentState::Programming)\n+                {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1283 to 1284)\n-    /// CMD 16 \n-    fn block_size_set(&mut self,block_size:u32) -> MCIHostStatus {\n+    /// CMD 16\n+    fn block_size_set(&mut self, block_size: u32) -> MCIHostStatus {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1289 to 1293)\n-    /// CMD 17/18 \n-    fn read(&mut self,buffer:&mut Vec<u32>,start_block:u32,block_size:u32,block_count:u32) -> MCIHostStatus {\n-        if (self.flags.contains(SdCardFlag::SupportHighCapacity) && block_size != 512) ||\n-           (block_size > self.base.block_size) ||\n-           ({\n+    /// CMD 17/18\n+    fn read(\n+        &mut self,\n+        buffer: &mut Vec<u32>,\n+        start_block: u32,\n+        block_size: u32,\n+        block_count: u32,\n+    ) -> MCIHostStatus {\n+        if (self.flags.contains(SdCardFlag::SupportHighCapacity) && block_size != 512)\n+            || (block_size > self.base.block_size)\n+            || ({\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1296 to 1298)\n-           }) ||\n-           (block_size % 4 != 0) {\n-            info!(\"\\r\\nError: read with parameter, block size {} is not support\\r\\n\",block_size);\n+            })\n+            || (block_size % 4 != 0)\n+        {\n+            info!(\n+                \"\\r\\nError: read with parameter, block size {} is not support\\r\\n\",\n+                block_size\n+            );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1303 to 1303)\n-        if Err(MCIHostError::CardStatusIdle) != self.polling_card_status_busy(SD_CARD_ACCESS_WAIT_IDLE_TIMEOUT) {\n+        if Err(MCIHostError::CardStatusIdle)\n+            != self.polling_card_status_busy(SD_CARD_ACCESS_WAIT_IDLE_TIMEOUT)\n+        {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1309 to 1310)\n-        \n-        info!(\"read block(s), block_size = {}, block_count = {}\", block_size, block_count);\n+\n+        info!(\n+            \"read block(s), block_size = {}, block_count = {}\",\n+            block_size, block_count\n+        );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1313 to 1313)\n-                MCIHostCommonCmd::ReadSingleBlock as u32 \n+                MCIHostCommonCmd::ReadSingleBlock as u32\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1315 to 1315)\n-                MCIHostCommonCmd::ReadMultipleBlock as u32 \n+                MCIHostCommonCmd::ReadMultipleBlock as u32\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1317 to 1317)\n-        }); \n+        });\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1323 to 1323)\n-                start_block*block_size\n+                start_block * block_size\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1335 to 1338)\n-        let rx_buf = match PoolBuffer::new(\n-            len as usize, \n-            block_size as usize\n-        ) {\n+        let rx_buf = match PoolBuffer::new(len as usize, block_size as usize) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1341 to 1341)\n-                warn!(\"CMD17/18: alloc rx_buf at {:p}, size {}\", buf.addr().as_ptr(), buf.size());\n+                warn!(\n+                    \"CMD17/18: alloc rx_buf at {:p}, size {}\",\n+                    buf.addr().as_ptr(),\n+                    buf.size()\n+                );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1343 to 1343)\n-            },\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1348 to 1348)\n-\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1365 to 1365)\n-    /// CMD 19 \n+    /// CMD 19\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1368 to 1369)\n-        let mut buffer = vec![0u32;64];\n-        let status = host.dev.execute_tuning(SdCmd::SendTuningBlock as u32, &mut buffer, 64);\n+        let mut buffer = vec![0u32; 64];\n+        let status = host\n+            .dev\n+            .execute_tuning(SdCmd::SendTuningBlock as u32, &mut buffer, 64);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1372 to 1372)\n-        let buffer = buffer.iter().flat_map(|&val| val.to_ne_bytes()).collect::<Vec<u8>>();\n+        let buffer = buffer\n+            .iter()\n+            .flat_map(|&val| val.to_ne_bytes())\n+            .collect::<Vec<u8>>();\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1375 to 1375)\n-            return Err(MCIHostError::Fail)\n+            return Err(MCIHostError::Fail);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1382 to 1387)\n-    pub fn write(&mut self, \n-        buffer: &mut Vec<u32>, \n-        start_block: u32, \n-        block_size: u32, \n-        block_count: u32, \n-        written_blocks: &mut u32\n+    pub fn write(\n+        &mut self,\n+        buffer: &mut Vec<u32>,\n+        start_block: u32,\n+        block_size: u32,\n+        block_count: u32,\n+        written_blocks: &mut u32,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1389 to 1392)\n-        if (self.flags.contains(SdCardFlag::SupportHighCapacity) && block_size != 512) ||\n-            (block_size > self.base.block_size) || \n-            ({\n-                let host  = self.base.host.as_ref().ok_or(MCIHostError::HostNotReady)?;\n+        if (self.flags.contains(SdCardFlag::SupportHighCapacity) && block_size != 512)\n+            || (block_size > self.base.block_size)\n+            || ({\n+                let host = self.base.host.as_ref().ok_or(MCIHostError::HostNotReady)?;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1394 to 1395)\n-            }) ||\n-            (block_size % 4 != 0) \n+            })\n+            || (block_size % 4 != 0)\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1397 to 1397)\n-            error!(\"\\r\\nError: write with parameter, block size {} is not support\\r\\n\", block_size);\n+            error!(\n+                \"\\r\\nError: write with parameter, block size {} is not support\\r\\n\",\n+                block_size\n+            );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1401 to 1401)\n-        if Err(MCIHostError::CardStatusIdle) != self.polling_card_status_busy(SD_CARD_ACCESS_WAIT_IDLE_TIMEOUT) {\n+        if Err(MCIHostError::CardStatusIdle)\n+            != self.polling_card_status_busy(SD_CARD_ACCESS_WAIT_IDLE_TIMEOUT)\n+        {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1409 to 1423)\n-        command.index_set( \n-            if block_count == 1 {\n-                MCIHostCommonCmd::WriteSingleBlock as u32\n-            } else {\n-                debug!(\"write multiple blocks! block count {}\", block_count);\n-                MCIHostCommonCmd::WriteMultipleBlock as u32\n-            }\n-        );\n-        command.argument_set(\n-            if self.flags.contains(SdCardFlag::SupportHighCapacity) {\n-                start_block\n-            } else {\n-                start_block * block_size\n-            }\n-        );\n+        command.index_set(if block_count == 1 {\n+            MCIHostCommonCmd::WriteSingleBlock as u32\n+        } else {\n+            debug!(\"write multiple blocks! block count {}\", block_count);\n+            MCIHostCommonCmd::WriteMultipleBlock as u32\n+        });\n+        command.argument_set(if self.flags.contains(SdCardFlag::SupportHighCapacity) {\n+            start_block\n+        } else {\n+            start_block * block_size\n+        });\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1451 to 1452)\n-    /// CMD 55 \n-    fn application_cmd_send(&mut self,relative_address:u32) -> MCIHostStatus {\n+    /// CMD 55\n+    fn application_cmd_send(&mut self, relative_address: u32) -> MCIHostStatus {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1456 to 1457)\n-\n-\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1461 to 1462)\n-\n-    /// ACMD 3 \n+    /// ACMD 3\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1465 to 1465)\n-        \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1475 to 1475)\n-        if let Err(err) = host.dev.transfer_function(&mut content,host){\n+        if let Err(err) = host.dev.transfer_function(&mut content, host) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1479 to 1481)\n-            info!(\"\\r\\nError: send CMD3 failed with host error {:?}, response 0x{:x}\\r\\n\"\n-                ,err\n-                ,response[0]);\n+            info!(\n+                \"\\r\\nError: send CMD3 failed with host error {:?}, response 0x{:x}\\r\\n\",\n+                err, response[0]\n+            );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1484 to 1485)\n-        }else {\n-\n+        } else {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1495 to 1497)\n-    /// ACMD 6 \n-    fn data_bus_width_set(&mut self,width: MCIHostBusWdith) -> MCIHostStatus {\n-\n+    /// ACMD 6\n+    fn data_bus_width_set(&mut self, width: MCIHostBusWdith) -> MCIHostStatus {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1499 to 1501)\n-        * The specification strictly requires card interrupts to be masked, but\n-        * Linux does not do so, so we won't either.\n-        */\n+         * The specification strictly requires card interrupts to be masked, but\n+         * Linux does not do so, so we won't either.\n+         */\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1503 to 1503)\n-        if self.application_cmd_send(self.base.relative_address).is_err() {\n+        if self\n+            .application_cmd_send(self.base.relative_address)\n+            .is_err()\n+        {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1509 to 1509)\n-        \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1518 to 1518)\n-            },\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1521 to 1521)\n-            },\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1524 to 1524)\n-            },\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1530 to 1530)\n-        if let Err(err) = host.dev.transfer_function(&mut content,host) {\n+        if let Err(err) = host.dev.transfer_function(&mut content, host) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1534 to 1536)\n-            info!(\"\\r\\nError: send ACMD6 failed with host error {:?}, response 0x{:x}\\r\\n\"\n-                ,err\n-                ,response[0]);\n+            info!(\n+                \"\\r\\nError: send ACMD6 failed with host error {:?}, response 0x{:x}\\r\\n\",\n+                err, response[0]\n+            );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1543 to 1543)\n-    /// ACMD 13 \n+    /// ACMD 13\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1545 to 1545)\n-\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1548 to 1548)\n-        if Err(MCIHostError::CardStatusIdle) != self.polling_card_status_busy(SD_CARD_ACCESS_WAIT_IDLE_TIMEOUT) {\n+        if Err(MCIHostError::CardStatusIdle)\n+            != self.polling_card_status_busy(SD_CARD_ACCESS_WAIT_IDLE_TIMEOUT)\n+        {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1576 to 1578)\n-            info!(\"\\r\\nError: send ACMD13 failed with host error {:?}, response 0x{:x}\\r\\n\"\n-                ,e\n-                ,response[0]);\n+            info!(\n+                \"\\r\\nError: send ACMD13 failed with host error {:?}, response 0x{:x}\\r\\n\",\n+                e, response[0]\n+            );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1585 to 1585)\n-            info!(\"\\r\\nError: send ACMD13 failed with response 0x{:x}\\r\\n\", response[0]);\n+            info!(\n+                \"\\r\\nError: send ACMD13 failed with response 0x{:x}\\r\\n\",\n+                response[0]\n+            );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1592 to 1593)\n-            rx_data, \n-            16, \n+            rx_data,\n+            16,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1595 to 1595)\n-            host\n+            host,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1603 to 1605)\n-    /// ACMD 41 \n-    fn application_opration_condition_send(&mut self,argument: u32) -> MCIHostStatus {\n-        \n+    /// ACMD 41\n+    fn application_opration_condition_send(&mut self, argument: u32) -> MCIHostStatus {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1617 to 1617)\n-\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1623 to 1625)\n-            \n-            if let Err(err) = host.dev.transfer_function(&mut content,host) {\n-                info!(\"\\r\\nError: send CMD8 failed with host error {:?}, response {}\\r\\n\",\n+\n+            if let Err(err) = host.dev.transfer_function(&mut content, host) {\n+                info!(\n+                    \"\\r\\nError: send CMD8 failed with host error {:?}, response {}\\r\\n\",\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1631 to 1631)\n-                    });\n+                    }\n+                );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1633 to 1633)\n-            } \n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1664 to 1664)\n-    /// ACMD 51 \n+    /// ACMD 51\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1666 to 1666)\n-        if self.application_cmd_send(self.base.relative_address).is_err() {\n+        if self\n+            .application_cmd_send(self.base.relative_address)\n+            .is_err()\n+        {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1671 to 1671)\n-        \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1683 to 1686)\n-        let rx_buf = match PoolBuffer::new(\n-            8 * size_of::<u32>(), \n-            size_of::<u32>()\n-        ) {\n+        let rx_buf = match PoolBuffer::new(8 * size_of::<u32>(), size_of::<u32>()) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1689 to 1689)\n-                warn!(\"ACMD51: alloc rx_buf at {:p}, size {}\", buf.addr().as_ptr(), buf.size());\n+                warn!(\n+                    \"ACMD51: alloc rx_buf at {:p}, size {}\",\n+                    buf.addr().as_ptr(),\n+                    buf.size()\n+                );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1691 to 1691)\n-            },\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1699 to 1699)\n-        if let Err(err) = host.dev.transfer_function(&mut content,host) {\n+        if let Err(err) = host.dev.transfer_function(&mut content, host) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1707 to 1711)\n-            1. Usual data (8-bit width), are sent in LSB first\n-            2. Wide width data (SD Memory register), are shifted from the MSB bit, \n-                e.g. ACMD13 (SD Status), ACMD51 (SCR) */\n-        let _ = host.dev.convert_data_to_little_endian(raw_src, 2, MCIHostDataPacketFormat::MSBFirst,host);\n-        \n+        1. Usual data (8-bit width), are sent in LSB first\n+        2. Wide width data (SD Memory register), are shifted from the MSB bit,\n+            e.g. ACMD13 (SD Status), ACMD51 (SCR) */\n+        let _ = host.dev.convert_data_to_little_endian(\n+            raw_src,\n+            2,\n+            MCIHostDataPacketFormat::MSBFirst,\n+            host,\n+        );\n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1721 to 1721)\n-\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1725 to 1725)\n-                error!(\"Construct Vec<u32> from internal_buffer failed! err: {:?}\", e);\n+                error!(\n+                    \"Construct Vec<u32> from internal_buffer failed! err: {:?}\",\n+                    e\n+                );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1727 to 1727)\n-            },\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1741 to 1742)\n-        cid.serial_number =\n-            ((rawcid[1] & 0xFFFFFF) << 8) | ((rawcid[0] & 0xFF000000) >> 24);\n+        cid.serial_number = ((rawcid[1] & 0xFFFFFF) << 8) | ((rawcid[0] & 0xFF000000) >> 24);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1748 to 1748)\n-\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1752 to 1752)\n-                error!(\"Construct Vec<u32> from internal_buffer failed! err: {:?}\", e);\n+                error!(\n+                    \"Construct Vec<u32> from internal_buffer failed! err: {:?}\",\n+                    e\n+                );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1754 to 1754)\n-            },\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1777 to 1777)\n-        if  csd.csd_structure == 0 {\n+        if csd.csd_structure == 0 {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1779 to 1780)\n-            csd.device_size =\n-                ((rawcsd[2] & 0x3FF) << 2) | ((rawcsd[1] & 0xC0000000) >> 30);\n+            csd.device_size = ((rawcsd[2] & 0x3FF) << 2) | ((rawcsd[1] & 0xC0000000) >> 30);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1787 to 1788)\n-            self.block_count =\n-                (csd.device_size + 1) << (csd.device_size_multiplier + 2);\n+            self.block_count = (csd.device_size + 1) << (csd.device_size_multiplier + 2);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1798 to 1799)\n-            csd.device_size =\n-                ((rawcsd[2] & 0x3F) << 16) | ((rawcsd[1] & 0xFFFF0000) >> 16);\n+            csd.device_size = ((rawcsd[2] & 0x3F) << 16) | ((rawcsd[1] & 0xFFFF0000) >> 16);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1806 to 1809)\n-            info!(\n-                \"unknown SD CSD structure version 0x{:x}\",\n-                csd.csd_structure\n-            );\n+            info!(\"unknown SD CSD structure version 0x{:x}\", csd.csd_structure);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1901 to 1912)\n-        self.stat.bus_width         = ((status[0] & 0xC0000000) >> 30) as u8;                                       /* 511-510 */\n-        self.stat.secure_mode       = ((status[0] & 0x20000000) >> 29) as u8;                                       /* 509 */\n-        self.stat.card_type         = (status[0] & 0x0000FFFF) as u16;                                              /* 495-480 */\n-        self.stat.protected_size    = status[1];                                                                    /* 479-448 */\n-        self.stat.speed_class       = ((status[2] & 0xFF000000) >> 24) as u8;                                       /* 447-440 */\n-        self.stat.performance_move  = ((status[2] & 0x00FF0000) >> 16) as u8;                                       /* 439-432 */\n-        self.stat.au_size           = ((status[2] & 0x0000F000) >> 12) as u8;                                       /* 431-428 */\n-        self.stat.erase_size        = (((status[2] & 0x000000FF) << 8) | ((status[3] & 0xFF000000) >> 24)) as u16;  /* 423-408 */\n-        self.stat.erase_timeout     = ((((status[3] & 0x00FF0000) >> 16)) as u8 & 0xFC) >> 2;                       /* 407-402 */\n-        self.stat.erase_offset      = (((status[3] & 0x00FF0000) >> 16)) as u8 & 0x3;                               /* 401-400 */\n-        self.stat.uhs_speed_grade   = ((((status[3] & 0x0000FF00) >> 8)) as u8 & 0xF0) >> 4;                        /* 399-396 */\n-        self.stat.uhs_au_size       = (((status[3] & 0x0000FF00) >> 8)) as u8 & 0xF;                                /* 395-392 */\n+        self.stat.bus_width = ((status[0] & 0xC0000000) >> 30) as u8; /* 511-510 */\n+        self.stat.secure_mode = ((status[0] & 0x20000000) >> 29) as u8; /* 509 */\n+        self.stat.card_type = (status[0] & 0x0000FFFF) as u16; /* 495-480 */\n+        self.stat.protected_size = status[1]; /* 479-448 */\n+        self.stat.speed_class = ((status[2] & 0xFF000000) >> 24) as u8; /* 447-440 */\n+        self.stat.performance_move = ((status[2] & 0x00FF0000) >> 16) as u8; /* 439-432 */\n+        self.stat.au_size = ((status[2] & 0x0000F000) >> 12) as u8; /* 431-428 */\n+        self.stat.erase_size =\n+            (((status[2] & 0x000000FF) << 8) | ((status[3] & 0xFF000000) >> 24)) as u16; /* 423-408 */\n+        self.stat.erase_timeout = (((status[3] & 0x00FF0000) >> 16) as u8 & 0xFC) >> 2; /* 407-402 */\n+        self.stat.erase_offset = ((status[3] & 0x00FF0000) >> 16) as u8 & 0x3; /* 401-400 */\n+        self.stat.uhs_speed_grade = (((status[3] & 0x0000FF00) >> 8) as u8 & 0xF0) >> 4; /* 399-396 */\n+        self.stat.uhs_au_size = ((status[3] & 0x0000FF00) >> 8) as u8 & 0xF; /* 395-392 */\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1918 to 1918)\n-        let mut card_name = [0u8;SD_PRODUCT_NAME_BYTES];\n+        let mut card_name = [0u8; SD_PRODUCT_NAME_BYTES];\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1920 to 1920)\n-        info!(\"Card Name: {}\",str::from_utf8(&card_name).unwrap());\n+        info!(\"Card Name: {}\", str::from_utf8(&card_name).unwrap());\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1925 to 1925)\n-            },\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1928 to 1928)\n-            },\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1931 to 1931)\n-            },\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1934 to 1934)\n-            },\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1939 to 1939)\n-        } \n+        }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1947 to 1950)\n-        info!(\"  Size: {} GB\\r\\n\",(self.block_count as u64 *self.base.block_size as u64) / SZ_1G);\n-        \n-        if self.base.bus_clk_hz >(1000*1000) {\n-            info!(\"  Bus-Speed: {} MHz\\r\\n\",self.base.bus_clk_hz/(1000*1000));\n+        info!(\n+            \"  Size: {} GB\\r\\n\",\n+            (self.block_count as u64 * self.base.block_size as u64) / SZ_1G\n+        );\n+\n+        if self.base.bus_clk_hz > (1000 * 1000) {\n+            info!(\n+                \"  Bus-Speed: {} MHz\\r\\n\",\n+                self.base.bus_clk_hz / (1000 * 1000)\n+            );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1952 to 1952)\n-            info!(\"  Bus-Speed: {} KHz\\r\\n\",self.base.bus_clk_hz/1000);\n+            info!(\"  Bus-Speed: {} KHz\\r\\n\", self.base.bus_clk_hz / 1000);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1954 to 1954)\n-            info!(\"  Bus-Speed: {} Hz\\r\\n\",self.base.bus_clk_hz);\n+            info!(\"  Bus-Speed: {} Hz\\r\\n\", self.base.bus_clk_hz);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1960 to 1960)\n-            },\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1963 to 1963)\n-            },\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1966 to 1966)\n-            },\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1979 to 1979)\n-            },\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1986 to 1986)\n-            },\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1989 to 1989)\n-            },\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1992 to 1992)\n-            },\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 1995 to 1995)\n-            },\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 2001 to 2001)\n-            },\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 2004 to 2004)\n-            },\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 2007 to 2007)\n-            },\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 2010 to 2010)\n-            },\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 2016 to 2016)\n-            },\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 2019 to 2019)\n-            },\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 2022 to 2022)\n-            },\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 2025 to 2025)\n-            },\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/mod.rs (original lines from 2029 to 2029)\n+\n"
            ]
          }
        },
        {
          "file": "src/mci_host/mci_sdif/sdif_device.rs",
          "features": "",
          "count": 82,
          "kinds": {
            "Clippy(Warn)": [
              "warning: redundant pattern matching, consider using `is_err()`\n   --> src/mci_host/mci_sdif/sdif_device.rs:101:16\n    |\n101 |         if let Err(_) = self.hc.borrow_mut().config_init(&mci_config) {\n    |         -------^^^^^^------------------------------------------------ help: try: `if self.hc.borrow_mut().config_init(&mci_config).is_err()`\n    |\n    = note: this will change drop order of the result, as well as all temporaries\n    = note: add `#[allow(clippy::redundant_pattern_matching)]` if this is important\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_pattern_matching\n\n",
              "warning: redundant pattern matching, consider using `is_err()`\n   --> src/mci_host/mci_sdif/sdif_device.rs:107:20\n    |\n107 |             if let Err(_) = self.hc.borrow_mut().set_idma_list(&self.rw_desc, self.desc_num.get()) {\n    |             -------^^^^^^------------------------------------------------------------------------- help: try: `if self.hc.borrow_mut().set_idma_list(&self.rw_desc, self.desc_num.get()).is_err()`\n    |\n    = note: this will change drop order of the result, as well as all temporaries\n    = note: add `#[allow(clippy::redundant_pattern_matching)]` if this is important\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_pattern_matching\n\n",
              "warning: writing `&mut Vec` instead of `&mut [_]` involves a new object where a slice will do\n   --> src/mci_host/mci_sdif/sdif_device.rs:155:62\n    |\n155 |     pub fn execute_tuning(&self, _tuning_cmd: u32, _rev_buf: &mut Vec<u32>, _block_size: u32) -> MCIHostStatus {\n    |                                                              ^^^^^^^^^^^^^ help: change this to: `&mut [u32]`\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#ptr_arg\n    = note: `#[warn(clippy::ptr_arg)]` on by default\n\n",
              "warning: writing `&mut Vec` instead of `&mut [_]` involves a new object where a slice will do\n   --> src/mci_host/mci_sdif/sdif_device.rs:175:55\n    |\n175 |     pub fn convert_data_to_little_endian(&self, data: &mut Vec<u32>, word_size: usize, format: MCIHostDataPacketFormat,host:&MCIHost) -> ...\n    |                                                       ^^^^^^^^^^^^^ help: change this to: `&mut [u32]`\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#ptr_arg\n\n",
              "warning: the loop variable `i` is only used to index `data`\n   --> src/mci_host/mci_sdif/sdif_device.rs:178:22\n    |\n178 |             for i in 0..word_size {\n    |                      ^^^^^^^^^^^^\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_range_loop\nhelp: consider using an iterator\n    |\n178 -             for i in 0..word_size {\n178 +             for <item> in data.iter_mut().take(word_size) {\n    |\n\n",
              "warning: the loop variable `i` is only used to index `data`\n   --> src/mci_host/mci_sdif/sdif_device.rs:183:22\n    |\n183 |             for i in 0..word_size {\n    |                      ^^^^^^^^^^^^\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_range_loop\nhelp: consider using an iterator\n    |\n183 -             for i in 0..word_size {\n183 +             for <item> in data.iter_mut().take(word_size) {\n    |\n\n",
              "warning: the loop variable `i` is only used to index `data`\n   --> src/mci_host/mci_sdif/sdif_device.rs:189:22\n    |\n189 |             for i in 0..word_size {\n    |                      ^^^^^^^^^^^^\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_range_loop\nhelp: consider using an iterator\n    |\n189 -             for i in 0..word_size {\n189 +             for <item> in data.iter_mut().take(word_size) {\n    |\n\n",
              "warning: useless conversion to the same type: `core::ptr::NonNull<u8>`\n   --> src/mci_host/mci_sdif/sdif_device.rs:383:33\n    |\n383 |             let bus_addr = mmap(NonNull::new(buf.as_ptr() as *mut u8).unwrap().into());\n    |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: consider removing `.into()`: `NonNull::new(buf.as_ptr() as *mut u8).unwrap()`\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#useless_conversion\n    = note: `#[warn(clippy::useless_conversion)]` on by default\n\n",
              "warning: redundant pattern matching, consider using `is_err()`\n   --> src/mci_host/mci_sdif/sdif_device.rs:415:20\n    |\n415 |             if let Err(_) = self.hc.borrow_mut().dma_transfer(&mut cmd_data) {\n    |             -------^^^^^^--------------------------------------------------- help: try: `if self.hc.borrow_mut().dma_transfer(&mut cmd_data).is_err()`\n    |\n    = note: this will change drop order of the result, as well as all temporaries\n    = note: add `#[allow(clippy::redundant_pattern_matching)]` if this is important\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_pattern_matching\n\n",
              "warning: redundant pattern matching, consider using `is_err()`\n   --> src/mci_host/mci_sdif/sdif_device.rs:418:20\n    |\n418 |             if let Err(_) = self.hc.borrow_mut().poll_wait_dma_end(&mut cmd_data) {\n    |             -------^^^^^^-------------------------------------------------------- help: try: `if self.hc.borrow_mut().poll_wait_dma_end(&mut cmd_data).is_err()`\n    |\n    = note: this will change drop order of the result, as well as all temporaries\n    = note: add `#[allow(clippy::redundant_pattern_matching)]` if this is important\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_pattern_matching\n\n",
              "warning: redundant pattern matching, consider using `is_err()`\n   --> src/mci_host/mci_sdif/sdif_device.rs:422:20\n    |\n422 |             if let Err(_) = self.hc.borrow_mut().pio_transfer(&mut cmd_data) {\n    |             -------^^^^^^--------------------------------------------------- help: try: `if self.hc.borrow_mut().pio_transfer(&mut cmd_data).is_err()`\n    |\n    = note: this will change drop order of the result, as well as all temporaries\n    = note: add `#[allow(clippy::redundant_pattern_matching)]` if this is important\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_pattern_matching\n\n",
              "warning: redundant pattern matching, consider using `is_err()`\n   --> src/mci_host/mci_sdif/sdif_device.rs:425:20\n    |\n425 |             if let Err(_) = self.hc.borrow_mut().poll_wait_pio_end(&mut cmd_data) {\n    |             -------^^^^^^-------------------------------------------------------- help: try: `if self.hc.borrow_mut().poll_wait_pio_end(&mut cmd_data).is_err()`\n    |\n    = note: this will change drop order of the result, as well as all temporaries\n    = note: add `#[allow(clippy::redundant_pattern_matching)]` if this is important\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_pattern_matching\n\n",
              "warning: redundant pattern matching, consider using `is_some()`\n   --> src/mci_host/mci_sdif/sdif_device.rs:432:16\n    |\n432 |         if let Some(_) = content.data() {\n    |         -------^^^^^^^----------------- help: try: `if content.data().is_some()`\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_pattern_matching\n\n",
              "warning: redundant pattern matching, consider using `is_err()`\n   --> src/mci_host/mci_sdif/sdif_device.rs:442:16\n    |\n442 |         if let Err(_) = self.hc.borrow_mut().cmd_response_get(&mut cmd_data) {\n    |         -------^^^^^^------------------------------------------------------- help: try: `if self.hc.borrow_mut().cmd_response_get(&mut cmd_data).is_err()`\n    |\n    = note: this will change drop order of the result, as well as all temporaries\n    = note: add `#[allow(clippy::redundant_pattern_matching)]` if this is important\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_pattern_matching\n\n"
            ],
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 11 to 11)\n+use super::consts::SDStatus;\n+use super::MCIHost;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 12 to 12)\n-use crate::mci::regs::MCIIntMask;\n+use crate::mci::consts::*;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 14 to 14)\n+use crate::mci::mci_dma::FSdifIDmaDesc;\n+use crate::mci::regs::MCIIntMask;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 15 to 15)\n+use crate::mci_host::constants::*;\n+use crate::mci_host::err::*;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 18 to 18)\n+use crate::mci_host::sd::consts::SdCmd;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 19 to 19)\n-use crate::osa::OSAEvent;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 21 to 21)\n+use crate::osa::OSAEvent;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 22 to 22)\n-use crate::{flush, mmap, sleep, IoPad};\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 24 to 30)\n-use super::consts::SDStatus;\n-use super::MCIHost;\n-use crate::mci_host::err::*;\n-use crate::mci_host::constants::*;\n-use crate::mci::consts::*;\n-use crate::mci_host::sd::consts::SdCmd;\n-use crate::mci::mci_dma::FSdifIDmaDesc;\n+use crate::{flush, mmap, sleep, IoPad};\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 56 to 57)\n-            \"rw_desc buffer at {:x}, pa {:x}\", \n-            rw_desc.addr().as_ptr() as usize, \n+            \"rw_desc buffer at {:x}, pa {:x}\",\n+            rw_desc.addr().as_ptr() as usize,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 69 to 69)\n-    pub fn iopad_set(&self,iopad:IoPad) {\n+    pub fn iopad_set(&self, iopad: IoPad) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 77 to 77)\n-        self.hc.borrow().cur_cmd().as_ref().unwrap().get_data().is_some()\n+        self.hc\n+            .borrow()\n+            .cur_cmd()\n+            .as_ref()\n+            .unwrap()\n+            .get_data()\n+            .is_some()\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 82 to 83)\n-    pub fn init(&self, addr: NonNull<u8>,host:&MCIHost) -> MCIHostStatus {\n-        let num_of_desc = host.config.max_trans_size/host.config.def_block_size;\n+    pub fn init(&self, addr: NonNull<u8>, host: &MCIHost) -> MCIHostStatus {\n+        let num_of_desc = host.config.max_trans_size / host.config.def_block_size;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 85 to 85)\n-        self.do_init(addr,host)?;\n+        self.do_init(addr, host)?;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 89 to 89)\n-    fn do_init(&self,addr: NonNull<u8>,host:&MCIHost) -> MCIHostStatus {\n+    fn do_init(&self, addr: NonNull<u8>, host: &MCIHost) -> MCIHostStatus {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 92 to 92)\n-        let iopad = self.hc.borrow_mut().iopad_take().ok_or(MCIHostError::NoData)?;\n+        let iopad = self\n+            .hc\n+            .borrow_mut()\n+            .iopad_take()\n+            .ok_or(MCIHostError::NoData)?;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 96 to 96)\n-        \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 99 to 99)\n-        restart_mci.restart().unwrap_or_else(|e| error!(\"restart failed: {:?}\", e));\n+        restart_mci\n+            .restart()\n+            .unwrap_or_else(|e| error!(\"restart failed: {:?}\", e));\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 107 to 107)\n-            if let Err(_) = self.hc.borrow_mut().set_idma_list(&self.rw_desc, self.desc_num.get()) {\n+            if let Err(_) = self\n+                .hc\n+                .borrow_mut()\n+                .set_idma_list(&self.rw_desc, self.desc_num.get())\n+            {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 131 to 131)\n-    pub fn switch_to_voltage(&self, voltage: MCIHostOperationVoltage,host:&MCIHost) -> MCIHostStatus {\n+    pub fn switch_to_voltage(\n+        &self,\n+        voltage: MCIHostOperationVoltage,\n+        host: &MCIHost,\n+    ) -> MCIHostStatus {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 137 to 137)\n-            },\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 142 to 142)\n-            },\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 147 to 147)\n-            },\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 155 to 155)\n-    pub fn execute_tuning(&self, _tuning_cmd: u32, _rev_buf: &mut Vec<u32>, _block_size: u32) -> MCIHostStatus {\n+    pub fn execute_tuning(\n+        &self,\n+        _tuning_cmd: u32,\n+        _rev_buf: &mut Vec<u32>,\n+        _block_size: u32,\n+    ) -> MCIHostStatus {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 175 to 177)\n-    pub fn convert_data_to_little_endian(&self, data: &mut Vec<u32>, word_size: usize, format: MCIHostDataPacketFormat,host:&MCIHost) -> MCIHostStatus {\n-        if host.config.endian_mode == MCIHostEndianMode::Little && \n-             format == MCIHostDataPacketFormat::MSBFirst {\n+    pub fn convert_data_to_little_endian(\n+        &self,\n+        data: &mut Vec<u32>,\n+        word_size: usize,\n+        format: MCIHostDataPacketFormat,\n+        host: &MCIHost,\n+    ) -> MCIHostStatus {\n+        if host.config.endian_mode == MCIHostEndianMode::Little\n+            && format == MCIHostDataPacketFormat::MSBFirst\n+        {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 187 to 188)\n-        } else if host.config.endian_mode == MCIHostEndianMode::Big &&\n-            format == MCIHostDataPacketFormat::LSBFirst {\n+        } else if host.config.endian_mode == MCIHostEndianMode::Big\n+            && format == MCIHostDataPacketFormat::LSBFirst\n+        {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 193 to 193)\n-        }   \n+        }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 195 to 195)\n-     }\n+    }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 198 to 198)\n-         Ok(())\n+        Ok(())\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 201 to 203)\n-    pub fn card_power_set(&self, _enable: bool) {\n-        \n-    }\n+    pub fn card_power_set(&self, _enable: bool) {}\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 205 to 205)\n-    fn card_int_enable(&self, enable: bool, host:&MCIHost) -> MCIHostStatus {\n+    fn card_int_enable(&self, enable: bool, host: &MCIHost) -> MCIHostStatus {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 207 to 207)\n-            self.hc.borrow().interrupt_mask_set(MCIIntrType::GeneralIntr, MCIIntMask::SDIO_BIT.bits(), enable);\n+            self.hc.borrow().interrupt_mask_set(\n+                MCIIntrType::GeneralIntr,\n+                MCIIntMask::SDIO_BIT.bits(),\n+                enable,\n+            );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 212 to 212)\n-    fn card_int_init(&self, _sdio_int: &MCIHostCardIntFn) ->MCIHostStatus {\n+    fn card_int_init(&self, _sdio_int: &MCIHostCardIntFn) -> MCIHostStatus {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 221 to 221)\n-            },\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 225 to 225)\n-            },\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 229 to 229)\n-            },\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 233 to 233)\n-    pub fn card_detect_status_polling(&self, wait_card_status: SDStatus, _timeout: u32, host:&MCIHost) -> MCIHostStatus {\n+    pub fn card_detect_status_polling(\n+        &self,\n+        wait_card_status: SDStatus,\n+        _timeout: u32,\n+        host: &MCIHost,\n+    ) -> MCIHostStatus {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 236 to 236)\n-        let mut retry_times:usize = 100;\n+        let mut retry_times: usize = 100;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 268 to 270)\n-    pub fn card_active_send(&self) {\n-        \n-    }\n+    pub fn card_active_send(&self) {}\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 272 to 273)\n-    pub fn card_clock_set(&self, target_clock: u32, host:&MCIHost) -> u32 {\n-            \n+    pub fn card_clock_set(&self, target_clock: u32, host: &MCIHost) -> u32 {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 286 to 286)\n-        \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 298 to 298)\n-    fn pre_command(&self,content: &mut MCIHostTransfer, host:&MCIHost) -> MCIHostStatus {\n+    fn pre_command(&self, content: &mut MCIHostTransfer, host: &MCIHost) -> MCIHostStatus {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 301 to 301)\n-            None => return Err(MCIHostError::NoData)\n+            None => return Err(MCIHostError::NoData),\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 309 to 311)\n-        if cmd.index() == MCIHostCommonCmd::ReadMultipleBlock as u32 ||\n-            cmd.index() == MCIHostCommonCmd::WriteMultipleBlock as u32 {\n-           let block_count = data.block_count();\n+        if cmd.index() == MCIHostCommonCmd::ReadMultipleBlock as u32\n+            || cmd.index() == MCIHostCommonCmd::WriteMultipleBlock as u32\n+        {\n+            let block_count = data.block_count();\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 313 to 313)\n-           if block_count > 1 {\n+            if block_count > 1 {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 315 to 315)\n-           }\n+            }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 334 to 336)\n-        if index == MCIHostCommonCmd::GoInactiveState as u32 || \n-            (index == MCISDIOCommand::RWIODirect as u32 && \n-            (arg >> 9 & 0x1FFFF) == MCISDIOCCCRAddr::IOAbort as u32 ){\n+        if index == MCIHostCommonCmd::GoInactiveState as u32\n+            || (index == MCISDIOCommand::RWIODirect as u32\n+                && (arg >> 9 & 0x1FFFF) == MCISDIOCCCRAddr::IOAbort as u32)\n+        {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 349 to 350)\n-            if response_type != MCIHostResponseType::R3 && \n-                response_type != MCIHostResponseType::R4 {\n+            if response_type != MCIHostResponseType::R3 && response_type != MCIHostResponseType::R4\n+            {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 365 to 365)\n-            \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 378 to 378)\n-            \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 385 to 386)\n-            flush(NonNull::new(buf.as_ptr() as *mut u8).unwrap(), buf.len() * size_of::<u32>());\n-            debug!(\"in covert command info, buf va {:p}, pa {:x}\", buf.as_ptr(), bus_addr);\n+            flush(\n+                NonNull::new(buf.as_ptr() as *mut u8).unwrap(),\n+                buf.len() * size_of::<u32>(),\n+            );\n+            debug!(\n+                \"in covert command info, buf va {:p}, pa {:x}\",\n+                buf.as_ptr(),\n+                bus_addr\n+            );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 401 to 403)\n-        unsafe { dsb(); }\n-        \n-        out_trans\n+        unsafe {\n+            dsb();\n+        }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 405 to 405)\n+        out_trans\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 407 to 408)\n-    #[cfg(feature=\"poll\")]\n-    pub fn transfer_function(&self,content: &mut MCIHostTransfer, host:&MCIHost) -> MCIHostStatus {\n+    #[cfg(feature = \"poll\")]\n+    pub fn transfer_function(\n+        &self,\n+        content: &mut MCIHostTransfer,\n+        host: &MCIHost,\n+    ) -> MCIHostStatus {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 411 to 411)\n-        self.pre_command(content,host)?;\n+        self.pre_command(content, host)?;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 430 to 430)\n-        unsafe { dsb(); }\n+        unsafe {\n+            dsb();\n+        }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 434 to 434)\n-            invalidate(NonNull::new(data.buf().unwrap().as_ptr() as *mut u8).unwrap(), data.buf().unwrap().len() * 4);\n+            invalidate(\n+                NonNull::new(data.buf().unwrap().as_ptr() as *mut u8).unwrap(),\n+                data.buf().unwrap().len() * 4,\n+            );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 449 to 449)\n-                cmd.response_mut().copy_from_slice(&cmd_data.get_response()[..4]);\n+                cmd.response_mut()\n+                    .copy_from_slice(&cmd_data.get_response()[..4]);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 456 to 457)\n-    #[cfg(feature=\"irq\")]\n-    pub fn transfer_function(&self, content: &mut MCIHostTransfer, host: &MCIHost) -> MCIHostStatus {\n+    #[cfg(feature = \"irq\")]\n+    pub fn transfer_function(\n+        &self,\n+        content: &mut MCIHostTransfer,\n+        host: &MCIHost,\n+    ) -> MCIHostStatus {\n+        use crate::aarch::invalidate;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 459 to 460)\n-            mci::regs::MCIRawInts, \n-            osa::consts::{SDMMC_OSA_EVENT_FLAG_AND, SDMMC_OSA_EVENT_TRANSFER_CMD_SUCCESS, SDMMC_OSA_EVENT_TRANSFER_DATA_SUCCESS}\n+            mci::regs::MCIRawInts,\n+            osa::consts::{\n+                SDMMC_OSA_EVENT_FLAG_AND, SDMMC_OSA_EVENT_TRANSFER_CMD_SUCCESS,\n+                SDMMC_OSA_EVENT_TRANSFER_DATA_SUCCESS,\n+            },\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 462 to 462)\n-        use crate::aarch::invalidate;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 491 to 492)\n-        if self.hc_evt.borrow().osa_event_wait(complete_events, COMMAND_TIMEOUT, &mut events, SDMMC_OSA_EVENT_FLAG_AND).is_err() ||\n-            events != complete_events\n+        if self\n+            .hc_evt\n+            .borrow()\n+            .osa_event_wait(\n+                complete_events,\n+                COMMAND_TIMEOUT,\n+                &mut events,\n+                SDMMC_OSA_EVENT_FLAG_AND,\n+            )\n+            .is_err()\n+            || events != complete_events\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 499 to 499)\n-        \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 515 to 515)\n-            invalidate(NonNull::new(data.buf().unwrap().as_ptr() as *mut u8).unwrap(), data.buf().unwrap().len() * 4);\n+            invalidate(\n+                NonNull::new(data.buf().unwrap().as_ptr() as *mut u8).unwrap(),\n+                data.buf().unwrap().len() * 4,\n+            );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 529 to 529)\n-\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 532 to 532)\n-                cmd.response_mut().copy_from_slice(&cmd_data.get_response()[..]);\n+                cmd.response_mut()\n+                    .copy_from_slice(&cmd_data.get_response()[..]);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 536 to 536)\n-        if content.cmd().unwrap().response()[0] & content.cmd().unwrap().response_error_flags().bits() != 0 {\n+        if content.cmd().unwrap().response()[0]\n+            & content.cmd().unwrap().response_error_flags().bits()\n+            != 0\n+        {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/sdif_device.rs (original lines from 543 to 543)\n+\n"
            ]
          }
        },
        {
          "file": "src/mci/mod.rs",
          "features": "",
          "count": 71,
          "kinds": {
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 4 to 4)\n-pub mod regs;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 6 to 6)\n+pub mod regs;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 7 to 8)\n-mod mci_timing;\n-mod mci_config;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 10 to 10)\n+mod mci_cmddata;\n+mod mci_config;\n+pub mod mci_data;\n+pub mod mci_dma;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 12 to 13)\n-pub mod mci_data;\n-mod mci_cmddata;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 15 to 15)\n-pub mod mci_dma;\n+mod mci_timing;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 18 to 18)\n-use err::*;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 20 to 21)\n-use mci_dma::{FSdifIDmaDescList, FSdifIDmaDesc};\n-use regs::*;\n+use err::*;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 23 to 23)\n+use mci_dma::{FSdifIDmaDesc, FSdifIDmaDescList};\n+use regs::*;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 26 to 26)\n-pub use mci_timing::*;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 29 to 29)\n+pub use mci_timing::*;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 48 to 48)\n-    \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 102 to 102)\n-\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 117 to 117)\n-    pub fn config_init(&mut self,config: &MCIConfig) -> MCIResult {\n+    pub fn config_init(&mut self, config: &MCIConfig) -> MCIResult {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 135 to 135)\n-        \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 144 to 144)\n-        reg.clear_reg(MCIUhsReg::VOLT_180);/* 恢复为3.3v默认电压 */\n+        reg.clear_reg(MCIUhsReg::VOLT_180); /* 恢复为3.3v默认电压 */\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 173 to 173)\n-    /// Set the Card clock freqency \n+    /// Set the Card clock freqency\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 179 to 179)\n-        let cur_cmd_index =  cmd_reg.index_get();\n+        let cur_cmd_index = cmd_reg.index_get();\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 181 to 181)\n-        info!(\"Set clk as {}\",clk_hz);\n+        info!(\"Set clk as {}\", clk_hz);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 188 to 194)\n-            let target_timing = \n-                MCIConfig::get_tuning(\n-                    clk_hz.into(),\n-                    self.config.non_removable()).ok_or_else(|| {\n-                        error!(\"No available timing !!!\");\n-                        MCIError::InvalidTiming\n-                    })?;\n+            let target_timing = MCIConfig::get_tuning(clk_hz.into(), self.config.non_removable())\n+                .ok_or_else(|| {\n+                error!(\"No available timing !!!\");\n+                MCIError::InvalidTiming\n+            })?;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 200 to 200)\n-           \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 204 to 210)\n-            if let Err(err) = \n-                if cur_cmd_index == Self::SWITCH_VOLTAGE as u32 {\n-                    self.private_cmd11_send(reg_val | cmd_reg)\n-                } else {\n-                    info!(\"updating clock, reg_val 0x{:x}\", reg_val.bits());\n-                    self.private_cmd_send(reg_val, 0)\n-                }{\n+            if let Err(err) = if cur_cmd_index == Self::SWITCH_VOLTAGE as u32 {\n+                self.private_cmd11_send(reg_val | cmd_reg)\n+            } else {\n+                info!(\"updating clock, reg_val 0x{:x}\", reg_val.bits());\n+                self.private_cmd_send(reg_val, 0)\n+            } {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 218 to 218)\n-            info!(\"clk_src: 0x{:x} clk_div: 0x{:x}, shift: 0x{:x}\",\n+            info!(\n+                \"clk_src: 0x{:x} clk_div: 0x{:x}, shift: 0x{:x}\",\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 221 to 221)\n-                reg.read_reg::<MCIEnableShift>());\n+                reg.read_reg::<MCIEnableShift>()\n+            );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 226 to 226)\n-            \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 230 to 230)\n-                info!(\"updating clock for clock divider, reg_val 0x{:x}\", reg_val.bits());\n+                info!(\n+                    \"updating clock for clock divider, reg_val 0x{:x}\",\n+                    reg_val.bits()\n+                );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 278 to 278)\n-        self.config.reg().write_reg(MCIRawInts::from_bits_truncate(0xFFFFE));\n+        self.config\n+            .reg()\n+            .write_reg(MCIRawInts::from_bits_truncate(0xFFFFE));\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 284 to 285)\n-        self.config.reg().modify_reg(|reg| { MCICtrl::USE_INTERNAL_DMAC | reg });\n-        self.config.reg().modify_reg(|reg| { MCIBusMode::DE | reg });\n+        self.config\n+            .reg()\n+            .modify_reg(|reg| MCICtrl::USE_INTERNAL_DMAC | reg);\n+        self.config.reg().modify_reg(|reg| MCIBusMode::DE | reg);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 298 to 298)\n-    /// Wait DMA transfer finished by poll \n+    /// Wait DMA transfer finished by poll\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 324 to 324)\n-            \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 344 to 344)\n-                unsafe { dsb(); }\n+                unsafe {\n+                    dsb();\n+                }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 353 to 353)\n-    /// Start command and data transfer in PIO mode \n+    /// Start command and data transfer in PIO mode\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 360 to 360)\n-        if !self.is_ready{\n+        if !self.is_ready {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 382 to 382)\n-  \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 387 to 387)\n-                error!(\"Fifo do not support writing more than {:x}.\",MCI_MAX_FIFO_CNT);\n+                error!(\n+                    \"Fifo do not support writing more than {:x}.\",\n+                    MCI_MAX_FIFO_CNT\n+                );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 396 to 396)\n-            if !read { \n+            if !read {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 406 to 407)\n-    /// Wait PIO transfer finished by poll \n-    pub fn poll_wait_pio_end(&mut self,cmd_data: &mut MCICmdData) -> MCIResult{\n+    /// Wait PIO transfer finished by poll\n+    pub fn poll_wait_pio_end(&mut self, cmd_data: &mut MCICmdData) -> MCIResult {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 422 to 428)\n-        if let Err(err) = reg.retry_for(|reg: MCIRawInts|{\n-            let result = reg.contains(MCIRawInts::CMD_BIT);\n-            MCI::relax_handler();\n-            result\n-        }, Some(RETRIES_TIMEOUT)){\n-            error!(\"wait cmd done timeout, raw ints: 0x{:x}\",\n-                    self.raw_status_get());\n+        if let Err(err) = reg.retry_for(\n+            |reg: MCIRawInts| {\n+                let result = reg.contains(MCIRawInts::CMD_BIT);\n+                MCI::relax_handler();\n+                result\n+            },\n+            Some(RETRIES_TIMEOUT),\n+        ) {\n+            error!(\n+                \"wait cmd done timeout, raw ints: 0x{:x}\",\n+                self.raw_status_get()\n+            );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 435 to 438)\n-            if let Err(err)=reg.retry_for(|reg|{\n-                MCI::relax_handler();\n-                (MCIRawInts::DTO_BIT & reg).bits() != 0\n-            }, Some(RETRIES_TIMEOUT)){\n+            if let Err(err) = reg.retry_for(\n+                |reg| {\n+                    MCI::relax_handler();\n+                    (MCIRawInts::DTO_BIT & reg).bits() != 0\n+                },\n+                Some(RETRIES_TIMEOUT),\n+            ) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 445 to 447)\n-            info!(\"card cnt: 0x{:x}, fifo cnt: 0x{:x}\",\n-                   reg.read_reg::<MCITranCardCnt>(),\n-                   reg.read_reg::<MCITranFifoCnt>());\n+            info!(\n+                \"card cnt: 0x{:x}, fifo cnt: 0x{:x}\",\n+                reg.read_reg::<MCITranCardCnt>(),\n+                reg.read_reg::<MCITranFifoCnt>()\n+            );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 455 to 455)\n-    /// Reset controller from error state \n+    /// Reset controller from error state\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 457 to 457)\n-\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 480 to 480)\n-    /// Dump all register value of SDIF instance \n+    /// Dump all register value of SDIF instance\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 528 to 532)\n-    /// Dump command and data info \n-    pub fn cmd_info_dump(cmd_data: &MCICmdData){\n-        debug!(\"cmd struct @{:p}\",cmd_data);\n-        debug!(\"   opcode: {}\",cmd_data.cmdidx());\n-        debug!(\"   arg: 0x{:x}\",cmd_data.cmdarg());\n+    /// Dump command and data info\n+    pub fn cmd_info_dump(cmd_data: &MCICmdData) {\n+        debug!(\"cmd struct @{:p}\", cmd_data);\n+        debug!(\"   opcode: {}\", cmd_data.cmdidx());\n+        debug!(\"   arg: 0x{:x}\", cmd_data.cmdarg());\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 534 to 542)\n-        debug!(\"   resp@{:p}: 0x{:x} 0x{:x} 0x{:x} 0x{:x}\",\n-                response,\n-                response[0],\n-                response[1],\n-                response[2],\n-                response[3]);\n-        debug!(\"   flag: 0x{:x}\",cmd_data.flag());\n-        debug!(\"   data @{:p}\",cmd_data.get_data().unwrap());\n-        \n+        debug!(\n+            \"   resp@{:p}: 0x{:x} 0x{:x} 0x{:x} 0x{:x}\",\n+            response, response[0], response[1], response[2], response[3]\n+        );\n+        debug!(\"   flag: 0x{:x}\", cmd_data.flag());\n+        debug!(\"   data @{:p}\", cmd_data.get_data().unwrap());\n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 544 to 546)\n-            debug!(\"   buf: {:p}, len: {}\",data,data.datalen());\n-            debug!(\"   blk sz: {}\",data.blksz());\n-            debug!(\"   blk cnt: {}\",data.blkcnt());\n+            debug!(\"   buf: {:p}, len: {}\", data, data.datalen());\n+            debug!(\"   blk sz: {}\", data.blksz());\n+            debug!(\"   blk cnt: {}\", data.blkcnt());\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 551 to 552)\n-\n-/// MCI private API \n+/// MCI private API\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 558 to 561)\n-            MCIFifoThDMATransSize::DMATrans8, \n-            MCIFifoTh::RX_WMARK, \n-            MCIFifoTh::TX_WMARK);  \n-        \n+            MCIFifoThDMATransSize::DMATrans8,\n+            MCIFifoTh::RX_WMARK,\n+            MCIFifoTh::TX_WMARK,\n+        );\n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 564 to 564)\n-    \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 575 to 576)\n-        self.power_set(true);  \n-        self.clock_set(true); \n+        self.power_set(true);\n+        self.clock_set(true);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 580 to 580)\n-        self.voltage_1_8v_set(false);  \n+        self.voltage_1_8v_set(false);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 586 to 592)\n-        if let Err(err) = \n-            if self.config.trans_mode() == MCITransMode::DMA {\n-                self.ctrl_reset(MCICtrl::FIFO_RESET | MCICtrl::DMA_RESET)\n-            } else {\n-                self.ctrl_reset(MCICtrl::FIFO_RESET)\n-            } \n-        {\n+        if let Err(err) = if self.config.trans_mode() == MCITransMode::DMA {\n+            self.ctrl_reset(MCICtrl::FIFO_RESET | MCICtrl::DMA_RESET)\n+        } else {\n+            self.ctrl_reset(MCICtrl::FIFO_RESET)\n+        } {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 603 to 603)\n-        /* clear interrupt status */  \n+        /* clear interrupt status */\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 613 to 613)\n-        \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 616 to 616)\n-        \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 619 to 621)\n-            MCITimeout::MAX_DATA_TIMEOUT, \n-            MCITimeout::MAX_RESP_TIMEOUT));\n-        \n+            MCITimeout::MAX_DATA_TIMEOUT,\n+            MCITimeout::MAX_RESP_TIMEOUT,\n+        ));\n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 637 to 637)\n-           warn!(\"Card is busy, waiting ...\");\n+            warn!(\"Card is busy, waiting ...\");\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 639 to 643)\n-        if let Err(err) =reg.retry_for(|reg: MCIStatus|{\n-            let result = !reg.contains(busy_bits);\n-            MCI::relax_handler();\n-            result\n-        }, Some(RETRIES_TIMEOUT)){\n+        if let Err(err) = reg.retry_for(\n+            |reg: MCIStatus| {\n+                let result = !reg.contains(busy_bits);\n+                MCI::relax_handler();\n+                result\n+            },\n+            Some(RETRIES_TIMEOUT),\n+        ) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 655 to 658)\n-        reg.retry_for(|reg_val: MCIStatus|{\n-            reg.set_reg(MCICtrl::CONTROLLER_RESET);\n-            !reg_val.contains(MCIStatus::DATA_BUSY)\n-        }, Some(RETRIES_TIMEOUT))?;\n+        reg.retry_for(\n+            |reg_val: MCIStatus| {\n+                reg.set_reg(MCICtrl::CONTROLLER_RESET);\n+                !reg_val.contains(MCIStatus::DATA_BUSY)\n+            },\n+            Some(RETRIES_TIMEOUT),\n+        )?;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 667 to 669)\n-        reg.retry_for(|reg|{\n-            (MCICmd::START & reg).bits() == 0\n-        }, Some(RETRIES_TIMEOUT))?;\n+        reg.retry_for(\n+            |reg| (MCICmd::START & reg).bits() == 0,\n+            Some(RETRIES_TIMEOUT),\n+        )?;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mod.rs (original lines from 687 to 687)\n+\n"
            ],
            "Clippy(Warn)": [
              "warning: redundant pattern matching, consider using `is_ok()`\n   --> src/mci/mod.rs:124:16\n    |\n124 |         if let Ok(_) = self.reset() {\n    |         -------^^^^^--------------- help: try: `if self.reset().is_ok()`\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_pattern_matching\n    = note: `#[warn(clippy::redundant_pattern_matching)]` on by default\n\n",
              "warning: casting to the same type is unnecessary (`u32` -> `u32`)\n   --> src/mci/mod.rs:205:37\n    |\n205 |                 if cur_cmd_index == Self::SWITCH_VOLTAGE as u32 {\n    |                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `Self::SWITCH_VOLTAGE`\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_cast\n\n",
              "warning: casting to the same type is unnecessary (`u32` -> `u32`)\n   --> src/mci/mod.rs:227:33\n    |\n227 |             if cur_cmd_index == Self::SWITCH_VOLTAGE as u32 {\n    |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `Self::SWITCH_VOLTAGE`\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_cast\n\n",
              "warning: casting to the same type is unnecessary (`u32` -> `u32`)\n   --> src/mci/mod.rs:239:33\n    |\n239 |             if cur_cmd_index == Self::SWITCH_VOLTAGE as u32 {\n    |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `Self::SWITCH_VOLTAGE`\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_cast\n\n",
              "warning: this expression creates a reference which is immediately dereferenced by the compiler\n   --> src/mci/mod.rs:256:26\n    |\n256 |         self.cur_cmd_set(&cmd_data);\n    |                          ^^^^^^^^^ help: change this to: `cmd_data`\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_borrow\n\n",
              "warning: this expression creates a reference which is immediately dereferenced by the compiler\n   --> src/mci/mod.rs:293:27\n    |\n293 |         self.cmd_transfer(&cmd_data)?;\n    |                           ^^^^^^^^^ help: change this to: `cmd_data`\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_borrow\n\n",
              "warning: casting to the same type is unnecessary (`u32` -> `u32`)\n   --> src/mci/mod.rs:392:34\n    |\n392 |             self.trans_bytes_set(data.datalen() as u32);\n    |                                  ^^^^^^^^^^^^^^^^^^^^^ help: try: `data.datalen()`\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_cast\n\n",
              "warning: equality checks against false can be replaced by a negation\n   --> src/mci/mod.rs:458:12\n    |\n458 |         if false == self.is_ready {\n    |            ^^^^^^^^^^^^^^^^^^^^^^ help: try simplifying it as shown: `!self.is_ready`\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#bool_comparison\n    = note: `#[warn(clippy::bool_comparison)]` on by default\n\n",
              "warning: using `clone` on type `MCIStatus` which implements the `Copy` trait\n   --> src/mci/mod.rs:636:29\n    |\n636 |         if reg_val.contains(busy_bits.clone()) {\n    |                             ^^^^^^^^^^^^^^^^^ help: try removing the `clone` call: `busy_bits`\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#clone_on_copy\n\n"
            ],
            "Clippy(Error)": [
              "error: this comparison involving the minimum or maximum element for this type contains a case that is always true or always false\n   --> src/mci/mod.rs:336:48\n    |\n336 |         if wait_bits & reg_val != wait_bits && delay <= 0 {\n    |                                                ^^^^^^^^^^\n    |\n    = help: because `0` is the minimum value for this type, the case where the two sides are not equal never occurs, consider using `delay == 0` instead\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#absurd_extreme_comparisons\n    = note: `#[deny(clippy::absurd_extreme_comparisons)]` on by default\n\n"
            ]
          }
        },
        {
          "file": "src/mci_host/mod.rs",
          "features": "",
          "count": 39,
          "kinds": {
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 2 to 2)\n-\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 4 to 4)\n+mod err;\n+mod mci_card_base;\n+mod mci_host_card_detect;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 7 to 7)\n-mod err;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 9 to 10)\n-mod mci_card_base;\n-mod mci_host_card_detect;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 28 to 31)\n-    pub(crate) config: MCIHostConfig,                  \n-    pub(crate) curr_voltage: Cell<MCIHostOperationVoltage>,  \n-    pub(crate) curr_bus_width: u32,                    \n-    pub(crate) curr_clock_freq: Cell<u32>,                   \n+    pub(crate) config: MCIHostConfig,\n+    pub(crate) curr_voltage: Cell<MCIHostOperationVoltage>,\n+    pub(crate) curr_bus_width: u32,\n+    pub(crate) curr_clock_freq: Cell<u32>,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 33 to 37)\n-    pub(crate) source_clock_hz: u32,                   \n-    pub(crate) capability: MCIHostCapability,          \n-    pub(crate) max_block_count: Cell<u32>,                   \n-    pub(crate) max_block_size: u32,                    \n-    pub(crate) tuning_type: u8,                        \n+    pub(crate) source_clock_hz: u32,\n+    pub(crate) capability: MCIHostCapability,\n+    pub(crate) max_block_count: Cell<u32>,\n+    pub(crate) max_block_size: u32,\n+    pub(crate) tuning_type: u8,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 39 to 39)\n-    pub(crate) cd: Option<Rc<MCIHostCardDetect>>,         // 卡检测\n+    pub(crate) cd: Option<Rc<MCIHostCardDetect>>, // 卡检测\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 41 to 41)\n-\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 64 to 64)\n-    pub(crate) fn card_select(&self,relative_address:u32,is_selected:bool) -> MCIHostStatus {\n+    pub(crate) fn card_select(&self, relative_address: u32, is_selected: bool) -> MCIHostStatus {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 79 to 80)\n-        let err = self.dev.transfer_function(&mut content,self);\n-        \n+        let err = self.dev.transfer_function(&mut content, self);\n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 84 to 84)\n-        if err.is_err() || response[0] & MCIHostCardStatusFlag::ALL_ERROR_FLAG.bits() != 0{\n+        if err.is_err() || response[0] & MCIHostCardStatusFlag::ALL_ERROR_FLAG.bits() != 0 {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 93 to 93)\n-    \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 97 to 97)\n-    \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 100 to 102)\n-    \n-        let err = self.dev.transfer_function(&mut content,self);\n-        \n+\n+        let err = self.dev.transfer_function(&mut content, self);\n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 105 to 105)\n-    \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 109 to 109)\n-    \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 113 to 113)\n-    \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 116 to 117)\n- \n-    pub(crate) fn block_count_set(&self,block_count:u32) -> MCIHostStatus {\n+\n+    pub(crate) fn block_count_set(&self, block_count: u32) -> MCIHostStatus {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 126 to 127)\n-        \n-        let err = self.dev.transfer_function(&mut content,self);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 129 to 129)\n+        let err = self.dev.transfer_function(&mut content, self);\n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 132 to 132)\n-        if err.is_err() || response[0] & MCIHostCardStatusFlag::ALL_ERROR_FLAG.bits() != 0{\n+        if err.is_err() || response[0] & MCIHostCardStatusFlag::ALL_ERROR_FLAG.bits() != 0 {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 141 to 141)\n-    \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 143 to 143)\n-        \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 146 to 148)\n-        \n-        let err = self.dev.transfer_function(&mut content,self);\n-        \n+\n+        let err = self.dev.transfer_function(&mut content, self);\n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 152 to 152)\n-        \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 158 to 158)\n-    \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 162 to 162)\n-    \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 165 to 167)\n-        \n-        let err = self.dev.transfer_function(&mut content,self);\n-        \n+\n+        let err = self.dev.transfer_function(&mut content, self);\n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 170 to 170)\n-    \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 174 to 174)\n-    \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 177 to 177)\n-    \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 180 to 180)\n-    \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 184 to 184)\n-    \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 187 to 187)\n-        \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 189 to 189)\n-        \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 193 to 193)\n-    \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 198 to 198)\n-        self.dev.init(addr,self)\n+        self.dev.init(addr, self)\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mod.rs (original lines from 200 to 200)\n-\n"
            ],
            "Clippy(Warn)": [
              "warning: empty line after outer attribute\n --> src/mci_host/mod.rs:1:1\n  |\n1 | / #[allow(unused)]\n2 | |\n  | |_^\n3 |   mod constants;\n  |   ------------- the attribute applies to this module\n  |\n  = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#empty_line_after_outer_attr\n  = note: `#[warn(clippy::empty_line_after_outer_attr)]` on by default\n  = help: if the empty line is unintentional, remove it\nhelp: if the attribute should apply to the parent module use an inner attribute\n  |\n1 | #![allow(unused)]\n  |  +\n\n"
            ]
          }
        },
        {
          "file": "src/iopad/constants.rs",
          "features": "",
          "count": 31,
          "kinds": {
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/constants.rs (original lines from 1 to 2)\n-#[derive(Debug)]\n-#[derive(Clone, Copy)]\n+#[derive(Debug, Clone, Copy)]\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/constants.rs (original lines from 13 to 13)\n-    NumOfFunc\n+    NumOfFunc,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/constants.rs (original lines from 27 to 27)\n-            _ => panic!(\"Invalid value for FioPadFunc\")\n+            _ => panic!(\"Invalid value for FioPadFunc\"),\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/constants.rs (original lines from 43 to 43)\n-            _ => panic!(\"Invalid value for FioPadFunc\")\n+            _ => panic!(\"Invalid value for FioPadFunc\"),\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/constants.rs (original lines from 48 to 49)\n-#[derive(Debug)]\n-#[derive(Clone, Copy)]\n+#[derive(Debug, Clone, Copy)]\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/constants.rs (original lines from 68 to 68)\n-    NumOfDrive\n+    NumOfDrive,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/constants.rs (original lines from 90 to 90)\n-            _ => panic!(\"Invalid value for FioPadDrive\")\n+            _ => panic!(\"Invalid value for FioPadDrive\"),\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/constants.rs (original lines from 114 to 114)\n-            _ => panic!(\"Invalid value for FioPadDrive\")\n+            _ => panic!(\"Invalid value for FioPadDrive\"),\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/constants.rs (original lines from 119 to 120)\n-#[derive(Debug)]\n-#[derive(Clone, Copy)]\n+#[derive(Debug, Clone, Copy)]\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/constants.rs (original lines from 126 to 126)\n-    NumOfPull\n+    NumOfPull,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/constants.rs (original lines from 135 to 135)\n-            _ => panic!(\"Invalid value for FioPadPull\")\n+            _ => panic!(\"Invalid value for FioPadPull\"),\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/constants.rs (original lines from 146 to 146)\n-            _ => panic!(\"Invalid value for FioPadPull\")\n+            _ => panic!(\"Invalid value for FioPadPull\"),\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/constants.rs (original lines from 155 to 155)\n-            _ => false\n+            _ => false,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/constants.rs (original lines from 162 to 162)\n-            _ => false\n+            _ => false,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/constants.rs (original lines from 169 to 169)\n-            _ => false\n+            _ => false,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/constants.rs (original lines from 174 to 175)\n-#[derive(Debug)]\n-#[derive(PartialEq)]\n+#[derive(Debug, PartialEq)]\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/constants.rs (original lines from 180 to 180)\n-    NumOfDelayDir\n+    NumOfDelayDir,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/constants.rs (original lines from 183 to 184)\n-#[derive(Debug)]\n-#[derive(PartialEq)]\n+#[derive(Debug, PartialEq)]\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/constants.rs (original lines from 189 to 189)\n-    NumOfDelayType\n+    NumOfDelayType,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/constants.rs (original lines from 192 to 193)\n-#[derive(Debug)]\n-#[derive(Clone, Copy)]\n+#[derive(Debug, Clone, Copy)]\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/constants.rs (original lines from 204 to 204)\n-    NumOfDelay\n+    NumOfDelay,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/constants.rs (original lines from 218 to 218)\n-            _ => panic!(\"Invalid value for FioPadDelay\")\n+            _ => panic!(\"Invalid value for FioPadDelay\"),\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/constants.rs (original lines from 234 to 234)\n-            _ => panic!(\"Invalid value for FioPadDelay\")\n+            _ => panic!(\"Invalid value for FioPadDelay\"),\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/constants.rs (original lines from 490 to 490)\n+\n"
            ],
            "Clippy(Warn)": [
              "warning: an implementation of `From` is preferred since it gives you `Into<_>` for free where the reverse isn't true\n  --> src/iopad/constants.rs:32:1\n   |\n32 | impl Into<u32> for FioPadFunc {\n   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n   |\n   = help: `impl From<Local> for Foreign` is allowed by the orphan rules, for more information see\n           https://doc.rust-lang.org/reference/items/implementations.html#trait-implementation-coherence\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#from_over_into\n   = note: `#[warn(clippy::from_over_into)]` on by default\nhelp: replace the `Into` implementation with `From<iopad::constants::FioPadFunc>`\n   |\n32 ~ impl From<FioPadFunc> for u32 {\n33 ~     fn from(val: FioPadFunc) -> Self {\n34 ~         match val {\n   |\n\n",
              "warning: an implementation of `From` is preferred since it gives you `Into<_>` for free where the reverse isn't true\n  --> src/iopad/constants.rs:95:1\n   |\n95 | impl Into<u32> for FioPadDrive {\n   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n   |\n   = help: `impl From<Local> for Foreign` is allowed by the orphan rules, for more information see\n           https://doc.rust-lang.org/reference/items/implementations.html#trait-implementation-coherence\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#from_over_into\nhelp: replace the `Into` implementation with `From<iopad::constants::FioPadDrive>`\n   |\n95 ~ impl From<FioPadDrive> for u32 {\n96 ~     fn from(val: FioPadDrive) -> Self {\n97 ~         match val {\n   |\n\n",
              "warning: an implementation of `From` is preferred since it gives you `Into<_>` for free where the reverse isn't true\n   --> src/iopad/constants.rs:140:1\n    |\n140 | impl Into<u32> for FioPadPull {\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n    = help: `impl From<Local> for Foreign` is allowed by the orphan rules, for more information see\n            https://doc.rust-lang.org/reference/items/implementations.html#trait-implementation-coherence\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#from_over_into\nhelp: replace the `Into` implementation with `From<iopad::constants::FioPadPull>`\n    |\n140 ~ impl From<FioPadPull> for u32 {\n141 ~     fn from(val: FioPadPull) -> Self {\n142 ~         match val {\n    |\n\n",
              "warning: match expression looks like `matches!` macro\n   --> src/iopad/constants.rs:153:9\n    |\n153 | /         match self {\n154 | |             FioPadPull::PullNone => true,\n155 | |             _ => false\n156 | |         }\n    | |_________^ help: try: `matches!(self, FioPadPull::PullNone)`\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_like_matches_macro\n    = note: `#[warn(clippy::match_like_matches_macro)]` on by default\n\n",
              "warning: match expression looks like `matches!` macro\n   --> src/iopad/constants.rs:160:9\n    |\n160 | /         match self {\n161 | |             FioPadPull::PullDown => true,\n162 | |             _ => false\n163 | |         }\n    | |_________^ help: try: `matches!(self, FioPadPull::PullDown)`\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_like_matches_macro\n\n",
              "warning: match expression looks like `matches!` macro\n   --> src/iopad/constants.rs:167:9\n    |\n167 | /         match self {\n168 | |             FioPadPull::PullUp => true,\n169 | |             _ => false\n170 | |         }\n    | |_________^ help: try: `matches!(self, FioPadPull::PullUp)`\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#match_like_matches_macro\n\n",
              "warning: an implementation of `From` is preferred since it gives you `Into<_>` for free where the reverse isn't true\n   --> src/iopad/constants.rs:223:1\n    |\n223 | impl Into<u32> for FioPadDelay {\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n    = help: `impl From<Local> for Foreign` is allowed by the orphan rules, for more information see\n            https://doc.rust-lang.org/reference/items/implementations.html#trait-implementation-coherence\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#from_over_into\nhelp: replace the `Into` implementation with `From<iopad::constants::FioPadDelay>`\n    |\n223 ~ impl From<FioPadDelay> for u32 {\n224 ~     fn from(val: FioPadDelay) -> Self {\n225 ~         match val {\n    |\n\n"
            ]
          }
        },
        {
          "file": "src/mci/mci_dma.rs",
          "features": "",
          "count": 30,
          "kinds": {
            "Clippy(Warn)": [
              "warning: you should consider adding a `Default` implementation for `FSdifIDmaDescList`\n  --> src/mci/mci_dma.rs:34:5\n   |\n34 | /     pub fn new() -> Self {\n35 | |         FSdifIDmaDescList {\n36 | |             first_desc: core::ptr::null_mut(),\n37 | |             first_desc_dma: 0,\n...  |\n41 | |     }\n   | |_____^\n   |\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#new_without_default\nhelp: try adding this\n   |\n33 + impl Default for FSdifIDmaDescList {\n34 +     fn default() -> Self {\n35 +         Self::new()\n36 +     }\n37 + }\n   |\n\n",
              "warning: deref which would be done by auto-deref\n  --> src/mci/mci_dma.rs:59:51\n   |\n59 |                     debug!(\"\\tattribute: 0x{:x}\", (*cur_desc).attribute);\n   |                                                   ^^^^^^^^^^^ help: try: `cur_desc`\n   |\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#explicit_auto_deref\n   = note: `#[warn(clippy::explicit_auto_deref)]` on by default\n\n",
              "warning: deref which would be done by auto-deref\n  --> src/mci/mci_dma.rs:60:46\n   |\n60 |                     debug!(\"\\tnon1: 0x{:x}\", (*cur_desc).non1);\n   |                                              ^^^^^^^^^^^ help: try: `cur_desc`\n   |\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#explicit_auto_deref\n\n",
              "warning: deref which would be done by auto-deref\n  --> src/mci/mci_dma.rs:61:45\n   |\n61 |                     debug!(\"\\tlen: 0x{:x}\", (*cur_desc).len);\n   |                                             ^^^^^^^^^^^ help: try: `cur_desc`\n   |\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#explicit_auto_deref\n\n",
              "warning: deref which would be done by auto-deref\n  --> src/mci/mci_dma.rs:62:46\n   |\n62 |                     debug!(\"\\tnon2: 0x{:x}\", (*cur_desc).non2);\n   |                                              ^^^^^^^^^^^ help: try: `cur_desc`\n   |\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#explicit_auto_deref\n\n",
              "warning: deref which would be done by auto-deref\n  --> src/mci/mci_dma.rs:63:49\n   |\n63 |                     debug!(\"\\taddr_lo: 0x{:x}\", (*cur_desc).addr_lo);\n   |                                                 ^^^^^^^^^^^ help: try: `cur_desc`\n   |\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#explicit_auto_deref\n\n",
              "warning: deref which would be done by auto-deref\n  --> src/mci/mci_dma.rs:64:49\n   |\n64 |                     debug!(\"\\taddr_hi: 0x{:x}\", (*cur_desc).addr_hi);\n   |                                                 ^^^^^^^^^^^ help: try: `cur_desc`\n   |\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#explicit_auto_deref\n\n",
              "warning: deref which would be done by auto-deref\n  --> src/mci/mci_dma.rs:65:49\n   |\n65 |                     debug!(\"\\tdesc_lo: 0x{:x}\", (*cur_desc).desc_lo);\n   |                                                 ^^^^^^^^^^^ help: try: `cur_desc`\n   |\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#explicit_auto_deref\n\n",
              "warning: deref which would be done by auto-deref\n  --> src/mci/mci_dma.rs:66:49\n   |\n66 |                     debug!(\"\\tdesc_hi: 0x{:x}\", (*cur_desc).desc_hi);\n   |                                                 ^^^^^^^^^^^ help: try: `cur_desc`\n   |\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#explicit_auto_deref\n\n",
              "warning: casting to the same type is unnecessary (`usize` -> `usize`)\n   --> src/mci/mci_dma.rs:138:20\n    |\n138 | ...   if next_desc_addr as usize % core::mem::size_of::<FSdifIDmaDesc>() != 0 { // make sure descriptor aligned and not cross page boundary\n    |          ^^^^^^^^^^^^^^^^^^^^^^^ help: try: `next_desc_addr`\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_cast\n    = note: `#[warn(clippy::unnecessary_cast)]` on by default\n\n",
              "warning: this expression creates a reference which is immediately dereferenced by the compiler\n   --> src/mci/mci_dma.rs:168:35\n    |\n168 |         self.setup_dma_descriptor(&data)?;\n    |                                   ^^^^^ help: change this to: `data`\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_borrow\n    = note: `#[warn(clippy::needless_borrow)]` on by default\n\n"
            ],
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_dma.rs (original lines from 8 to 10)\n-use super::mci_data::MCIData;\n-use super::MCI;\n-use super::err::*;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_dma.rs (original lines from 12 to 12)\n+use super::err::*;\n+use super::mci_data::MCIData;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_dma.rs (original lines from 13 to 13)\n+use super::MCI;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_dma.rs (original lines from 28 to 28)\n-    pub first_desc_dma: usize,  // 第一个descriptor的物理地址\n+    pub first_desc_dma: usize, // 第一个descriptor的物理地址\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_dma.rs (original lines from 30 to 30)\n-    pub desc_trans_sz: u32,   // 单个descriptor传输的字节数\n+    pub desc_trans_sz: u32, // 单个descriptor传输的字节数\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_dma.rs (original lines from 47 to 49)\n-        self.config.reg().modify_reg(|reg| {\n-            MCIDMACIntEn::RI | MCIDMACIntEn::TI | MCIDMACIntEn::FBE | reg\n-        });\n+        self.config\n+            .reg()\n+            .modify_reg(|reg| MCIDMACIntEn::RI | MCIDMACIntEn::TI | MCIDMACIntEn::FBE | reg);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_dma.rs (original lines from 76 to 76)\n-        let desc_blocks = desc_list.desc_trans_sz / data.blksz(); \n+        let desc_blocks = desc_list.desc_trans_sz / data.blksz();\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_dma.rs (original lines from 88 to 88)\n-            desc_num += if data_len % desc_list.desc_trans_sz == 0 { 0 } else { 1 };\n+            desc_num += if data_len % desc_list.desc_trans_sz == 0 {\n+                0\n+            } else {\n+                1\n+            };\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_dma.rs (original lines from 92 to 92)\n-            error!(\"Transfer descriptor are not enough! desc need: {}, desc available: {}\", desc_num, desc_list.desc_num);\n+            error!(\n+                \"Transfer descriptor are not enough! desc need: {}, desc available: {}\",\n+                desc_num, desc_list.desc_num\n+            );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_dma.rs (original lines from 96 to 96)\n-        info!(\"DMA transfer 0x{:x} use {} desc, total {} available\", data.buf_dma(), desc_num, desc_list.desc_num);\n+        info!(\n+            \"DMA transfer 0x{:x} use {} desc, total {} available\",\n+            data.buf_dma(),\n+            desc_num,\n+            desc_list.desc_num\n+        );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_dma.rs (original lines from 105 to 105)\n-            trans_blocks = if remain_blocks <= desc_blocks { remain_blocks } else { desc_blocks };\n+            trans_blocks = if remain_blocks <= desc_blocks {\n+                remain_blocks\n+            } else {\n+                desc_blocks\n+            };\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_dma.rs (original lines from 108 to 109)\n-                let mut next_desc_addr = desc_list.first_desc_dma + (i + 1) as usize * core::mem::size_of::<FSdifIDmaDesc>();\n-    \n+                let mut next_desc_addr = desc_list.first_desc_dma\n+                    + (i + 1) as usize * core::mem::size_of::<FSdifIDmaDesc>();\n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_dma.rs (original lines from 115 to 116)\n-                if is_first { (*cur_desc).attribute |= FSDIF_IDMAC_DES0_FD; }\n-                if is_last { (*cur_desc).attribute |= FSDIF_IDMAC_DES0_LD | FSDIF_IDMAC_DES0_ER; }\n+                if is_first {\n+                    (*cur_desc).attribute |= FSDIF_IDMAC_DES0_FD;\n+                }\n+                if is_last {\n+                    (*cur_desc).attribute |= FSDIF_IDMAC_DES0_LD | FSDIF_IDMAC_DES0_ER;\n+                }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_dma.rs (original lines from 124 to 124)\n-                    error!(\"Data buffer 0x{:x} do not align to {}!\", buf_addr, data.blksz());\n+                    error!(\n+                        \"Data buffer 0x{:x} do not align to {}!\",\n+                        buf_addr,\n+                        data.blksz()\n+                    );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_dma.rs (original lines from 138 to 138)\n-                if next_desc_addr as usize % core::mem::size_of::<FSdifIDmaDesc>() != 0 { // make sure descriptor aligned and not cross page boundary\n+                if next_desc_addr as usize % core::mem::size_of::<FSdifIDmaDesc>() != 0 {\n+                    // make sure descriptor aligned and not cross page boundary\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_dma.rs (original lines from 156 to 156)\n-        flush(NonNull::new(desc_list.first_desc).unwrap().cast(), desc_num as _);\n+        flush(\n+            NonNull::new(desc_list.first_desc).unwrap().cast(),\n+            desc_num as _,\n+        );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_dma.rs (original lines from 165 to 165)\n-        self.interrupt_mask_set(MCIIntrType::GeneralIntr, MCIIntMask::INTS_DATA_MASK.bits(), true);\n+        self.interrupt_mask_set(\n+            MCIIntrType::GeneralIntr,\n+            MCIIntMask::INTS_DATA_MASK.bits(),\n+            true,\n+        );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_dma.rs (original lines from 171 to 171)\n-        info!(\"Descriptor@{:p}, trans bytes: {}, block size: {}\", self.desc_list.first_desc, data_len, data.blksz());\n+        info!(\n+            \"Descriptor@{:p}, trans bytes: {}, block size: {}\",\n+            self.desc_list.first_desc,\n+            data_len,\n+            data.blksz()\n+        );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_dma.rs (original lines from 180 to 180)\n+\n"
            ]
          }
        },
        {
          "file": "src/regs.rs",
          "features": "",
          "count": 28,
          "kinds": {
            "Clippy(Warn)": [
              "warning: consider removing unnecessary double parentheses\n  --> src/regs.rs:48:9\n   |\n48 |         (($reg << $b) & genmask!($a, $b))\n   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n   |\n  ::: src/mci/regs.rs:91:34\n   |\n91 |         Self::from_bits_truncate(set_reg32_bits!(x, 23, 16))\n   |                                  -------------------------- in this macro invocation\n   |\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#double_parens\n   = note: `#[warn(clippy::double_parens)]` on by default\n   = note: this warning originates in the macro `set_reg32_bits` (in Nightly builds, run with -Z macro-backtrace for more info)\n\n",
              "warning: consider removing unnecessary double parentheses\n  --> src/regs.rs:48:9\n   |\n48 |         (($reg << $b) & genmask!($a, $b))\n   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n   |\n  ::: src/mci/regs.rs:94:34\n   |\n94 |         Self::from_bits_truncate(set_reg32_bits!(x, 15, 8))\n   |                                  ------------------------- in this macro invocation\n   |\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#double_parens\n   = note: this warning originates in the macro `set_reg32_bits` (in Nightly builds, run with -Z macro-backtrace for more info)\n\n",
              "warning: consider removing unnecessary double parentheses\n  --> src/regs.rs:48:9\n   |\n48 |         (($reg << $b) & genmask!($a, $b))\n   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n   |\n  ::: src/mci/regs.rs:97:34\n   |\n97 |         Self::from_bits_truncate(set_reg32_bits!(x, 7, 0))\n   |                                  ------------------------ in this macro invocation\n   |\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#double_parens\n   = note: this warning originates in the macro `set_reg32_bits` (in Nightly builds, run with -Z macro-backtrace for more info)\n\n",
              "warning: consider removing unnecessary double parentheses\n   --> src/regs.rs:48:9\n    |\n48  |         (($reg << $b) & genmask!($a, $b))\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n   ::: src/mci/regs.rs:334:34\n    |\n334 |         Self::from_bits_truncate(set_reg32_bits!(x, 5, 0))\n    |                                  ------------------------ in this macro invocation\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#double_parens\n    = note: this warning originates in the macro `set_reg32_bits` (in Nightly builds, run with -Z macro-backtrace for more info)\n\n",
              "warning: consider removing unnecessary double parentheses\n  --> src/regs.rs:48:9\n   |\n48 |         (($reg << $b) & genmask!($a, $b))\n   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n   |\n  ::: src/mci/mci_cmd.rs:82:47\n   |\n82 |         raw_cmd |= MCICmd::from_bits_truncate(set_reg32_bits!(cmd_data.cmdidx(), 5, 0));\n   |                                               ---------------------------------------- in this macro invocation\n   |\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#double_parens\n   = note: this warning originates in the macro `set_reg32_bits` (in Nightly builds, run with -Z macro-backtrace for more info)\n\n",
              "warning: consider removing unnecessary double parentheses\n  --> src/regs.rs:48:9\n   |\n48 |         (($reg << $b) & genmask!($a, $b))\n   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n   |\n  ::: src/iopad/regs.rs:8:34\n   |\n8  |         Self::from_bits_truncate(set_reg32_bits!(x, 2, 0))\n   |                                  ------------------------ in this macro invocation\n   |\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#double_parens\n   = note: this warning originates in the macro `set_reg32_bits` (in Nightly builds, run with -Z macro-backtrace for more info)\n\n",
              "warning: consider removing unnecessary double parentheses\n  --> src/regs.rs:48:9\n   |\n48 |         (($reg << $b) & genmask!($a, $b))\n   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n   |\n  ::: src/iopad/regs.rs:12:34\n   |\n12 |         Self::from_bits_truncate(set_reg32_bits!(x, 7, 4))\n   |                                  ------------------------ in this macro invocation\n   |\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#double_parens\n   = note: this warning originates in the macro `set_reg32_bits` (in Nightly builds, run with -Z macro-backtrace for more info)\n\n",
              "warning: consider removing unnecessary double parentheses\n  --> src/regs.rs:48:9\n   |\n48 |         (($reg << $b) & genmask!($a, $b))\n   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n   |\n  ::: src/iopad/regs.rs:16:34\n   |\n16 |         Self::from_bits_truncate(set_reg32_bits!(x, 9, 8))\n   |                                  ------------------------ in this macro invocation\n   |\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#double_parens\n   = note: this warning originates in the macro `set_reg32_bits` (in Nightly builds, run with -Z macro-backtrace for more info)\n\n",
              "warning: consider removing unnecessary double parentheses\n  --> src/regs.rs:48:9\n   |\n48 |         (($reg << $b) & genmask!($a, $b))\n   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n   |\n  ::: src/iopad/regs.rs:34:34\n   |\n34 |         Self::from_bits_truncate(set_reg32_bits!(x,11,9))\n   |                                  ----------------------- in this macro invocation\n   |\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#double_parens\n   = note: this warning originates in the macro `set_reg32_bits` (in Nightly builds, run with -Z macro-backtrace for more info)\n\n",
              "warning: consider removing unnecessary double parentheses\n  --> src/regs.rs:48:9\n   |\n48 |         (($reg << $b) & genmask!($a, $b))\n   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n   |\n  ::: src/iopad/regs.rs:38:34\n   |\n38 |         Self::from_bits_truncate(set_reg32_bits!(x,14,12))\n   |                                  ------------------------ in this macro invocation\n   |\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#double_parens\n   = note: this warning originates in the macro `set_reg32_bits` (in Nightly builds, run with -Z macro-backtrace for more info)\n\n",
              "warning: consider removing unnecessary double parentheses\n  --> src/regs.rs:48:9\n   |\n48 |         (($reg << $b) & genmask!($a, $b))\n   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n   |\n  ::: src/iopad/regs.rs:42:34\n   |\n42 |         Self::from_bits_truncate(set_reg32_bits!(x,3,1))\n   |                                  ---------------------- in this macro invocation\n   |\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#double_parens\n   = note: this warning originates in the macro `set_reg32_bits` (in Nightly builds, run with -Z macro-backtrace for more info)\n\n",
              "warning: consider removing unnecessary double parentheses\n  --> src/regs.rs:48:9\n   |\n48 |         (($reg << $b) & genmask!($a, $b))\n   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n   |\n  ::: src/iopad/regs.rs:46:34\n   |\n46 |         Self::from_bits_truncate(set_reg32_bits!(x,6,4))\n   |                                  ---------------------- in this macro invocation\n   |\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#double_parens\n   = note: this warning originates in the macro `set_reg32_bits` (in Nightly builds, run with -Z macro-backtrace for more info)\n\n",
              "warning: re-implementing `PartialEq::ne` is unnecessary\n   --> src/regs.rs:141:5\n    |\n141 | /     fn ne(&self, other: &Self) -> bool {\n142 | |         !self.eq(other)\n143 | |     }\n    | |_____^\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#partialeq_ne_impl\n    = note: `#[warn(clippy::partialeq_ne_impl)]` on by default\n\n"
            ],
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/regs.rs (original lines from 1 to 1)\n-#![allow(unused)] \n+#![allow(unused)]\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/regs.rs (original lines from 3 to 3)\n-use core::{marker::PhantomData, ops, ptr::NonNull, time::Duration};\n+use crate::sleep;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/regs.rs (original lines from 5 to 5)\n+use core::{marker::PhantomData, ops, ptr::NonNull, time::Duration};\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/regs.rs (original lines from 6 to 6)\n-use crate::sleep;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/regs.rs (original lines from 8 to 8)\n-/* \n+/*\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/regs.rs (original lines from 15 to 16)\n-pub trait BitsOps: ops::BitOr<Output = Self> + ops::BitAnd<Output = Self> + ops::Not<Output = Self> + ops::BitXor<Output = Self> + Sized {}\n-impl<T> BitsOps for T where T: ops::BitOr<Output = Self> + ops::BitAnd<Output = Self> + ops::Not<Output = Self> + ops::BitXor<Output = Self> {}\n+pub trait BitsOps:\n+    ops::BitOr<Output = Self>\n+    + ops::BitAnd<Output = Self>\n+    + ops::Not<Output = Self>\n+    + ops::BitXor<Output = Self>\n+    + Sized\n+{\n+}\n+impl<T> BitsOps for T where\n+    T: ops::BitOr<Output = Self>\n+        + ops::BitAnd<Output = Self>\n+        + ops::Not<Output = Self>\n+        + ops::BitXor<Output = Self>\n+{\n+}\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/regs.rs (original lines from 53 to 53)\n-pub struct Reg<E:RegError> {\n+pub struct Reg<E: RegError> {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/regs.rs (original lines from 55 to 55)\n-    _marker: PhantomData<E>\n+    _marker: PhantomData<E>,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/regs.rs (original lines from 58 to 58)\n-impl<E:RegError> Reg<E> {\n+impl<E: RegError> Reg<E> {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/regs.rs (original lines from 60 to 60)\n-        Self { \n+        Self {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/regs.rs (original lines from 62 to 62)\n-            _marker: PhantomData\n+            _marker: PhantomData,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/regs.rs (original lines from 93 to 93)\n-    pub fn clear_reg<F: FlagReg + Copy +BitsOps>(&self, val: F) {\n+    pub fn clear_reg<F: FlagReg + Copy + BitsOps>(&self, val: F) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/regs.rs (original lines from 133 to 133)\n-    \n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/regs.rs (original lines from 140 to 140)\n-    \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/regs.rs (original lines from 176 to 176)\n+\n"
            ]
          }
        },
        {
          "file": "src/mci_host/mci_host_transfer.rs",
          "features": "",
          "count": 27,
          "kinds": {
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_host_transfer.rs (original lines from 13 to 14)\n-            data:None,\n-            cmd:None\n+            data: None,\n+            cmd: None,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_host_transfer.rs (original lines from 22 to 22)\n-    pub(crate) fn set_data(&mut self,data:Option<MCIHostData>) {\n+    pub(crate) fn set_data(&mut self, data: Option<MCIHostData>) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_host_transfer.rs (original lines from 25 to 25)\n-    \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_host_transfer.rs (original lines from 30 to 30)\n-    pub(crate) fn set_cmd(&mut self,cmd:Option<MCIHostCmd>) {\n+    pub(crate) fn set_cmd(&mut self, cmd: Option<MCIHostCmd>) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_host_transfer.rs (original lines from 41 to 41)\n-\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_host_transfer.rs (original lines from 46 to 54)\n-    stream_transfer: bool,          // 指示是否为流数据传输命令\n-    enable_auto_command12: bool,    // 启用自动 CMD12\n-    enable_auto_command23: bool,    // 启用自动 CMD23\n-    enable_ignore_error: bool,      // 启用忽略错误以读取/写入所有数据\n-    data_type: u8,                  // 用于区分普通/调谐/启动数据\n-    block_size: usize,              // 块大小\n-    block_count: u32,               // 块数量\n-    rx_data: Option<Vec<u32>>,      // 用于保存读取数据的缓冲区\n-    tx_data: Option<Vec<u32>>,      // 用于写入数据的缓冲区\n+    stream_transfer: bool,       // 指示是否为流数据传输命令\n+    enable_auto_command12: bool, // 启用自动 CMD12\n+    enable_auto_command23: bool, // 启用自动 CMD23\n+    enable_ignore_error: bool,   // 启用忽略错误以读取/写入所有数据\n+    data_type: u8,               // 用于区分普通/调谐/启动数据\n+    block_size: usize,           // 块大小\n+    block_count: u32,            // 块数量\n+    rx_data: Option<Vec<u32>>,   // 用于保存读取数据的缓冲区\n+    tx_data: Option<Vec<u32>>,   // 用于写入数据的缓冲区\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_host_transfer.rs (original lines from 59 to 59)\n-\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_host_transfer.rs (original lines from 62 to 70)\n-            stream_transfer:false,\n-            enable_auto_command12:false,\n-            enable_auto_command23:false,\n-            enable_ignore_error:false,\n-            data_type:0,\n-            block_size:0,\n-            block_count:0,\n-            rx_data:None,\n-            tx_data:None,\n+            stream_transfer: false,\n+            enable_auto_command12: false,\n+            enable_auto_command23: false,\n+            enable_ignore_error: false,\n+            data_type: 0,\n+            block_size: 0,\n+            block_count: 0,\n+            rx_data: None,\n+            tx_data: None,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_host_transfer.rs (original lines from 82 to 82)\n-    pub(crate) fn enable_auto_command12_set(&mut self,enable_auto_command12:bool) {\n+    pub(crate) fn enable_auto_command12_set(&mut self, enable_auto_command12: bool) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_host_transfer.rs (original lines from 102 to 102)\n-    pub(crate) fn block_size_set(&mut self, block_size:usize) {\n+    pub(crate) fn block_size_set(&mut self, block_size: usize) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_host_transfer.rs (original lines from 104 to 104)\n-    } \n+    }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_host_transfer.rs (original lines from 110 to 110)\n-    pub(crate) fn block_count_set(&mut self, block_count:u32) {\n+    pub(crate) fn block_count_set(&mut self, block_count: u32) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_host_transfer.rs (original lines from 118 to 118)\n-    pub(crate) fn rx_data_set(&mut self,rx_data:Option<Vec<u32>>) {\n+    pub(crate) fn rx_data_set(&mut self, rx_data: Option<Vec<u32>>) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_host_transfer.rs (original lines from 138 to 138)\n-    pub(crate) fn tx_data_set(&mut self,tx_data:Option<Vec<u32>>) {\n+    pub(crate) fn tx_data_set(&mut self, tx_data: Option<Vec<u32>>) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_host_transfer.rs (original lines from 145 to 145)\n-\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_host_transfer.rs (original lines from 150 to 154)\n-    index: u32,                          // 命令索引\n-    argument: u32,                       // 命令参数\n-    cmd_type: MCIHostCmdType,            // 命令类型\n-    response_type: MCIHostResponseType,  // 命令响应类型\n-    response: [u32; 4],                  // 命令响应数据\n+    index: u32,                                  // 命令索引\n+    argument: u32,                               // 命令参数\n+    cmd_type: MCIHostCmdType,                    // 命令类型\n+    response_type: MCIHostResponseType,          // 命令响应类型\n+    response: [u32; 4],                          // 命令响应数据\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_host_transfer.rs (original lines from 156 to 156)\n-    flags: u32,                          // 命令标志\n+    flags: u32,                                  // 命令标志\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_host_transfer.rs (original lines from 161 to 161)\n-\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_host_transfer.rs (original lines from 164 to 170)\n-            index:0,\n-            argument:0,\n-            cmd_type:MCIHostCmdType::Normal,\n-            response_type:MCIHostResponseType::None,\n-            response:[0;4],\n-            response_error_flags:MCIHostCardStatusFlag::empty(),\n-            flags:0,\n+            index: 0,\n+            argument: 0,\n+            cmd_type: MCIHostCmdType::Normal,\n+            response_type: MCIHostResponseType::None,\n+            response: [0; 4],\n+            response_error_flags: MCIHostCardStatusFlag::empty(),\n+            flags: 0,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_host_transfer.rs (original lines from 172 to 172)\n-    } \n+    }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_host_transfer.rs (original lines from 178 to 178)\n-    pub(crate) fn index_set(&mut self,index:u32) {\n+    pub(crate) fn index_set(&mut self, index: u32) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_host_transfer.rs (original lines from 186 to 186)\n-    pub(crate) fn argument_set(&mut self,argument:u32) {\n+    pub(crate) fn argument_set(&mut self, argument: u32) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_host_transfer.rs (original lines from 194 to 194)\n-    pub(crate) fn cmd_type_set(&mut self,cmd_type:MCIHostCmdType) {\n+    pub(crate) fn cmd_type_set(&mut self, cmd_type: MCIHostCmdType) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_host_transfer.rs (original lines from 202 to 202)\n-    pub(crate) fn response_type_set(&mut self,response_type:MCIHostResponseType) {\n+    pub(crate) fn response_type_set(&mut self, response_type: MCIHostResponseType) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_host_transfer.rs (original lines from 210 to 210)\n-    pub(crate) fn response_mut(&mut self) -> &mut [u32;4] {\n+    pub(crate) fn response_mut(&mut self) -> &mut [u32; 4] {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_host_transfer.rs (original lines from 218 to 218)\n-    pub(crate) fn response_error_flags_set(&mut self,flags:MCIHostCardStatusFlag) {\n+    pub(crate) fn response_error_flags_set(&mut self, flags: MCIHostCardStatusFlag) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_host_transfer.rs (original lines from 226 to 226)\n+\n"
            ]
          }
        },
        {
          "file": "src/mci/mci_cmd.rs",
          "features": "",
          "count": 26,
          "kinds": {
            "Clippy(Warn)": [
              "warning: this `if` statement can be collapsed\n   --> src/mci/mci_cmd.rs:110:13\n    |\n110 | /             if read {\n111 | |                 if MCITransMode::PIO == self.config.trans_mode() {\n112 | |                     self.pio_read_data(data)?;\n113 | |                 }\n114 | |             }\n    | |_____________^\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#collapsible_if\n    = note: `#[warn(clippy::collapsible_if)]` on by default\nhelp: collapse nested if block\n    |\n110 ~             if read && MCITransMode::PIO == self.config.trans_mode() {\n111 +                 self.pio_read_data(data)?;\n112 +             }\n    |\n\n",
              "warning: the following explicit lifetimes could be elided: 'a\n  --> src/mci/mci_cmd.rs:44:32\n   |\n44 |     pub(crate) fn cmd_transfer<'a>(&self, cmd_data: &'a MCICmdData) -> MCIResult {\n   |                                ^^                    ^^\n   |\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_lifetimes\n   = note: `#[warn(clippy::needless_lifetimes)]` on by default\nhelp: elide the lifetimes\n   |\n44 -     pub(crate) fn cmd_transfer<'a>(&self, cmd_data: &'a MCICmdData) -> MCIResult {\n44 +     pub(crate) fn cmd_transfer(&self, cmd_data: &MCICmdData) -> MCIResult {\n   |\n\n",
              "warning: the following explicit lifetimes could be elided: 'a\n  --> src/mci/mci_cmd.rs:44:32\n   |\n44 |     pub(crate) fn cmd_transfer<'a>(&self, cmd_data: &'a MCICmdData) -> MCIResult {\n   |                                ^^                    ^^\n   |\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_lifetimes\n   = note: `#[warn(clippy::needless_lifetimes)]` on by default\nhelp: elide the lifetimes\n   |\n44 -     pub(crate) fn cmd_transfer<'a>(&self, cmd_data: &'a MCICmdData) -> MCIResult {\n44 +     pub(crate) fn cmd_transfer(&self, cmd_data: &MCICmdData) -> MCIResult {\n   |\n\n",
              "warning: using `clone` on type `MCICmdFlag` which implements the `Copy` trait\n   --> src/mci/mci_cmd.rs:118:20\n    |\n118 |         let flag = cmd_data.flag().clone();\n    |                    ^^^^^^^^^^^^^^^^^^^^^^^ help: try dereferencing it: `*cmd_data.flag()`\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#clone_on_copy\n    = note: `#[warn(clippy::clone_on_copy)]` on by default\n\n"
            ],
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmd.rs (original lines from 4 to 4)\n-use log::*;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmd.rs (original lines from 6 to 6)\n+use log::*;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmd.rs (original lines from 7 to 9)\n-use super::mci_cmddata::MCICmdData;\n-use super::MCI;\n-use super::err::*;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmd.rs (original lines from 11 to 11)\n+use super::err::*;\n+use super::mci_cmddata::MCICmdData;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmd.rs (original lines from 12 to 12)\n+use super::MCI;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmd.rs (original lines from 14 to 14)\n-    pub(crate) fn private_cmd_send(&self,cmd:MCICmd, arg: u32) -> MCIResult{\n+    pub(crate) fn private_cmd_send(&self, cmd: MCICmd, arg: u32) -> MCIResult {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmd.rs (original lines from 17 to 19)\n-        reg.retry_for(|reg: MCIStatus| {\n-            !reg.contains(MCIStatus::DATA_BUSY)\n-        }, Some(RETRIES_TIMEOUT))?;\n+        reg.retry_for(\n+            |reg: MCIStatus| !reg.contains(MCIStatus::DATA_BUSY),\n+            Some(RETRIES_TIMEOUT),\n+        )?;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmd.rs (original lines from 22 to 22)\n-        unsafe { dsb() };/* drain writebuffer */\n+        unsafe { dsb() }; /* drain writebuffer */\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmd.rs (original lines from 27 to 30)\n-        reg.retry_for(|reg:MCICmd|{\n-            !reg.contains(MCICmd::START)\n-        }, Some(RETRIES_TIMEOUT))?;\n-        \n+        reg.retry_for(\n+            |reg: MCICmd| !reg.contains(MCICmd::START),\n+            Some(RETRIES_TIMEOUT),\n+        )?;\n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmd.rs (original lines from 34 to 34)\n-    pub(crate) fn private_cmd11_send(&self,cmd:MCICmd) -> MCIResult{\n+    pub(crate) fn private_cmd11_send(&self, cmd: MCICmd) -> MCIResult {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmd.rs (original lines from 36 to 36)\n-        unsafe { dsb() };/* drain writebuffer */\n+        unsafe { dsb() }; /* drain writebuffer */\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmd.rs (original lines from 38 to 40)\n-        reg.retry_for(|reg|{\n-            (MCICmd::START & reg).bits() == 0\n-        },  Some(RETRIES_TIMEOUT))?;\n+        reg.retry_for(\n+            |reg| (MCICmd::START & reg).bits() == 0,\n+            Some(RETRIES_TIMEOUT),\n+        )?;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmd.rs (original lines from 83 to 92)\n-        debug!(\"============[{}-{}]@0x{:x} begin ============\",\n-        {\n-            if self.prev_cmd == Self::EXT_APP_CMD {\n-                \"ACMD\"\n-            } else {\n-                \"CMD\"\n-            }\n-        },\n-        cmd_data.cmdidx(),\n-        reg.addr.as_ptr() as usize );\n+        debug!(\n+            \"============[{}-{}]@0x{:x} begin ============\",\n+            {\n+                if self.prev_cmd == Self::EXT_APP_CMD {\n+                    \"ACMD\"\n+                } else {\n+                    \"CMD\"\n+                }\n+            },\n+            cmd_data.cmdidx(),\n+            reg.addr.as_ptr() as usize\n+        );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmd.rs (original lines from 96 to 96)\n-        self.interrupt_mask_set(MCIIntrType::GeneralIntr, MCIIntMask::INTS_CMD_MASK.bits(), true);\n+        self.interrupt_mask_set(\n+            MCIIntrType::GeneralIntr,\n+            MCIIntMask::INTS_CMD_MASK.bits(),\n+            true,\n+        );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmd.rs (original lines from 101 to 101)\n-    pub(crate) fn cmd_response_get(&mut self,cmd_data: &mut MCICmdData) -> MCIResult{\n+    pub(crate) fn cmd_response_get(&mut self, cmd_data: &mut MCICmdData) -> MCIResult {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmd.rs (original lines from 109 to 109)\n-        if let Some(data) = cmd_data.get_mut_data(){\n+        if let Some(data) = cmd_data.get_mut_data() {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmd.rs (original lines from 127 to 129)\n-                debug!(\"    resp: 0x{:x}-0x{:x}-0x{:x}-0x{:x}\",\n-                response[0],response[1],response[2],response[3]);\n-            }else {\n+                debug!(\n+                    \"    resp: 0x{:x}-0x{:x}-0x{:x}-0x{:x}\",\n+                    response[0], response[1], response[2], response[3]\n+                );\n+            } else {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmd.rs (original lines from 134 to 134)\n-                debug!(\"    resp: 0x{:x}\",response[0]);\n+                debug!(\"    resp: 0x{:x}\", response[0]);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmd.rs (original lines from 139 to 148)\n-        debug!(\"============[{}-{}]@0x{:x} end ============\",\n-        {\n-            if self.prev_cmd == Self::EXT_APP_CMD {\n-                \"ACMD\"\n-            } else {\n-                \"CMD\"\n-            }\n-        },\n-        cmd_data.cmdidx(),\n-        reg.addr.as_ptr() as usize );\n+        debug!(\n+            \"============[{}-{}]@0x{:x} end ============\",\n+            {\n+                if self.prev_cmd == Self::EXT_APP_CMD {\n+                    \"ACMD\"\n+                } else {\n+                    \"CMD\"\n+                }\n+            },\n+            cmd_data.cmdidx(),\n+            reg.addr.as_ptr() as usize\n+        );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmd.rs (original lines from 151 to 152)\n-        self.interrupt_mask_set(MCIIntrType::GeneralIntr,(MCIIntMask::INTS_CMD_MASK | MCIIntMask::INTS_DATA_MASK).bits(),false);\n-        self.interrupt_mask_set(MCIIntrType::DmaIntr,MCIDMACIntEn::INTS_MASK.bits(),false);\n+        self.interrupt_mask_set(\n+            MCIIntrType::GeneralIntr,\n+            (MCIIntMask::INTS_CMD_MASK | MCIIntMask::INTS_DATA_MASK).bits(),\n+            false,\n+        );\n+        self.interrupt_mask_set(MCIIntrType::DmaIntr, MCIDMACIntEn::INTS_MASK.bits(), false);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmd.rs (original lines from 159 to 159)\n-\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmd.rs (original lines from 161 to 161)\n+\n"
            ]
          }
        },
        {
          "file": "src/iopad/mod.rs",
          "features": "",
          "count": 22,
          "kinds": {
            "Clippy(Warn)": [
              "warning: unneeded `return` statement\n  --> src/iopad/mod.rs:79:9\n   |\n79 |         return (FioPadFunc::from(func), FioPadPull::from(pull), FioPadDrive::from(drive));\n   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n   |\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_return\n   = note: `#[warn(clippy::needless_return)]` on by default\nhelp: remove `return`\n   |\n79 -         return (FioPadFunc::from(func), FioPadPull::from(pull), FioPadDrive::from(drive));\n79 +         (FioPadFunc::from(func), FioPadPull::from(pull), FioPadDrive::from(drive))\n   |\n\n"
            ],
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/mod.rs (original lines from 1 to 2)\n-#![allow(unused)] \n-mod err;\n+#![allow(unused)]\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/mod.rs (original lines from 4 to 4)\n+mod err;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/mod.rs (original lines from 6 to 6)\n-use core::ptr::NonNull;\n+use crate::regs::{BitsOps, FlagReg, Reg};\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/mod.rs (original lines from 8 to 8)\n+use core::ptr::NonNull;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/mod.rs (original lines from 10 to 10)\n-use crate::regs::{FlagReg, Reg, BitsOps};\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/mod.rs (original lines from 39 to 41)\n-        self.reg.modify_reg::<T>(|reg| {\n-            reg | T::func_set(func.into())\n-        });\n+        self.reg\n+            .modify_reg::<T>(|reg| reg | T::func_set(func.into()));\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/mod.rs (original lines from 51 to 53)\n-        self.reg.modify_reg::<T>(|reg| {\n-            reg | T::pull_set(pull.into())\n-        });\n+        self.reg\n+            .modify_reg::<T>(|reg| reg | T::pull_set(pull.into()));\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/mod.rs (original lines from 63 to 65)\n-        self.reg.modify_reg::<T>(|reg| {\n-            reg | T::drive_set(drive.into())\n-        });\n+        self.reg\n+            .modify_reg::<T>(|reg| reg | T::drive_set(drive.into()));\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/mod.rs (original lines from 68 to 68)\n-    pub fn config_set<T: FlagReg + XReg0 + BitsOps>(&mut self, func: FioPadFunc, pull: FioPadPull, drive: FioPadDrive) {\n+    pub fn config_set<T: FlagReg + XReg0 + BitsOps>(\n+        &mut self,\n+        func: FioPadFunc,\n+        pull: FioPadPull,\n+        drive: FioPadDrive,\n+    ) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/mod.rs (original lines from 74 to 74)\n-    pub fn config_get <T: FlagReg + XReg0 + BitsOps + Copy>(&self) -> (FioPadFunc, FioPadPull, FioPadDrive) {\n+    pub fn config_get<T: FlagReg + XReg0 + BitsOps + Copy>(\n+        &self,\n+    ) -> (FioPadFunc, FioPadPull, FioPadDrive) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/mod.rs (original lines from 79 to 79)\n-        return (FioPadFunc::from(func), FioPadPull::from(pull), FioPadDrive::from(drive));\n+        return (\n+            FioPadFunc::from(func),\n+            FioPadPull::from(pull),\n+            FioPadDrive::from(drive),\n+        );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/mod.rs (original lines from 82 to 82)\n-    pub fn delay_get <T: FlagReg + XReg1 + BitsOps>(&self,dir:FioPadDelayDir,typ:FioPadDelayType) -> FioPadDelay {\n+    pub fn delay_get<T: FlagReg + XReg1 + BitsOps>(\n+        &self,\n+        dir: FioPadDelayDir,\n+        typ: FioPadDelayType,\n+    ) -> FioPadDelay {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/mod.rs (original lines from 84 to 84)\n-        let mut delay= 0;\n+        let mut delay = 0;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/mod.rs (original lines from 101 to 101)\n-    pub fn delay_set <T: FlagReg + XReg1 + BitsOps>(&mut self, dir:FioPadDelayDir, typ:FioPadDelayType, delay: FioPadDelay) {\n+    pub fn delay_set<T: FlagReg + XReg1 + BitsOps>(\n+        &mut self,\n+        dir: FioPadDelayDir,\n+        typ: FioPadDelayType,\n+        delay: FioPadDelay,\n+    ) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/mod.rs (original lines from 104 to 106)\n-                self.reg.modify_reg::<T>(|reg| {\n-                    reg | T::out_delay_delicate_set(delay.into())\n-                });\n+                self.reg\n+                    .modify_reg::<T>(|reg| reg | T::out_delay_delicate_set(delay.into()));\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/mod.rs (original lines from 108 to 110)\n-                self.reg.modify_reg::<T>(|reg| {\n-                    reg | T::out_delay_rough_set(delay.into())\n-                });\n+                self.reg\n+                    .modify_reg::<T>(|reg| reg | T::out_delay_rough_set(delay.into()));\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/mod.rs (original lines from 114 to 116)\n-                self.reg.modify_reg::<T>(|reg| {\n-                    reg | T::in_delay_delicate_set(delay.into())\n-                });\n+                self.reg\n+                    .modify_reg::<T>(|reg| reg | T::in_delay_delicate_set(delay.into()));\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/mod.rs (original lines from 118 to 120)\n-                self.reg.modify_reg::<T>(|reg| {\n-                    reg | T::in_delay_rough_set(delay.into())\n-                });\n+                self.reg\n+                    .modify_reg::<T>(|reg| reg | T::in_delay_rough_set(delay.into()));\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/mod.rs (original lines from 125 to 125)\n-    pub fn delay_enable_set <T: FlagReg + XReg1 + BitsOps>(&mut self, dir:FioPadDelayDir, enable: bool) {\n+    pub fn delay_enable_set<T: FlagReg + XReg1 + BitsOps>(\n+        &mut self,\n+        dir: FioPadDelayDir,\n+        enable: bool,\n+    ) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/mod.rs (original lines from 144 to 144)\n-\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/mod.rs (original lines from 146 to 147)\n-\n-\n"
            ]
          }
        },
        {
          "file": "src/mci/mci_intr.rs",
          "features": "",
          "count": 21,
          "kinds": {
            "Clippy(Error)": [
              "error: this `if` has the same condition as a previous `if`\n   --> src/mci/mci_intr.rs:128:13\n    |\n128 |     else if events.contains(MCIRawInts::CMD_BIT) { // handle cmd done\n    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\nnote: same as this\n   --> src/mci/mci_intr.rs:121:13\n    |\n121 |     else if events.contains(MCIRawInts::CMD_BIT)\n    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#ifs_same_cond\n    = note: `#[deny(clippy::ifs_same_cond)]` on by default\n\n"
            ],
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_intr.rs (original lines from 16 to 16)\n-use super::MCI;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_intr.rs (original lines from 19 to 19)\n+use super::MCI;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_intr.rs (original lines from 60 to 60)\n-    warn!(\"raw ints reg: 0x{:x}, dmac status: 0x{:x}\", events.bits(), dmac_events.bits());\n+    warn!(\n+        \"raw ints reg: 0x{:x}, dmac status: 0x{:x}\",\n+        events.bits(),\n+        dmac_events.bits()\n+    );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_intr.rs (original lines from 63 to 63)\n-    if (events.bits() & MCIRawInts::ALL_BITS.bits() == 0) && (dmac_events.bits() & MCIDMACStatus::ALL_BITS.bits() == 0) {\n+    if (events.bits() & MCIRawInts::ALL_BITS.bits() == 0)\n+        && (dmac_events.bits() & MCIDMACStatus::ALL_BITS.bits() == 0)\n+    {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_intr.rs (original lines from 79 to 79)\n-    debug!(\"events:0x{:x},mask:0x{:x},dmac_events:{:x},dmac_mask:0x{:x}\", events, event_mask, dmac_events, dmac_evt_mask);\n+    debug!(\n+        \"events:0x{:x},mask:0x{:x},dmac_events:{:x},dmac_mask:0x{:x}\",\n+        events, event_mask, dmac_events, dmac_evt_mask\n+    );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_intr.rs (original lines from 96 to 96)\n-    //     !self.config().non_removable() \n+    //     !self.config().non_removable()\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_intr.rs (original lines from 103 to 105)\n-    if dmac_events.contains(MCIDMACStatus::DMAC_ERR_INTS_MASK) || \n-        events.contains(MCIRawInts::CMD_ERR_INTS_MASK)\n-    {  \n+    if dmac_events.contains(MCIDMACStatus::DMAC_ERR_INTS_MASK)\n+        || events.contains(MCIRawInts::CMD_ERR_INTS_MASK)\n+    {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_intr.rs (original lines from 108 to 108)\n-            events.bits(), event_mask.bits(), dmac_events.bits(), dmac_evt_mask.bits()\n+            events.bits(),\n+            event_mask.bits(),\n+            dmac_events.bits(),\n+            dmac_evt_mask.bits()\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_intr.rs (original lines from 114 to 116)\n-    if events.contains(MCIRawInts::DTO_BIT) &&\n-        events.contains(MCIRawInts::CMD_BIT)\n-    {\n+    if events.contains(MCIRawInts::DTO_BIT) && events.contains(MCIRawInts::CMD_BIT) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_intr.rs (original lines from 120 to 123)\n-    } \n-    else if events.contains(MCIRawInts::CMD_BIT)\n-        // todo 这里无法得到MCI实例 暂时无法处理这种情况\n-        // (events.contains(MCIRawInts::HTO_BIT) && self.cur_cmd_index() == MCI::SWITCH_VOLTAGE as isize) \n+    } else if events.contains(MCIRawInts::CMD_BIT)\n+    // todo 这里无法得到MCI实例 暂时无法处理这种情况\n+    // (events.contains(MCIRawInts::HTO_BIT) && self.cur_cmd_index() == MCI::SWITCH_VOLTAGE as isize)\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_intr.rs (original lines from 127 to 128)\n-    }\n-    else if events.contains(MCIRawInts::CMD_BIT) { // handle cmd done\n+    } else if events.contains(MCIRawInts::CMD_BIT) {\n+        // handle cmd done\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_intr.rs (original lines from 131 to 132)\n-    }\n-    else if events.contains(MCIRawInts::DTO_BIT) { // handle data done\n+    } else if events.contains(MCIRawInts::DTO_BIT) {\n+        // handle data done\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_intr.rs (original lines from 147 to 148)\n-    let check_status = status & (\n-        MCIRawInts::DTO_BIT      // Data transfer over\n+    let check_status = status\n+        & (\n+            MCIRawInts::DTO_BIT      // Data transfer over\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_intr.rs (original lines from 155 to 156)\n-            | MCIRawInts::RTO_BIT     // Response timeout\n-    ).bits();\n+            | MCIRawInts::RTO_BIT\n+            // Response timeout\n+        )\n+            .bits();\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_intr.rs (original lines from 173 to 173)\n-            error!(\"transfer data error: 0x{:x}, dmac status: 0x{:x}\", check_status, check_dmac);\n+            error!(\n+                \"transfer data error: 0x{:x}, dmac status: 0x{:x}\",\n+                check_status, check_dmac\n+            );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_intr.rs (original lines from 185 to 185)\n-    \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_intr.rs (original lines from 189 to 189)\n-    \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_intr.rs (original lines from 204 to 206)\n-    if status & MCIRawInts::RE_BIT.bits() != 0 ||\n-        status & MCIRawInts::RTO_BIT.bits() != 0 \n-    {\n+    if status & MCIRawInts::RE_BIT.bits() != 0 || status & MCIRawInts::RTO_BIT.bits() != 0 {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_intr.rs (original lines from 210 to 212)\n-    if dmac_status & MCIDMACIntEn::DU.bits() != 0 || \n-        status & MCIRawInts::DCRC_BIT.bits() != 0 || \n-        status & MCIRawInts::RCRC_BIT.bits() != 0\n+    if dmac_status & MCIDMACIntEn::DU.bits() != 0\n+        || status & MCIRawInts::DCRC_BIT.bits() != 0\n+        || status & MCIRawInts::RCRC_BIT.bits() != 0\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_intr.rs (original lines from 218 to 220)\n-fn sdio_interrupt() {\n-\n-}\n+fn sdio_interrupt() {}\n"
            ]
          }
        },
        {
          "file": "src/mci/mci_hardware.rs",
          "features": "",
          "count": 18,
          "kinds": {
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_hardware.rs (original lines from 3 to 3)\n-use super::err::*;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_hardware.rs (original lines from 5 to 5)\n+use super::err::*;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_hardware.rs (original lines from 16 to 16)\n-    pub(crate) fn fifoth_set(&self, trans_size:MCIFifoThDMATransSize, rx_wmark:u32, tx_wmark:u32){\n+    pub(crate) fn fifoth_set(\n+        &self,\n+        trans_size: MCIFifoThDMATransSize,\n+        rx_wmark: u32,\n+        tx_wmark: u32,\n+    ) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_hardware.rs (original lines from 18 to 18)\n-        reg.write_reg(MCIFifoTh::fifoth(trans_size,rx_wmark,tx_wmark));\n+        reg.write_reg(MCIFifoTh::fifoth(trans_size, rx_wmark, tx_wmark));\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_hardware.rs (original lines from 21 to 21)\n-    pub(crate) fn cardthr_set(&self,cardthr:MCIFifoDepth){\n+    pub(crate) fn cardthr_set(&self, cardthr: MCIFifoDepth) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_hardware.rs (original lines from 26 to 26)\n-    pub(crate) fn clock_set(&self, enable:bool) {\n+    pub(crate) fn clock_set(&self, enable: bool) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_hardware.rs (original lines from 35 to 35)\n-    pub(crate) fn update_exteral_clk(&self,uhs_reg:MCIClkSrc) -> MCIResult {\n+    pub(crate) fn update_exteral_clk(&self, uhs_reg: MCIClkSrc) -> MCIResult {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_hardware.rs (original lines from 39 to 41)\n-        reg.retry_for(|reg:MCIClkSts|{\n-            reg.contains(MCIClkSts::READY)\n-        }, Some(RETRIES_TIMEOUT))?;\n+        reg.retry_for(\n+            |reg: MCIClkSts| reg.contains(MCIClkSts::READY),\n+            Some(RETRIES_TIMEOUT),\n+        )?;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_hardware.rs (original lines from 46 to 48)\n-        let reg_val = \n-        MCIClkSrc::uhs_reg(0, 0, 0x5) | \n-        MCIClkSrc::UHS_EXT_CLK_ENA;\n+        let reg_val = MCIClkSrc::uhs_reg(0, 0, 0x5) | MCIClkSrc::UHS_EXT_CLK_ENA;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_hardware.rs (original lines from 50 to 50)\n-            info!(\"invalid uhs config\"); \n+            info!(\"invalid uhs config\");\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_hardware.rs (original lines from 56 to 56)\n-    pub(crate) fn power_set(&self, enable:bool) {\n+    pub(crate) fn power_set(&self, enable: bool) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_hardware.rs (original lines from 65 to 65)\n-    pub(crate) fn clock_src_set(&self, enable:bool) {\n+    pub(crate) fn clock_src_set(&self, enable: bool) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_hardware.rs (original lines from 74 to 74)\n-    pub(crate) fn voltage_1_8v_set(&self,enable:bool) {\n+    pub(crate) fn voltage_1_8v_set(&self, enable: bool) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_hardware.rs (original lines from 91 to 96)\n-        reg.modify_reg(|reg| {\n-            reset_bits | reg\n-        });\n-        if let Err(e) = reg.retry_for(|reg:MCICtrl| {\n-            !reg.contains(reset_bits)\n-        }, Some(RETRIES_TIMEOUT)) {\n+        reg.modify_reg(|reg| reset_bits | reg);\n+        if let Err(e) = reg.retry_for(\n+            |reg: MCICtrl| !reg.contains(reset_bits),\n+            Some(RETRIES_TIMEOUT),\n+        ) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_hardware.rs (original lines from 109 to 111)\n-            if let Err(e) = reg.retry_for(|reg: MCIStatus| {\n-                reg.contains(MCIStatus::FIFO_EMPTY)\n-            }, Some(RETRIES_TIMEOUT)) {\n+            if let Err(e) = reg.retry_for(\n+                |reg: MCIStatus| reg.contains(MCIStatus::FIFO_EMPTY),\n+                Some(RETRIES_TIMEOUT),\n+            ) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_hardware.rs (original lines from 159 to 159)\n-        let reg = self.config. reg();\n+        let reg = self.config.reg();\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_hardware.rs (original lines from 199 to 199)\n-        !reg.read_reg::<MCICardDetect>().contains(MCICardDetect::DETECTED)\n+        !reg.read_reg::<MCICardDetect>()\n+            .contains(MCICardDetect::DETECTED)\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_hardware.rs (original lines from 216 to 216)\n+\n"
            ]
          }
        },
        {
          "file": "src/mci/regs.rs",
          "features": "",
          "count": 18,
          "kinds": {
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/regs.rs (original lines from 3 to 3)\n-use bitflags::bitflags;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/regs.rs (original lines from 5 to 5)\n+use bitflags::bitflags;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/regs.rs (original lines from 90 to 90)\n-    pub fn clk_sample_set(x:u32) -> Self {\n+    pub fn clk_sample_set(x: u32) -> Self {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/regs.rs (original lines from 93 to 93)\n-    pub fn clk_drv_set(x:u32) -> Self {\n+    pub fn clk_drv_set(x: u32) -> Self {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/regs.rs (original lines from 96 to 96)\n-    pub fn clk_divider_set(x:u32) -> Self {\n+    pub fn clk_divider_set(x: u32) -> Self {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/regs.rs (original lines from 99 to 102)\n-    pub fn clk_div(samp:u32,drv:u32,div:u32) -> Self {\n-        Self::clk_sample_set(samp) | \n-        Self::clk_drv_set(drv) | \n-        Self::clk_divider_set(div)\n+    pub fn clk_div(samp: u32, drv: u32, div: u32) -> Self {\n+        Self::clk_sample_set(samp) | Self::clk_drv_set(drv) | Self::clk_divider_set(div)\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/regs.rs (original lines from 104 to 104)\n-    pub fn clk_divider_get(div_reg:u32) -> Self {\n+    pub fn clk_divider_get(div_reg: u32) -> Self {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/regs.rs (original lines from 167 to 167)\n-    pub fn timeout_data(data_timeout:MCITimeout,resp_timeout:MCITimeout) -> MCITimeout{\n+    pub fn timeout_data(data_timeout: MCITimeout, resp_timeout: MCITimeout) -> MCITimeout {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/regs.rs (original lines from 169 to 170)\n-            (genmask!(31,8) & (data_timeout.bits() << 8)) | \n-            (genmask!(7,0) & resp_timeout.bits())\n+            (genmask!(31, 8) & (data_timeout.bits() << 8)) | (genmask!(7, 0) & resp_timeout.bits()),\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/regs.rs (original lines from 225 to 225)\n-        \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/regs.rs (original lines from 332 to 333)\n-    \n-    pub fn index_set(x:u32) -> Self {\n+    pub fn index_set(x: u32) -> Self {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/regs.rs (original lines from 429 to 437)\n-    pub fn fifoth(\n-        trans_size:MCIFifoThDMATransSize,\n-        rx_wmark:u32,\n-        tx_wmark:u32\n-    ) -> Self {\n-        let trans_size:u32 = trans_size.into();\n-        (MCIFifoTh::DMA_TRANS_MASK & (trans_size << 28)) |\n-        (MCIFifoTh::RX_WMARK_MASK & (rx_wmark << 16)) |\n-        (MCIFifoTh::TX_WMARK_MASK & tx_wmark)\n+    pub fn fifoth(trans_size: MCIFifoThDMATransSize, rx_wmark: u32, tx_wmark: u32) -> Self {\n+        let trans_size: u32 = trans_size.into();\n+        (MCIFifoTh::DMA_TRANS_MASK & (trans_size << 28))\n+            | (MCIFifoTh::RX_WMARK_MASK & (rx_wmark << 16))\n+            | (MCIFifoTh::TX_WMARK_MASK & tx_wmark)\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/regs.rs (original lines from 455 to 455)\n-    DMATrans256 = 0b111\n+    DMATrans256 = 0b111,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/regs.rs (original lines from 550 to 551)\n-        const EB_BIT0 = 1 << 10; \n-        const EB_BIT1 = 1 << 11; \n+        const EB_BIT0 = 1 << 10;\n+        const EB_BIT1 = 1 << 11;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/regs.rs (original lines from 680 to 680)\n-    \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/regs.rs (original lines from 684 to 684)\n-    \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/regs.rs (original lines from 690 to 692)\n-        Self::uhs_clk_div(clk_div) | \n-        Self::uhs_clk_samp(samp_phase) | \n-        Self::uhs_clk_drv(drv_phase)\n+        Self::uhs_clk_div(clk_div) | Self::uhs_clk_samp(samp_phase) | Self::uhs_clk_drv(drv_phase)\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/regs.rs (original lines from 1606 to 1606)\n+\n"
            ]
          }
        },
        {
          "file": "src/iopad/regs.rs",
          "features": "",
          "count": 17,
          "kinds": {
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/regs.rs (original lines from 1 to 3)\n-use core::ops;\n-use bitflags::bitflags;\n-use crate::regs::FlagReg;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/regs.rs (original lines from 5 to 5)\n+use crate::regs::FlagReg;\n+use bitflags::bitflags;\n+use core::ops;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/regs.rs (original lines from 7 to 7)\n-    fn func_set(x:u32) -> Self {\n+    fn func_set(x: u32) -> Self {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/regs.rs (original lines from 11 to 11)\n-    fn drive_set(x:u32) -> Self {\n+    fn drive_set(x: u32) -> Self {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/regs.rs (original lines from 15 to 15)\n-    fn pull_set(x:u32) -> Self {\n+    fn pull_set(x: u32) -> Self {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/regs.rs (original lines from 33 to 34)\n-    fn out_delay_delicate_set(x:u32) -> Self {\n-        Self::from_bits_truncate(set_reg32_bits!(x,11,9))\n+    fn out_delay_delicate_set(x: u32) -> Self {\n+        Self::from_bits_truncate(set_reg32_bits!(x, 11, 9))\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/regs.rs (original lines from 37 to 38)\n-    fn out_delay_rough_set(x:u32) -> Self {\n-        Self::from_bits_truncate(set_reg32_bits!(x,14,12))\n+    fn out_delay_rough_set(x: u32) -> Self {\n+        Self::from_bits_truncate(set_reg32_bits!(x, 14, 12))\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/regs.rs (original lines from 41 to 42)\n-    fn in_delay_delicate_set(x:u32) -> Self {\n-        Self::from_bits_truncate(set_reg32_bits!(x,3,1))\n+    fn in_delay_delicate_set(x: u32) -> Self {\n+        Self::from_bits_truncate(set_reg32_bits!(x, 3, 1))\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/regs.rs (original lines from 45 to 46)\n-    fn in_delay_rough_set(x:u32) -> Self {\n-        Self::from_bits_truncate(set_reg32_bits!(x,6,4))\n+    fn in_delay_rough_set(x: u32) -> Self {\n+        Self::from_bits_truncate(set_reg32_bits!(x, 6, 4))\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/regs.rs (original lines from 50 to 50)\n-        get_reg32_bits!(self.bits(),11,9)\n+        get_reg32_bits!(self.bits(), 11, 9)\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/regs.rs (original lines from 54 to 54)\n-        get_reg32_bits!(self.bits(),14,12)\n+        get_reg32_bits!(self.bits(), 14, 12)\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/regs.rs (original lines from 58 to 58)\n-        get_reg32_bits!(self.bits(),3,1)\n+        get_reg32_bits!(self.bits(), 3, 1)\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/regs.rs (original lines from 62 to 62)\n-        get_reg32_bits!(self.bits(),6,4)\n+        get_reg32_bits!(self.bits(), 6, 4)\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/regs.rs (original lines from 99 to 101)\n-        impl XReg0 for $reg_name {\n-\n-        }\n+        impl XReg0 for $reg_name {}\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/regs.rs (original lines from 136 to 138)\n-        impl XReg1 for $reg_name {\n-\n-        }\n+        impl XReg1 for $reg_name {}\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/regs.rs (original lines from 141 to 141)\n-\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/regs.rs (original lines from 147 to 147)\n+\n"
            ]
          }
        },
        {
          "file": "src/osa/mod.rs",
          "features": "",
          "count": 17,
          "kinds": {
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/osa/mod.rs (original lines from 1 to 1)\n-use core::{alloc::Layout, mem::MaybeUninit, ptr::NonNull, sync::atomic::{AtomicU32, Ordering}};\n+use core::{\n+    alloc::Layout,\n+    mem::MaybeUninit,\n+    ptr::NonNull,\n+    sync::atomic::{AtomicU32, Ordering},\n+};\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/osa/mod.rs (original lines from 6 to 6)\n+use lazy_static::*;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/osa/mod.rs (original lines from 10 to 10)\n-use lazy_static::*;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/osa/mod.rs (original lines from 12 to 12)\n-mod err;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/osa/mod.rs (original lines from 14 to 14)\n+mod err;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/osa/mod.rs (original lines from 28 to 28)\n-    pub static ref GLOBAL_FMEMP: Mutex<Box<FMemp<'static>>> = \n+    pub static ref GLOBAL_FMEMP: Mutex<Box<FMemp<'static>>> =\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/osa/mod.rs (original lines from 46 to 46)\n-    unsafe fn alloc_aligned(&mut self, size: usize, align: usize) -> Result<NonNull<u8>, FMempError> {\n+    unsafe fn alloc_aligned(\n+        &mut self,\n+        size: usize,\n+        align: usize,\n+    ) -> Result<NonNull<u8>, FMempError> {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/osa/mod.rs (original lines from 58 to 58)\n-}  \n+}\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/osa/mod.rs (original lines from 62 to 62)\n-    unsafe { GLOBAL_FMEMP.lock().init(); }\n+    unsafe {\n+        GLOBAL_FMEMP.lock().init();\n+    }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/osa/mod.rs (original lines from 77 to 77)\n-    unsafe { GLOBAL_FMEMP.lock().dealloc(addr, size); }\n+    unsafe {\n+        GLOBAL_FMEMP.lock().dealloc(addr, size);\n+    }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/osa/mod.rs (original lines from 96 to 96)\n-    pub fn osa_event_wait(&self, event_type: u32, _timeout_ms: u32, event: &mut u32, flags: u32) -> Result<(), &'static str> {\n+    pub fn osa_event_wait(\n+        &self,\n+        event_type: u32,\n+        _timeout_ms: u32,\n+        event: &mut u32,\n+        flags: u32,\n+    ) -> Result<(), &'static str> {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/osa/mod.rs (original lines from 124 to 124)\n-    pub static ref OSA_EVENT: Arc<OSAEvent> = \n+    pub static ref OSA_EVENT: Arc<OSAEvent> =\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/osa/mod.rs (original lines from 132 to 132)\n-pub fn osa_event_wait(event_type: u32, _timeout_ms: u32, event: &mut u32, flags: u32) -> Result<(), &'static str> {\n+pub fn osa_event_wait(\n+    event_type: u32,\n+    _timeout_ms: u32,\n+    event: &mut u32,\n+    flags: u32,\n+) -> Result<(), &'static str> {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/osa/mod.rs (original lines from 143 to 143)\n+\n"
            ],
            "Clippy(Warn)": [
              "warning: this `else { if .. }` block can be collapsed\n   --> src/osa/mod.rs:105:16\n    |\n105 |           } else {\n    |  ________________^\n106 | |             if *event & event_type != 0 {\n107 | |                 return Ok(());\n108 | |             }\n109 | |         }\n    | |_________^\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#collapsible_else_if\nhelp: collapse nested if block\n    |\n105 ~         } else if *event & event_type != 0 {\n106 +             return Ok(());\n107 +         }\n    |\n\n",
              "warning: you should consider adding a `Default` implementation for `FMemp<'a>`\n  --> src/osa/mod.rs:34:5\n   |\n34 | /     pub fn new() -> Self {\n35 | |         Self {\n36 | |             tlsf_ptr: Tlsf::new(),\n37 | |             is_ready: false,\n38 | |         }\n39 | |     }\n   | |_____^\n   |\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#new_without_default\nhelp: try adding this\n   |\n32 + impl<'a> Default for FMemp<'a> {\n33 +     fn default() -> Self {\n34 +         Self::new()\n35 +     }\n36 + }\n   |\n\n",
              "warning: method `default` can be confused for the standard trait method `std::default::Default::default`\n  --> src/osa/mod.rs:86:5\n   |\n86 | /     pub fn default() -> Self {\n87 | |         Self {\n88 | |             event_flag: AtomicU32::new(0),\n89 | |             handle: Semaphore::new(0),\n90 | |         }\n91 | |     }\n   | |_____^\n   |\n   = help: consider implementing the trait `std::default::Default` or choosing a less ambiguous method name\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#should_implement_trait\n   = note: `#[warn(clippy::should_implement_trait)]` on by default\n\n"
            ]
          }
        },
        {
          "file": "src/mci/mci_cmddata.rs",
          "features": "",
          "count": 13,
          "kinds": {
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmddata.rs (original lines from 1 to 1)\n-use super::mci_data::MCIData;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmddata.rs (original lines from 3 to 3)\n+use super::mci_data::MCIData;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmddata.rs (original lines from 4 to 4)\n-#[derive(Debug,Clone)]\n+#[derive(Debug, Clone)]\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmddata.rs (original lines from 11 to 11)\n-    success: bool\n+    success: bool,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmddata.rs (original lines from 23 to 23)\n-            success: false\n+            success: false,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmddata.rs (original lines from 40 to 40)\n-    pub(crate) fn success_set(&mut self,success: bool) {\n+    pub(crate) fn success_set(&mut self, success: bool) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmddata.rs (original lines from 48 to 48)\n-    pub(crate) fn cmdidx_set(&mut self,cmdidx:u32) {\n+    pub(crate) fn cmdidx_set(&mut self, cmdidx: u32) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmddata.rs (original lines from 56 to 56)\n-    pub(crate) fn cmdarg_set(&mut self,cmdarg:u32) {\n+    pub(crate) fn cmdarg_set(&mut self, cmdarg: u32) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmddata.rs (original lines from 59 to 59)\n-    \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmddata.rs (original lines from 64 to 64)\n-    pub(crate) fn flag_set(&mut self,flag:MCICmdFlag) {\n+    pub(crate) fn flag_set(&mut self, flag: MCICmdFlag) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmddata.rs (original lines from 88 to 88)\n-    pub(crate) fn set_data(&mut self,data: Option<MCIData>) {\n+    pub(crate) fn set_data(&mut self, data: Option<MCIData>) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmddata.rs (original lines from 91 to 91)\n-\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_cmddata.rs (original lines from 93 to 93)\n+\n"
            ]
          }
        },
        {
          "file": "tests/test.rs",
          "features": "",
          "count": 11,
          "kinds": {
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/tests/test.rs (original lines from 10 to 10)\n-    use core::{arch::{aarch64::{__dsb, __isb, SY}, asm}, ptr::NonNull, time::Duration};\n+    use core::{\n+        arch::{\n+            aarch64::{__dsb, __isb, SY},\n+            asm,\n+        },\n+        ptr::NonNull,\n+        time::Duration,\n+    };\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/tests/test.rs (original lines from 14 to 14)\n-        globals::{global_val, PlatformInfoKind}, irq::{IrqHandleResult, IrqParam}, mem::{mmu::iomap, PhysAddr, VirtAddr}, platform_if::CacheOp, time::spin_delay, GetIrqConfig\n+        globals::{global_val, PlatformInfoKind},\n+        irq::{IrqHandleResult, IrqParam},\n+        mem::{mmu::iomap, PhysAddr, VirtAddr},\n+        platform_if::CacheOp,\n+        time::spin_delay,\n+        GetIrqConfig,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/tests/test.rs (original lines from 18 to 19)\n-        mci::{fsdif_interrupt_handler, \n-        regs::{MCICtrl, MCIDMACStatus, MCIIntMask, MCIRawInts, MCIReg}}, sd::{SdCard, REG_BASE}, set_impl, IoPad, Kernel, PAD_ADDRESS\n+        mci::{\n+            fsdif_interrupt_handler,\n+            regs::{MCICtrl, MCIDMACStatus, MCIIntMask, MCIRawInts, MCIReg},\n+        },\n+        sd::{SdCard, REG_BASE},\n+        set_impl, IoPad, Kernel, PAD_ADDRESS,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/tests/test.rs (original lines from 47 to 47)\n-        unsafe { REG_BASE = mci_reg_base; }\n+        unsafe {\n+            REG_BASE = mci_reg_base;\n+        }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/tests/test.rs (original lines from 53 to 53)\n-            let irq_info= mci0.irq_info().unwrap();\n+            let irq_info = mci0.irq_info().unwrap();\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/tests/test.rs (original lines from 72 to 72)\n-        let mut sdcard = SdCard::new(mci_reg_base,iopad);\n+        let mut sdcard = SdCard::new(mci_reg_base, iopad);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/tests/test.rs (original lines from 74 to 74)\n-            error!(\"Sd Card Init Fail, error = {:?}\",err);\n+            error!(\"Sd Card Init Fail, error = {:?}\", err);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/tests/test.rs (original lines from 77 to 77)\n-        \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/tests/test.rs (original lines from 87 to 87)\n-        sdcard.write_blocks(&mut buffer, SD_START_BLOCK, SD_USE_BLOCK).unwrap();\n+        sdcard\n+            .write_blocks(&mut buffer, SD_START_BLOCK, SD_USE_BLOCK)\n+            .unwrap();\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/tests/test.rs (original lines from 91 to 91)\n-        sdcard.read_blocks(&mut receive_buf, SD_START_BLOCK, SD_USE_BLOCK).unwrap();\n+        sdcard\n+            .read_blocks(&mut receive_buf, SD_START_BLOCK, SD_USE_BLOCK)\n+            .unwrap();\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/tests/test.rs (original lines from 179 to 179)\n-            debug!(\"do mmap, va: {:x}, pa {:x}\", virt_addr.as_ptr() as usize, paddr.as_usize());\n+            debug!(\n+                \"do mmap, va: {:x}, pa {:x}\",\n+                virt_addr.as_ptr() as usize,\n+                paddr.as_usize()\n+            );\n"
            ]
          }
        },
        {
          "file": "src/mci/mci_pio.rs",
          "features": "",
          "count": 10,
          "kinds": {
            "Clippy(Warn)": [
              "warning: the loop variable `i` is only used to index `buf`\n  --> src/mci/mci_pio.rs:20:18\n   |\n20 |         for i in 0..wr_times {\n   |                  ^^^^^^^^^^^\n   |\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_range_loop\n   = note: `#[warn(clippy::needless_range_loop)]` on by default\nhelp: consider using an iterator\n   |\n20 -         for i in 0..wr_times {\n20 +         for <item> in buf.iter().take(wr_times) {\n   |\n\n"
            ],
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_pio.rs (original lines from 1 to 4)\n-use log::*;\n-use super::mci_data::MCIData;\n-use super::MCI;\n-use super::err::*;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_pio.rs (original lines from 6 to 6)\n+use super::err::*;\n+use super::mci_data::MCIData;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_pio.rs (original lines from 7 to 7)\n+use super::MCI;\n+use log::*;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_pio.rs (original lines from 14 to 14)\n-        }else {\n+        } else {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_pio.rs (original lines from 30 to 30)\n-        let buf = if let Some(buf) = data.buf_mut(){\n+        let buf = if let Some(buf) = data.buf_mut() {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_pio.rs (original lines from 32 to 32)\n-        }else {\n+        } else {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_pio.rs (original lines from 39 to 39)\n-            error!(\"Fifo do not support writing more than 0x{:x}.\",MCI_MAX_FIFO_CNT);\n+            error!(\n+                \"Fifo do not support writing more than 0x{:x}.\",\n+                MCI_MAX_FIFO_CNT\n+            );\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_pio.rs (original lines from 47 to 47)\n-    \n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_pio.rs (original lines from 49 to 49)\n+\n"
            ]
          }
        },
        {
          "file": "src/osa/pool_buffer.rs",
          "features": "",
          "count": 10,
          "kinds": {
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/osa/pool_buffer.rs (original lines from 4 to 4)\n-use core::{ptr::{copy_nonoverlapping, write_bytes, NonNull}, slice::{from_raw_parts, from_raw_parts_mut}};\n+use core::{\n+    ptr::{copy_nonoverlapping, write_bytes, NonNull},\n+    slice::{from_raw_parts, from_raw_parts_mut},\n+};\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/osa/pool_buffer.rs (original lines from 15 to 15)\n-    align: usize\n+    align: usize,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/osa/pool_buffer.rs (original lines from 28 to 28)\n-            align\n+            align,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/osa/pool_buffer.rs (original lines from 41 to 45)\n-            copy_nonoverlapping(\n-                src.as_ptr() as *mut u8,\n-                self.addr.as_ptr(),\n-                len\n-            );\n+            copy_nonoverlapping(src.as_ptr() as *mut u8, self.addr.as_ptr(), len);\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/osa/pool_buffer.rs (original lines from 102 to 102)\n-        unsafe { write_bytes(self.addr.as_ptr(), 0, self.size); }\n+        unsafe {\n+            write_bytes(self.addr.as_ptr(), 0, self.size);\n+        }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/osa/pool_buffer.rs (original lines from 125 to 126)\n-           let slice = from_raw_parts(self.addr.as_ptr() as *const u32, self.size / 4);\n-           slice.to_vec()\n+            let slice = from_raw_parts(self.addr.as_ptr() as *const u32, self.size / 4);\n+            slice.to_vec()\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/osa/pool_buffer.rs (original lines from 130 to 130)\n+\n"
            ],
            "Clippy(Warn)": [
              "warning: manual slice size calculation\n  --> src/osa/pool_buffer.rs:34:19\n   |\n34 |         let len = src.len() * size_of::<T>();\n   |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `core::mem::size_of_val(src)`\n   |\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#manual_slice_size_calculation\n   = note: `#[warn(clippy::manual_slice_size_calculation)]` on by default\n\n",
              "warning: using `clone` on type `NonNull<u8>` which implements the `Copy` trait\n   --> src/osa/pool_buffer.rs:112:9\n    |\n112 |         self.addr.clone()\n    |         ^^^^^^^^^^^^^^^^^ help: try removing the `clone` call: `self.addr`\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#clone_on_copy\n\n",
              "warning: an implementation of `From` is preferred since it gives you `Into<_>` for free where the reverse isn't true\n   --> src/osa/pool_buffer.rs:122:1\n    |\n122 | impl Into<Vec<u32>> for PoolBuffer {\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n    = help: `impl From<Local> for Foreign` is allowed by the orphan rules, for more information see\n            https://doc.rust-lang.org/reference/items/implementations.html#trait-implementation-coherence\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#from_over_into\nhelp: replace the `Into` implementation with `From<osa::pool_buffer::PoolBuffer>`\n    |\n122 ~ impl From<PoolBuffer> for Vec<u32> {\n123 ~     fn from(val: PoolBuffer) -> Self {\n124 |         unsafe {\n125 ~            let slice = from_raw_parts(val.addr.as_ptr() as *const u32, val.size / 4);\n    |\n\n"
            ]
          }
        },
        {
          "file": "src/mci_host/constants.rs",
          "features": "",
          "count": 9,
          "kinds": {
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/constants.rs (original lines from 69 to 69)\n-    SendRelativeAddress = 3, // Send Relative Address\n+    SendRelativeAddress = 3,    // Send Relative Address\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/constants.rs (original lines from 72 to 73)\n-    RWIODirect = 52, // Read/Write I/O Direct\n-    RWIODirectExtended = 53, // Read/Write I/O Direct Extended\n+    RWIODirect = 52,            // Read/Write I/O Direct\n+    RWIODirectExtended = 53,    // Read/Write I/O Direct Extended\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/constants.rs (original lines from 78 to 98)\n-    SDIOVer = 0x00,                 // CCCR & SDIO version\n-    SDVersion = 0x01,               // SD version\n-    IOEnable = 0x02,                // io enable register\n-    IOReady = 0x03,                 // io ready register\n-    IOIntEnable = 0x04,             // io interrupt enable register\n-    IOIntPending = 0x05,            // io interrupt pending register\n-    IOAbort = 0x06,                 // io abort register\n-    BusInterface = 0x07,            // bus interface register\n-    CardCapability = 0x08,          // card capability register\n-    CommonCISPointer = 0x09,        // common CIS pointer register\n-    BusSuspend = 0x0C,              // bus suspend register\n-    FunctionSelect = 0x0D,          // function select register\n-    ExecutionFlag = 0x0E,           // execution flag register\n-    ReadyFlag = 0x0F,               // ready flag register\n-    FN0BlockSizeLow = 0x10,         // FN0 block size register\n-    FN0BlockSizeHigh = 0x11,        // FN0 block size register\n-    PowerControl = 0x12,            // power control register\n-    BusSpeed = 0x13,                // bus speed register\n-    UHSITimingSupport = 0x14,       // UHS-I timing support register\n-    DriverStrength = 0x15,          // Driver strength register\n-    InterruptExtension = 0x16,      // Interrupt extension register\n+    SDIOVer = 0x00,            // CCCR & SDIO version\n+    SDVersion = 0x01,          // SD version\n+    IOEnable = 0x02,           // io enable register\n+    IOReady = 0x03,            // io ready register\n+    IOIntEnable = 0x04,        // io interrupt enable register\n+    IOIntPending = 0x05,       // io interrupt pending register\n+    IOAbort = 0x06,            // io abort register\n+    BusInterface = 0x07,       // bus interface register\n+    CardCapability = 0x08,     // card capability register\n+    CommonCISPointer = 0x09,   // common CIS pointer register\n+    BusSuspend = 0x0C,         // bus suspend register\n+    FunctionSelect = 0x0D,     // function select register\n+    ExecutionFlag = 0x0E,      // execution flag register\n+    ReadyFlag = 0x0F,          // ready flag register\n+    FN0BlockSizeLow = 0x10,    // FN0 block size register\n+    FN0BlockSizeHigh = 0x11,   // FN0 block size register\n+    PowerControl = 0x12,       // power control register\n+    BusSpeed = 0x13,           // bus speed register\n+    UHSITimingSupport = 0x14,  // UHS-I timing support register\n+    DriverStrength = 0x15,     // Driver strength register\n+    InterruptExtension = 0x16, // Interrupt extension register\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/constants.rs (original lines from 143 to 143)\n-    pub(crate) fn current_state(state:u32) -> Self {\n+    pub(crate) fn current_state(state: u32) -> Self {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/constants.rs (original lines from 158 to 158)\n-    \n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/constants.rs (original lines from 187 to 187)\n-        \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/constants.rs (original lines from 192 to 192)\n-        \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/constants.rs (original lines from 197 to 197)\n-        \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/constants.rs (original lines from 307 to 307)\n+\n"
            ]
          }
        },
        {
          "file": "src/mci_host/mci_host_config.rs",
          "features": "",
          "count": 9,
          "kinds": {
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_host_config.rs (original lines from 13 to 24)\n-    pub(crate) host_id: MCIId,                     // 主机 ID\n-    pub(crate) host_type: MCIHostType,           // 主机类型\n-    pub(crate) card_type: MCIHostCardType,       // 卡类型\n-    pub(crate) enable_irq: bool,                 // 是否启用中断\n-    pub(crate) enable_dma: bool,                 // 是否启用 DMA\n-    pub(crate) endian_mode: MCIHostEndianMode,   // 字节序模式\n-    pub(crate) max_trans_size: usize,            // 最大传输大小\n-    pub(crate) def_block_size: usize,            // 默认块大小\n-    pub(crate) card_clock: u32,                  // 卡时钟频率\n-    pub(crate) is_uhs_card: bool,                // 是否为 UHS 卡\n-    /* for SDIO card, to support card customized interrupt handling */ // todo 暂时没实现这部分功能\n-    // todo timeTuner\n+    pub(crate) host_id: MCIId,                 // 主机 ID\n+    pub(crate) host_type: MCIHostType,         // 主机类型\n+    pub(crate) card_type: MCIHostCardType,     // 卡类型\n+    pub(crate) enable_irq: bool,               // 是否启用中断\n+    pub(crate) enable_dma: bool,               // 是否启用 DMA\n+    pub(crate) endian_mode: MCIHostEndianMode, // 字节序模式\n+    pub(crate) max_trans_size: usize,          // 最大传输大小\n+    pub(crate) def_block_size: usize,          // 默认块大小\n+    pub(crate) card_clock: u32,                // 卡时钟频率\n+    pub(crate) is_uhs_card: bool,              // 是否为 UHS 卡\n+                                               /* for SDIO card, to support card customized interrupt handling */ // todo 暂时没实现这部分功能\n+                                               // todo timeTuner\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_host_config.rs (original lines from 66 to 66)\n-    SDIF\n+    SDIF,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_host_config.rs (original lines from 75 to 75)\n-    SDIO\n+    SDIO,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_host_config.rs (original lines from 80 to 80)\n-    Big = 0, /* Big endian mode */\n+    Big = 0,         /* Big endian mode */\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_host_config.rs (original lines from 82 to 82)\n-    Little = 2, /* Little endian mode */\n+    Little = 2,      /* Little endian mode */\n"
            ],
            "Clippy(Warn)": [
              "warning: name `SDMMC` contains a capitalized acronym\n  --> src/mci_host/mci_host_config.rs:65:5\n   |\n65 |     SDMMC,\n   |     ^^^^^ help: consider making the acronym lowercase, except the initial letter: `Sdmmc`\n   |\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#upper_case_acronyms\n   = note: `#[warn(clippy::upper_case_acronyms)]` on by default\n\n",
              "warning: name `SDIF` contains a capitalized acronym\n  --> src/mci_host/mci_host_config.rs:66:5\n   |\n66 |     SDIF\n   |     ^^^^ help: consider making the acronym lowercase, except the initial letter: `Sdif`\n   |\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#upper_case_acronyms\n\n",
              "warning: name `EMMC` contains a capitalized acronym\n  --> src/mci_host/mci_host_config.rs:74:5\n   |\n74 |     EMMC,\n   |     ^^^^ help: consider making the acronym lowercase, except the initial letter: `Emmc`\n   |\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#upper_case_acronyms\n\n",
              "warning: name `SDIO` contains a capitalized acronym\n  --> src/mci_host/mci_host_config.rs:75:5\n   |\n75 |     SDIO\n   |     ^^^^ help: consider making the acronym lowercase, except the initial letter: `Sdio`\n   |\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#upper_case_acronyms\n\n"
            ]
          }
        },
        {
          "file": "src/mci/consts.rs",
          "features": "",
          "count": 8,
          "kinds": {
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/consts.rs (original lines from 45 to 46)\n-    DMA,      // DMA传输模式\n-    PIO,      // PIO传输模式（通过读/写Fifo）\n+    DMA, // DMA传输模式\n+    PIO, // PIO传输模式（通过读/写Fifo）\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/consts.rs (original lines from 52 to 53)\n-    GeneralIntr,       // 属于控制器的中断状态\n-    DmaIntr,           // 属于DMA的中断状态\n+    GeneralIntr, // 属于控制器的中断状态\n+    DmaIntr,     // 属于DMA的中断状态\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/consts.rs (original lines from 59 to 64)\n-    CardDetected = 0,  // 卡检测事件\n-    CmdDone,           // 命令传输完成事件\n-    DataDone,          // 包含数据的命令传输完成事件\n-    SdioIrq,           // SDIO卡自定义事件\n-    ErrOccured,        // 传输中出现错误\n-    NumOfEvt,          // 事件数量\n+    CardDetected = 0, // 卡检测事件\n+    CmdDone,          // 命令传输完成事件\n+    DataDone,         // 包含数据的命令传输完成事件\n+    SdioIrq,          // SDIO卡自定义事件\n+    ErrOccured,       // 传输中出现错误\n+    NumOfEvt,         // 事件数量\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/consts.rs (original lines from 144 to 144)\n-pub const RETRIES_TIMEOUT:usize = 50000; /* timeout for retries */\n+pub const RETRIES_TIMEOUT: usize = 50000; /* timeout for retries */\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/consts.rs (original lines from 146 to 147)\n-pub const FSDIF_DELAY_US:u32 = 5;\n-pub const MCI_MAX_FIFO_CNT:u32 = 0x800;\n+pub const FSDIF_DELAY_US: u32 = 5;\n+pub const MCI_MAX_FIFO_CNT: u32 = 0x800;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/consts.rs (original lines from 149 to 149)\n-pub const FSL_SDMMC_MAX_CMD_RETRIES:u32 = 10;\n+pub const FSL_SDMMC_MAX_CMD_RETRIES: u32 = 10;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/consts.rs (original lines from 157 to 163)\n-pub const FSDIF_IDMAC_DES0_DIC: u32 = 1 << 1;    /* 内部描述表不触发TI/RI中断 */\n-pub const FSDIF_IDMAC_DES0_LD: u32 = 1 << 2;     /* 数据的最后一个描述符 */\n-pub const FSDIF_IDMAC_DES0_FD: u32 = 1 << 3;     /* 数据的第一个描述符 */\n-pub const FSDIF_IDMAC_DES0_CH: u32 = 1 << 4;     /* 链接下一个描述符地址 */\n-pub const FSDIF_IDMAC_DES0_ER: u32 = 1 << 5;     /* 链表已经到达最后一个链表 */\n-pub const FSDIF_IDMAC_DES0_CES: u32 = 1 << 30;   /* RINTSTS寄存器错误汇总 */\n-pub const FSDIF_IDMAC_DES0_OWN: u32 = 1 << 31;   /* 描述符关联DMA，完成传输后该位置置0 */\n+pub const FSDIF_IDMAC_DES0_DIC: u32 = 1 << 1; /* 内部描述表不触发TI/RI中断 */\n+pub const FSDIF_IDMAC_DES0_LD: u32 = 1 << 2; /* 数据的最后一个描述符 */\n+pub const FSDIF_IDMAC_DES0_FD: u32 = 1 << 3; /* 数据的第一个描述符 */\n+pub const FSDIF_IDMAC_DES0_CH: u32 = 1 << 4; /* 链接下一个描述符地址 */\n+pub const FSDIF_IDMAC_DES0_ER: u32 = 1 << 5; /* 链表已经到达最后一个链表 */\n+pub const FSDIF_IDMAC_DES0_CES: u32 = 1 << 30; /* RINTSTS寄存器错误汇总 */\n+pub const FSDIF_IDMAC_DES0_OWN: u32 = 1 << 31; /* 描述符关联DMA，完成传输后该位置置0 */\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/consts.rs (original lines from 171 to 171)\n+\n"
            ]
          }
        },
        {
          "file": "src/mci/mci_data.rs",
          "features": "",
          "count": 8,
          "kinds": {
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_data.rs (original lines from 3 to 3)\n-#[derive(Debug,Clone)]\n+#[derive(Debug, Clone)]\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_data.rs (original lines from 15 to 15)\n-\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_data.rs (original lines from 30 to 30)\n-    pub(crate) fn blksz_set(&mut self,blksz: u32) {\n+    pub(crate) fn blksz_set(&mut self, blksz: u32) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_data.rs (original lines from 38 to 38)\n-    pub(crate) fn blkcnt_set(&mut self,blkcnt: u32) {\n+    pub(crate) fn blkcnt_set(&mut self, blkcnt: u32) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_data.rs (original lines from 46 to 46)\n-    pub(crate) fn datalen_set(&mut self,datalen: u32) {\n+    pub(crate) fn datalen_set(&mut self, datalen: u32) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_data.rs (original lines from 62 to 62)\n-    pub(crate) fn buf_set(&mut self,buf: Option<Vec<u32>>) {\n+    pub(crate) fn buf_set(&mut self, buf: Option<Vec<u32>>) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_data.rs (original lines from 73 to 73)\n-\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_data.rs (original lines from 75 to 75)\n+\n"
            ]
          }
        },
        {
          "file": "src/mci/mci_timing.rs",
          "features": "",
          "count": 8,
          "kinds": {
            "Clippy(Warn)": [
              "warning: bound is defined in more than one place\n   --> src/mci/mci_timing.rs:129:25\n    |\n129 | fn apply_delay_settings<T: XReg1 + BitsOps>(\n    |                         ^\n...\n135 |     T: 'static,\n    |     ^\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#multiple_bound_locations\n    = note: `#[warn(clippy::multiple_bound_locations)]` on by default\n\n",
              "warning: bound is defined in more than one place\n   --> src/mci/mci_timing.rs:129:25\n    |\n129 | fn apply_delay_settings<T: XReg1 + BitsOps>(\n    |                         ^\n...\n135 |     T: 'static,\n    |     ^\n    |\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#multiple_bound_locations\n    = note: `#[warn(clippy::multiple_bound_locations)]` on by default\n\n",
              "warning: you should consider adding a `Default` implementation for `MCITiming`\n  --> src/mci/mci_timing.rs:17:5\n   |\n17 | /     pub fn new() -> Self {\n18 | |         MCITiming {\n19 | |             use_hold: false,\n20 | |             clk_div: 0,\n...  |\n25 | |     }\n   | |_____^\n   |\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#new_without_default\n   = note: `#[warn(clippy::new_without_default)]` on by default\nhelp: try adding this\n   |\n16 + impl Default for MCITiming {\n17 +     fn default() -> Self {\n18 +         Self::new()\n19 +     }\n20 + }\n   |\n\n"
            ],
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_timing.rs (original lines from 13 to 13)\n-    pad_delay: MCIPadDelay //* 用于调整IO的延时 */\n+    pad_delay: MCIPadDelay, //* 用于调整IO的延时 */\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_timing.rs (original lines from 36 to 36)\n-    pub(crate) fn pad_delay(&self,iopad:&mut IoPad,mci_id: MCIId) {\n+    pub(crate) fn pad_delay(&self, iopad: &mut IoPad, mci_id: MCIId) {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_timing.rs (original lines from 38 to 39)\n-            MCIPadDelay::Set => set_pad_delay(iopad,mci_id),\n-            MCIPadDelay::Unset => unset_pad_delay(iopad,mci_id),\n+            MCIPadDelay::Set => set_pad_delay(iopad, mci_id),\n+            MCIPadDelay::Unset => unset_pad_delay(iopad, mci_id),\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_timing.rs (original lines from 98 to 98)\n-    pad_delay: MCIPadDelay::Set\n+    pad_delay: MCIPadDelay::Set,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_timing.rs (original lines from 183 to 183)\n+\n"
            ]
          }
        },
        {
          "file": "src/lib.rs",
          "features": "",
          "count": 5,
          "kinds": {
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/lib.rs (original lines from 9 to 9)\n-pub mod mci;\n+mod aarch;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/lib.rs (original lines from 11 to 11)\n+pub mod mci;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/lib.rs (original lines from 14 to 14)\n-mod aarch;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/lib.rs (original lines from 49 to 49)\n-    unsafe { _phytium_mci_flush(addr, size); }\n+    unsafe {\n+        _phytium_mci_flush(addr, size);\n+    }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/lib.rs (original lines from 57 to 57)\n-    unsafe { _phytium_mci_invalidate(addr, size); }\n+    unsafe {\n+        _phytium_mci_invalidate(addr, size);\n+    }\n"
            ]
          }
        },
        {
          "file": "src/mci/mci_config.rs",
          "features": "",
          "count": 5,
          "kinds": {
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_config.rs (original lines from 6 to 6)\n-use super::mci_timing::*;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_config.rs (original lines from 8 to 8)\n+use super::mci_timing::*;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_config.rs (original lines from 12 to 16)\n-    instance_id: MCIId,         /* Device instance id */\n-    reg: MCIReg,                /* Device register base address */\n-    irq_num: u32,               /* Device IRQ number */\n-    trans_mode: MCITransMode,   /* Trans mode, PIO/DMA */\n-    non_removable: bool,        /* Non-removable media, e.g. eMMC */\n+    instance_id: MCIId,       /* Device instance id */\n+    reg: MCIReg,              /* Device register base address */\n+    irq_num: u32,             /* Device IRQ number */\n+    trans_mode: MCITransMode, /* Trans mode, PIO/DMA */\n+    non_removable: bool,      /* Non-removable media, e.g. eMMC */\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_config.rs (original lines from 28 to 29)\n-        \n-        if cfg!(feature=\"pio\") {\n+\n+        if cfg!(feature = \"pio\") {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/mci_config.rs (original lines from 48 to 48)\n-    pub fn get_tuning(clock_freq: MCIClkSpeed, non_removable: bool) ->  Option<MCITiming> {\n+    pub fn get_tuning(clock_freq: MCIClkSpeed, non_removable: bool) -> Option<MCITiming> {\n"
            ]
          }
        },
        {
          "file": "src/mci_host/sd/consts.rs",
          "features": "",
          "count": 5,
          "kinds": {
            "Clippy(Warn)": [
              "warning: all variants have the same postfix: `Mode`\n  --> src/mci_host/sd/consts.rs:4:1\n   |\n4  | / pub(crate) enum SdTimingMode {\n5  | |     SDR12DefaultMode = 0,\n6  | |     SDR25HighSpeedMode = 1,\n7  | |     SDR50Mode = 2,\n8  | |     SDR104Mode = 3,\n9  | |     DDR50Mode = 4,\n10 | | }\n   | |_^\n   |\n   = help: remove the postfixes and use full paths to the variants instead of glob imports\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#enum_variant_names\n   = note: `#[warn(clippy::enum_variant_names)]` on by default\n\n"
            ],
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/consts.rs (original lines from 37 to 44)\n-    SendRelativeAddress = 3,      // Send Relative Address\n-    Switch = 6,                   // Switch Function\n-    SendInterfaceCondition = 8,   // Send Interface Condition\n-    VoltageSwitch = 11,           // Voltage Switch\n-    SpeedClassControl = 20,       // Speed Class control\n-    SendTuningBlock = 19,         // Send Tuning Block\n-    EraseWriteBlockStart = 32,    // Write Block Start\n-    EraseWriteBlockEnd = 33,      // Write Block End\n+    SendRelativeAddress = 3,    // Send Relative Address\n+    Switch = 6,                 // Switch Function\n+    SendInterfaceCondition = 8, // Send Interface Condition\n+    VoltageSwitch = 11,         // Voltage Switch\n+    SpeedClassControl = 20,     // Speed Class control\n+    SendTuningBlock = 19,       // Send Tuning Block\n+    EraseWriteBlockStart = 32,  // Write Block Start\n+    EraseWriteBlockEnd = 33,    // Write Block End\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/consts.rs (original lines from 49 to 55)\n-    SetBusWdith = 6,                    /* Set Bus Width */\n-    Status = 13,                        /* Send SD status */\n-    SendNumberWriteBlocks = 22,         /* Send Number Of Written Blocks */\n-    SetWriteBlockEraseCount = 23,       /* Set Write Block Erase Count */\n-    SendOperationCondition = 41,        /* Send Operation Condition */\n-    SetClearCardDetect = 42,            /* Set Connect/Disconnect pull up on detect pin */\n-    SendScr = 51,                       /* Send Scr */\n+    SetBusWdith = 6,              /* Set Bus Width */\n+    Status = 13,                  /* Send SD status */\n+    SendNumberWriteBlocks = 22,   /* Send Number Of Written Blocks */\n+    SetWriteBlockEraseCount = 23, /* Set Write Block Erase Count */\n+    SendOperationCondition = 41,  /* Send Operation Condition */\n+    SetClearCardDetect = 42,      /* Set Connect/Disconnect pull up on detect pin */\n+    SendScr = 51,                 /* Send Scr */\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/consts.rs (original lines from 69 to 69)\n-    CurrentLimit = 3\n+    CurrentLimit = 3,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/consts.rs (original lines from 123 to 123)\n-pub(crate) const SD_CARD_ACCESS_WAIT_IDLE_TIMEOUT:u32 = 600;\n+pub(crate) const SD_CARD_ACCESS_WAIT_IDLE_TIMEOUT: u32 = 600;\n+\n"
            ]
          }
        },
        {
          "file": "src/tools.rs",
          "features": "",
          "count": 5,
          "kinds": {
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/tools.rs (original lines from 8 to 11)\n-    ((value & 0x000000FF) << 24) |\n-    ((value & 0x0000FF00) << 8)  |\n-    ((value & 0x00FF0000) >> 8)  |\n-    ((value & 0xFF000000) >> 24)\n+    ((value & 0x000000FF) << 24)\n+        | ((value & 0x0000FF00) << 8)\n+        | ((value & 0x00FF0000) >> 8)\n+        | ((value & 0xFF000000) >> 24)\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/tools.rs (original lines from 16 to 16)\n-    \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/tools.rs (original lines from 18 to 18)\n-    \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/tools.rs (original lines from 24 to 24)\n-    \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/tools.rs (original lines from 27 to 27)\n+\n"
            ]
          }
        },
        {
          "file": "src/osa/semaphore.rs",
          "features": "",
          "count": 4,
          "kinds": {
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/osa/semaphore.rs (original lines from 9 to 9)\n-        Self { count: AtomicIsize::new(count) }\n+        Self {\n+            count: AtomicIsize::new(count),\n+        }\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/osa/semaphore.rs (original lines from 16 to 18)\n-                if self.count.compare_exchange(\n-                    current, current - 1, Ordering::Acquire, Ordering::Relaxed\n-                ).is_ok() {\n+                if self\n+                    .count\n+                    .compare_exchange(current, current - 1, Ordering::Acquire, Ordering::Relaxed)\n+                    .is_ok()\n+                {\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/osa/semaphore.rs (original lines from 30 to 30)\n+\n"
            ],
            "Clippy(Warn)": [
              "warning: this `if` statement can be collapsed\n  --> src/osa/semaphore.rs:15:13\n   |\n15 | /             if current > 0 {\n16 | |                 if self.count.compare_exchange(\n17 | |                     current, current - 1, Ordering::Acquire, Ordering::Relaxed\n18 | |                 ).is_ok() {\n...  |\n21 | |             }\n   | |_____________^\n   |\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#collapsible_if\nhelp: collapse nested if block\n   |\n15 ~             if current > 0 && self.count.compare_exchange(\n16 +                     current, current - 1, Ordering::Acquire, Ordering::Relaxed\n17 +                 ).is_ok() {\n18 +                 break;\n19 +             }\n   |\n\n"
            ]
          }
        },
        {
          "file": "src/mci_host/sd/status.rs",
          "features": "",
          "count": 3,
          "kinds": {
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/status.rs (original lines from 10 to 10)\n-    pub(crate)  protected_size: u32,\n+    pub(crate) protected_size: u32,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/status.rs (original lines from 46 to 46)\n-    \n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/status.rs (original lines from 48 to 48)\n+\n"
            ]
          }
        },
        {
          "file": "src/mci_host/sd/usr_param.rs",
          "features": "",
          "count": 3,
          "kinds": {
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/usr_param.rs (original lines from 1 to 2)\n-use alloc::rc::Rc;\n-use crate::mci_host::mci_host_card_detect::MCIHostCardDetect;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/usr_param.rs (original lines from 4 to 4)\n+use crate::mci_host::mci_host_card_detect::MCIHostCardDetect;\n+use alloc::rc::Rc;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/usr_param.rs (original lines from 20 to 20)\n-\n"
            ]
          }
        },
        {
          "file": "src/mci_host/err.rs",
          "features": "",
          "count": 2,
          "kinds": {
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/err.rs (original lines from 13 to 60)\n-    NotSupportYet,                       // Haven't supported\n-    TransferFailed,                      // Send command failed\n-    SetCardBlockSizeFailed,              // Set block size failed\n-    HostNotSupport,                      // Host doesn't support\n-    CardNotSupport,                      // Card doesn't support\n-    AllSendCidFailed,                    // Send CID failed\n-    SendRelativeAddressFailed,           // Send relative address failed\n-    SendCsdFailed,                       // Send CSD failed\n-    SelectCardFailed,                    // Select card failed\n-    SendScrFailed,                       // Send SCR failed\n-    SetDataBusWidthFailed,               // Set bus width failed\n-    GoIdleFailed,                        // Go idle failed\n-    HandShakeOperationConditionFailed,   // Send Operation Condition failed\n-    SendApplicationCommandFailed,        // Send application command failed\n-    SwitchFailed,                        // Switch command failed\n-    StopTransmissionFailed,              // Stop transmission failed\n-    WaitWriteCompleteFailed,             // Wait write complete failed\n-    SetBlockCountFailed,                 // Set block count failed\n-    SetRelativeAddressFailed,            // Set relative address failed\n-    SwitchBusTimingFailed,               // Switch high speed failed\n-    SendExtendedCsdFailed,               // Send EXT_CSD failed\n-    ConfigureBootFailed,                 // Configure boot failed\n-    ConfigureExtendedCsdFailed,          // Configure EXT_CSD failed\n-    EnableHighCapacityEraseFailed,       // Enable high capacity erase failed\n-    SendTestPatternFailed,               // Send test pattern failed\n-    ReceiveTestPatternFailed,            // Receive test pattern failed\n-    SdioResponseError,                   // SDIO response error\n-    SdioInvalidArgument,                 // SDIO invalid argument response error\n-    SdioSendOperationConditionFail,      // SDIO send operation condition fail\n-    InvalidVoltage,                      // Invalid voltage\n-    SdioSwitchHighSpeedFail,             // Switch to high speed fail\n-    SdioReadCISFail,                     // Read CIS fail\n-    SdioInvalidCard,                     // Invalid SDIO card\n-    TuningFail,                          // Tuning fail\n-    SwitchVoltageFail,                   // Switch voltage fail\n-    SwitchVoltage18VFail33VSuccess,      // Switch voltage fail\n-    ReTuningRequest,                     // Retuning request\n-    SetDriverStrengthFail,               // Set driver strength fail\n-    SetPowerClassFail,                   // Set power class fail\n-    HostNotReady,                        // Host controller not ready\n-    CardDetectFailed,                    // Card detect failed\n-    AuSizeNotSetProperly,                // AU size not set properly\n-    PollingCardIdleFailed,               // Polling card idle status failed\n-    DeselectCardFailed,                  // Deselect card failed\n-    CardStatusIdle,                      // Card idle\n-    CardStatusBusy,                      // Card busy\n-    CardInitFailed,                      // Card init failed\n-    IrqInitFailed,                       // init irq failed\n+    NotSupportYet,                     // Haven't supported\n+    TransferFailed,                    // Send command failed\n+    SetCardBlockSizeFailed,            // Set block size failed\n+    HostNotSupport,                    // Host doesn't support\n+    CardNotSupport,                    // Card doesn't support\n+    AllSendCidFailed,                  // Send CID failed\n+    SendRelativeAddressFailed,         // Send relative address failed\n+    SendCsdFailed,                     // Send CSD failed\n+    SelectCardFailed,                  // Select card failed\n+    SendScrFailed,                     // Send SCR failed\n+    SetDataBusWidthFailed,             // Set bus width failed\n+    GoIdleFailed,                      // Go idle failed\n+    HandShakeOperationConditionFailed, // Send Operation Condition failed\n+    SendApplicationCommandFailed,      // Send application command failed\n+    SwitchFailed,                      // Switch command failed\n+    StopTransmissionFailed,            // Stop transmission failed\n+    WaitWriteCompleteFailed,           // Wait write complete failed\n+    SetBlockCountFailed,               // Set block count failed\n+    SetRelativeAddressFailed,          // Set relative address failed\n+    SwitchBusTimingFailed,             // Switch high speed failed\n+    SendExtendedCsdFailed,             // Send EXT_CSD failed\n+    ConfigureBootFailed,               // Configure boot failed\n+    ConfigureExtendedCsdFailed,        // Configure EXT_CSD failed\n+    EnableHighCapacityEraseFailed,     // Enable high capacity erase failed\n+    SendTestPatternFailed,             // Send test pattern failed\n+    ReceiveTestPatternFailed,          // Receive test pattern failed\n+    SdioResponseError,                 // SDIO response error\n+    SdioInvalidArgument,               // SDIO invalid argument response error\n+    SdioSendOperationConditionFail,    // SDIO send operation condition fail\n+    InvalidVoltage,                    // Invalid voltage\n+    SdioSwitchHighSpeedFail,           // Switch to high speed fail\n+    SdioReadCISFail,                   // Read CIS fail\n+    SdioInvalidCard,                   // Invalid SDIO card\n+    TuningFail,                        // Tuning fail\n+    SwitchVoltageFail,                 // Switch voltage fail\n+    SwitchVoltage18VFail33VSuccess,    // Switch voltage fail\n+    ReTuningRequest,                   // Retuning request\n+    SetDriverStrengthFail,             // Set driver strength fail\n+    SetPowerClassFail,                 // Set power class fail\n+    HostNotReady,                      // Host controller not ready\n+    CardDetectFailed,                  // Card detect failed\n+    AuSizeNotSetProperly,              // AU size not set properly\n+    PollingCardIdleFailed,             // Polling card idle status failed\n+    DeselectCardFailed,                // Deselect card failed\n+    CardStatusIdle,                    // Card idle\n+    CardStatusBusy,                    // Card busy\n+    CardInitFailed,                    // Card init failed\n+    IrqInitFailed,                     // init irq failed\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/err.rs (original lines from 63 to 63)\n-pub type MCIHostStatus<T=()> = Result<T,MCIHostError>;\n+pub type MCIHostStatus<T = ()> = Result<T, MCIHostError>;\n"
            ]
          }
        },
        {
          "file": "src/mci_host/mci_host_card_detect.rs",
          "features": "",
          "count": 2,
          "kinds": {
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_host_card_detect.rs (original lines from 5 to 5)\n-    pub(crate) typ:MCIHostDetectCardType,\n+    pub(crate) typ: MCIHostDetectCardType,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_host_card_detect.rs (original lines from 26 to 26)\n+\n"
            ]
          }
        },
        {
          "file": "src/mci_host/mci_sdif/consts.rs",
          "features": "",
          "count": 2,
          "kinds": {
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/consts.rs (original lines from 4 to 4)\n-    Inserted =1,\n+    Inserted = 1,\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/consts.rs (original lines from 6 to 6)\n+\n"
            ]
          }
        },
        {
          "file": "src/mci_host/mci_sdif/mod.rs",
          "features": "",
          "count": 2,
          "kinds": {
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/mod.rs (original lines from 3 to 3)\n-pub mod sdif_device;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/mci_sdif/mod.rs (original lines from 5 to 5)\n+pub mod sdif_device;\n+\n"
            ]
          }
        },
        {
          "file": "src/mci_host/sd/csd.rs",
          "features": "",
          "count": 2,
          "kinds": {
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/csd.rs (original lines from 48 to 48)\n-    \n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/csd.rs (original lines from 80 to 80)\n+\n"
            ]
          }
        },
        {
          "file": "src/mci_host/sd/io_voltage.rs",
          "features": "",
          "count": 2,
          "kinds": {
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/io_voltage.rs (original lines from 19 to 19)\n-    \n+\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/io_voltage.rs (original lines from 36 to 36)\n+\n"
            ]
          }
        },
        {
          "file": "src/osa/consts.rs",
          "features": "",
          "count": 2,
          "kinds": {
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/osa/consts.rs (original lines from 28 to 30)\n-pub const FSDIF_TRANS_ERR_EVENTS: u32 = SDMMC_OSA_EVENT_TRANSFER_CMD_FAIL |\n-                                        SDMMC_OSA_EVENT_TRANSFER_DATA_FAIL |\n-                                        SDMMC_OSA_EVENT_CARD_REMOVED;\n+pub const FSDIF_TRANS_ERR_EVENTS: u32 = SDMMC_OSA_EVENT_TRANSFER_CMD_FAIL\n+    | SDMMC_OSA_EVENT_TRANSFER_DATA_FAIL\n+    | SDMMC_OSA_EVENT_CARD_REMOVED;\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/osa/consts.rs (original lines from 36 to 36)\n+\n"
            ]
          }
        },
        {
          "file": "src/osa/err.rs",
          "features": "",
          "count": 2,
          "kinds": {
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/osa/err.rs (original lines from 7 to 8)\n-    NotEnoughSpace,         // PoolBuffer size too small to copy contents from a slice\n-    SizeNotAligned,         // PoolBuffer size isn't aligned to size::T\n+    NotEnoughSpace, // PoolBuffer size too small to copy contents from a slice\n+    SizeNotAligned, // PoolBuffer size isn't aligned to size::T\n",
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/osa/err.rs (original lines from 12 to 12)\n-pub type FMempStatus<T=()> = Result<T, FMempError>;\n+pub type FMempStatus<T = ()> = Result<T, FMempError>;\n+\n"
            ]
          }
        },
        {
          "file": "/home/runner/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/log-0.4.25/src/lib.rs",
          "features": "",
          "count": 1,
          "kinds": {
            "Lockbud(Possibly)": [
              "{\n  \"bug_kind\": \"AtomicityViolation\",\n  \"possibility\": \"Possibly\",\n  \"diagnosis\": {\n    \"fn_name\": \"set_logger_racy\",\n    \"atomic_reader\": \"/home/runner/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/log-0.4.25/src/lib.rs:1453:11: 1453:40 (#0)\",\n    \"atomic_writer\": \"/home/runner/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/log-0.4.25/src/lib.rs:1456:13: 1456:56 (#0)\",\n    \"dep_kind\": \"Control\"\n  },\n  \"explanation\": \"atomic::store is data/control dependent on atomic::load\"\n}"
            ]
          }
        },
        {
          "file": "(virtual) clippy",
          "features": "",
          "count": 1,
          "kinds": {
            "Cargo": [
              "// pkg_name=phytium-mci, checker=Clippy\n// toolchain=nightly-2025-03-25, target=aarch64-unknown-none\n// features=\n// pkg_dir=/home/runner/check/batch_4/drivercraft/phytium-mci\n// cmd=cargo clippy --target aarch64-unknown-none  --no-deps\n// timestamp=2025-07-11 4:31:06.694643874 +08:00:00\n   Compiling proc-macro2 v1.0.93\n   Compiling unicode-ident v1.0.17\n   Compiling syn v1.0.109\n   Compiling autocfg v1.4.0\n    Checking scopeguard v1.2.0\n   Compiling unicode-width v0.1.14\n   Compiling base64 v0.13.1\n    Checking const-default v1.0.0\n    Checking spin v0.9.8\n    Checking cfg-if v1.0.0\n    Checking lazy_static v1.5.0\n    Checking tock-registers v0.9.0\n   Compiling lock_api v0.4.12\n    Checking bytemuck v1.22.0\n    Checking bitflags v2.8.0\n    Checking nb v1.1.0\n    Checking log v0.4.25\n   Compiling quote v1.0.38\n    Checking spin v0.10.0\n   Compiling syn v2.0.98\n   Compiling svgbobdoc v0.3.0\n    Checking rlsf v0.2.1\n   Compiling bare-test-macros v0.2.0\n   Compiling phytium-mci v0.1.0 (/home/runner/check/batch_4/drivercraft/phytium-mci)\nerror: could not compile `phytium-mci` (lib) due to 3 previous errors; 95 warnings emitted\n"
            ]
          }
        },
        {
          "file": "(virtual) rapx",
          "features": "",
          "count": 1,
          "kinds": {
            "Cargo": [
              "// pkg_name=phytium-mci, checker=Rapx\n// toolchain=nightly-2025-03-25, target=aarch64-unknown-none\n// features=\n// pkg_dir=/home/runner/check/batch_4/drivercraft/phytium-mci\n// cmd=cargo +nightly-2024-10-12 rapx -F -M -- --target aarch64-unknown-none \n// timestamp=2025-07-11 4:31:25.732672352 +08:00:00\n    Updating crates.io index\n Downloading crates ...\n  Downloaded autocfg v1.4.0\n  Downloaded quote v1.0.38\n  Downloaded spin v0.9.8\n  Downloaded syn v1.0.109\n  Downloaded spin v0.10.0\n  Downloaded tock-registers v0.9.0\n  Downloaded unicode-width v0.1.14\n  Downloaded unicode-ident v1.0.17\n  Downloaded syn v2.0.98\n  Downloaded lazy_static v1.5.0\n  Downloaded scopeguard v1.2.0\n  Downloaded rlsf v0.2.1\n  Downloaded proc-macro2 v1.0.93\n  Downloaded cfg-if v1.0.0\n  Downloaded bitflags v2.8.0\n  Downloaded nb v1.1.0\n  Downloaded bare-test-macros v0.2.0\nerror: failed to parse manifest at `/home/runner/.cargo/registry/src/index.crates.io-6f17d22bba15001f/bare-test-macros-0.2.0/Cargo.toml`\n\nCaused by:\n  feature `edition2024` is required\n\n  The package requires the Cargo feature called `edition2024`, but that feature is not stabilized in this version of Cargo (1.83.0-nightly (15fbd2f60 2024-10-08)).\n  Consider trying a more recent nightly release.\n  See https://doc.rust-lang.org/nightly/cargo/reference/unstable.html#edition-2024 for more information about the status of this feature.\n20:31:26|RAP|ERROR|: Finished with non-zero exit code.\n"
            ]
          }
        },
        {
          "file": "(virtual) semver-checks",
          "features": "",
          "count": 1,
          "kinds": {
            "Cargo": [
              "// pkg_name=phytium-mci, checker=SemverChecks\n// toolchain=nightly-2025-03-25, target=aarch64-unknown-none\n// features=\n// pkg_dir=/home/runner/check/batch_4/drivercraft/phytium-mci\n// cmd=cargo +nightly-2025-06-26-x86_64-unknown-linux-gnu semver-checks --target aarch64-unknown-none \n// timestamp=2025-07-11 4:31:15.536141219 +08:00:00\n    Building phytium-mci v0.1.0 (current)\nerror: running cargo-doc on crate 'phytium-mci' failed with output:\n-----\n   Compiling proc-macro2 v1.0.95\n   Compiling unicode-ident v1.0.18\n   Compiling autocfg v1.5.0\n   Compiling syn v1.0.109\n   Compiling base64 v0.13.1\n    Checking scopeguard v1.2.0\nerror[E0463]: can't find crate for `core`\n  |\n  = note: the `aarch64-unknown-none` target may not be installed\n  = help: consider downloading the target with `rustup target add aarch64-unknown-none`\n  = help: consider building the standard library from source with `cargo build -Zbuild-std`\n\nFor more information about this error, try `rustc --explain E0463`.\n   Compiling unicode-width v0.1.14\nerror: could not compile `scopeguard` (lib) due to 1 previous error\nwarning: build failed, waiting for other jobs to finish...\n\n-----\n\nerror: failed to build rustdoc for crate phytium-mci v0.1.0\nnote: this is usually due to a compilation error in the crate,\n      and is unlikely to be a bug in cargo-semver-checks\nnote: the following command can be used to reproduce the compilation error:\n      cargo new --lib example &&\n          cd example &&\n          echo '[workspace]' >> Cargo.toml &&\n          cargo add --path /home/runner/check/batch_4/drivercraft/phytium-mci --features default,dma,irq,pio,poll &&\n          cargo check\n\nerror: aborting due to failure to build rustdoc for crate phytium-mci v0.1.0\n"
            ]
          }
        },
        {
          "file": "(virtual) udeps",
          "features": "",
          "count": 1,
          "kinds": {
            "Cargo": [
              "// pkg_name=phytium-mci, checker=Udeps\n// toolchain=nightly-2025-03-25, target=aarch64-unknown-none\n// features=\n// pkg_dir=/home/runner/check/batch_4/drivercraft/phytium-mci\n// cmd=cargo +nightly-2025-06-26-x86_64-unknown-linux-gnu udeps --target aarch64-unknown-none \n// timestamp=2025-07-11 4:31:30.253068676 +08:00:00\n   Compiling proc-macro2 v1.0.93\n   Compiling unicode-ident v1.0.17\n   Compiling autocfg v1.4.0\n   Compiling syn v1.0.109\n   Compiling unicode-width v0.1.14\n    Checking scopeguard v1.2.0\n   Compiling base64 v0.13.1\nerror[E0463]: can't find crate for `core`\n  |\n  = note: the `aarch64-unknown-none` target may not be installed\n  = help: consider downloading the target with `rustup target add aarch64-unknown-none`\n  = help: consider building the standard library from source with `cargo build -Zbuild-std`\n\nFor more information about this error, try `rustc --explain E0463`.\nerror: could not compile `scopeguard` (lib) due to 1 previous error\nwarning: build failed, waiting for other jobs to finish...\n"
            ]
          }
        },
        {
          "file": "[Lockbud] deadlock detection",
          "features": "",
          "count": 1,
          "kinds": {
            "Lockbud(Possibly)": [
              "[2025-07-10T20:31:17Z WARN  lockbud::callbacks] [\n      {\n        \"AtomicityViolation\": {\n          \"bug_kind\": \"AtomicityViolation\",\n          \"possibility\": \"Possibly\",\n          \"diagnosis\": {\n            \"fn_name\": \"set_logger_racy\",\n            \"atomic_reader\": \"/home/runner/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/log-0.4.25/src/lib.rs:1453:11: 1453:40 (#0)\",\n            \"atomic_writer\": \"/home/runner/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/log-0.4.25/src/lib.rs:1456:13: 1456:56 (#0)\",\n            \"dep_kind\": \"Control\"\n          },\n          \"explanation\": \"atomic::store is data/control dependent on atomic::load\"\n        }\n      }\n    ]\n[2025-07-10T20:31:17Z WARN  lockbud::callbacks] crate log contains bugs: { probably: 0, possibly: 0 }, conflictlock: { probably: 0, possibly: 0 }, condvar_deadlock: { probably: 0, possibly: 0 }, atomicity_violation: { possibly: 1 }, invalid_free: { possibly: 0 }, use_after_free: { possibly: 0 }"
            ]
          }
        },
        {
          "file": "[Udeps] Unused dependencies",
          "features": "",
          "count": 1,
          "kinds": {
            "Unused Deps": [
              "pkg=phytium-mci, checker=Udeps\ntoolchain=nightly-2025-03-25, target=aarch64-unknown-none\nfeatures=\npkg_dir=/home/runner/check/batch_4/drivercraft/phytium-mci\ncmd=cargo +nightly-2025-06-26-x86_64-unknown-linux-gnu udeps --target aarch64-unknown-none \ntimestamp=2025-07-11 4:31:30.833625855 +08:00:00\n\n\nstdout:\n\nstderr:\n   Compiling proc-macro2 v1.0.93\n   Compiling unicode-ident v1.0.17\n   Compiling autocfg v1.4.0\n   Compiling syn v1.0.109\n   Compiling unicode-width v0.1.14\n    Checking scopeguard v1.2.0\n   Compiling base64 v0.13.1\nerror[E0463]: can't find crate for `core`\n  |\n  = note: the `aarch64-unknown-none` target may not be installed\n  = help: consider downloading the target with `rustup target add aarch64-unknown-none`\n  = help: consider building the standard library from source with `cargo build -Zbuild-std`\n\nFor more information about this error, try `rustc --explain E0463`.\nerror: could not compile `scopeguard` (lib) due to 1 previous error\nwarning: build failed, waiting for other jobs to finish...\n"
            ]
          }
        },
        {
          "file": "[outdated direct dependencies]",
          "features": "",
          "count": 1,
          "kinds": {
            "Outdated": [
              "pkg=phytium-mci, checker=Outdated\ntoolchain=nightly-2025-03-25, target=aarch64-unknown-none\nfeatures=\npkg_dir=/home/runner/check/batch_4/drivercraft/phytium-mci\ncmd=cargo +nightly-2025-06-26-x86_64-unknown-linux-gnu outdated -R --exit-code=2\ntimestamp=2025-07-11 4:31:30.252018385 +08:00:00\n\nName            Project  Compat  Latest  Kind         Platform\n----            -------  ------  ------  ----         --------\nbare-test       0.4.0    0.4.1   0.4.1   Development  ---\nbitflags        2.8.0    2.9.1   2.9.1   Normal       ---\nbytemuck        1.22.0   1.23.1  1.23.1  Normal       ---\nlog             0.4.25   0.4.27  0.4.27  Normal       ---\ntock-registers  0.9.0    ---     0.10.0  Normal       ---\n"
            ]
          }
        },
        {
          "file": "[semver checks violation]",
          "features": "",
          "count": 1,
          "kinds": {
            "Semver Violation": [
              "pkg=phytium-mci, checker=SemverChecks\ntoolchain=nightly-2025-03-25, target=aarch64-unknown-none\nfeatures=\npkg_dir=/home/runner/check/batch_4/drivercraft/phytium-mci\ncmd=cargo +nightly-2025-06-26-x86_64-unknown-linux-gnu semver-checks --target aarch64-unknown-none \ntimestamp=2025-07-11 4:31:16.441597888 +08:00:00\n\n\nstdout:\n\nstderr:\n    Building phytium-mci v0.1.0 (current)\nerror: running cargo-doc on crate 'phytium-mci' failed with output:\n-----\n   Compiling proc-macro2 v1.0.95\n   Compiling unicode-ident v1.0.18\n   Compiling autocfg v1.5.0\n   Compiling syn v1.0.109\n   Compiling base64 v0.13.1\n    Checking scopeguard v1.2.0\nerror[E0463]: can't find crate for `core`\n  |\n  = note: the `aarch64-unknown-none` target may not be installed\n  = help: consider downloading the target with `rustup target add aarch64-unknown-none`\n  = help: consider building the standard library from source with `cargo build -Zbuild-std`\n\nFor more information about this error, try `rustc --explain E0463`.\n   Compiling unicode-width v0.1.14\nerror: could not compile `scopeguard` (lib) due to 1 previous error\nwarning: build failed, waiting for other jobs to finish...\n\n-----\n\nerror: failed to build rustdoc for crate phytium-mci v0.1.0\nnote: this is usually due to a compilation error in the crate,\n      and is unlikely to be a bug in cargo-semver-checks\nnote: the following command can be used to reproduce the compilation error:\n      cargo new --lib example &&\n          cd example &&\n          echo '[workspace]' >> Cargo.toml &&\n          cargo add --path /home/runner/check/batch_4/drivercraft/phytium-mci --features default,dma,irq,pio,poll &&\n          cargo check\n\nerror: aborting due to failure to build rustdoc for crate phytium-mci v0.1.0\n"
            ]
          }
        },
        {
          "file": "src/aarch.rs",
          "features": "",
          "count": 1,
          "kinds": {
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/aarch.rs (original lines from 13 to 13)\n+\n"
            ]
          }
        },
        {
          "file": "src/iopad/err.rs",
          "features": "",
          "count": 1,
          "kinds": {
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/iopad/err.rs (original lines from 17 to 17)\n-pub type FioPadResult<T=()> = Result<T, FioPadError>;\n+pub type FioPadResult<T = ()> = Result<T, FioPadError>;\n+\n"
            ]
          }
        },
        {
          "file": "src/mci/err.rs",
          "features": "",
          "count": 1,
          "kinds": {
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci/err.rs (original lines from 24 to 24)\n-pub type MCIResult<T=()> = Result<T, MCIError>;\n+pub type MCIResult<T = ()> = Result<T, MCIError>;\n+\n"
            ]
          }
        },
        {
          "file": "src/mci_host/sd/cid.rs",
          "features": "",
          "count": 1,
          "kinds": {
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/cid.rs (original lines from 23 to 23)\n+\n"
            ]
          }
        },
        {
          "file": "src/mci_host/sd/scr.rs",
          "features": "",
          "count": 1,
          "kinds": {
            "Unformatted": [
              "file: /home/runner/check/batch_4/drivercraft/phytium-mci/src/mci_host/sd/scr.rs (original lines from 44 to 44)\n+\n"
            ]
          }
        }
      ]
    }
  ],
  "kinds_order": [
    "Cargo",
    "Clippy(Error)",
    "Clippy(Warn)",
    "Semver Violation",
    "Audit",
    "Mirai",
    "Rapx",
    "Rudra",
    "Lockbud(Probably)",
    "Lockbud(Possibly)",
    "Atomvchecker",
    "Outdated",
    "Geiger",
    "Unused Deps",
    "Unformatted"
  ]
}